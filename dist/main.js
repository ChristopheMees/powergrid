define("powergrid",[],function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";window.define=System.amdDefine,window.require=window.requirejs=System.amdRequire;var n=i(1),r=i(53),s=i(54),o=i(35),a=i(42),l=e.exports={};l.PowerGrid=n,l.ArrayDataSource=r,l.JsonDataSource=s,l.GroupingDataSource=o,l.SortingDataSource=a},function(e,t,i){var n,r;n=[i(2),i(3),i(4),i(6)],r=function(e,t,n,r){function s(){var t=e("<div style='overflow: scroll; width: 100px; height: 100px; visibility: none; opacity: 0'></div>"),i=e("<div style='width:100%; height: 100%;'></div>");t.append(i),e("body").append(t);var n={height:t.height()-i.height(),width:t.width()-i.width()};return t.remove(),n}function o(e,t){var i=document.createElement(e);return t&&(i.className=t),i}function a(e){return e!==!1}function l(e,t){return!(!e||!t)&&(e.begin<=t.begin&&e.end>=t.begin||(e.begin<=t.end&&e.end>=t.end||(e.begin>=t.begin&&e.end<=t.end||(e.begin<=t.begin&&e.end>=t.end||void 0))))}function d(t,i){var n=this;this.options=i,this.target=t;for(var s in c)void 0===this.options[s]&&(this.options[s]=c[s]);this.dataSource=i.dataSource,t!==!1&&(this.promise=new r(function(e,t){n.beginInit(e)}),this.id=t.attr("id"),e(t).on("remove",function(){n.destroy()}))}var u,c={virtualScrollingExcess:10,frozenRowsTop:0,frozenRowsBottom:0,frozenColumnsLeft:0,frozenColumnsRight:0,fullWidth:!0,rowHeight:31};return d.prototype={then:function(e){return this.promise.then(e)},beginInit:function(e){var i=this;u=s(),t.inject(".pg-rowgroup",{width:"calc(100% - "+u.width+"px)"}),t.inject(".pg-rowgroup.pg-footer",{bottom:u.width+"px"}),this.options.extensions?this.loadExtensions(function(t,n){t=i.sortByLoadOrder(t,n),t.forEach(function(e){console.info("Initing extension "+e);var t=n[e];"function"==typeof t?t(i,i.options.extensions[e]):"function"==typeof t.init&&t.init(i,i.options.extensions[e])}),i.init(),e()}):(i.init(),e())},loadExtensions:function(t,n,r,s){var o=this;arguments.length<4&&(n=Object.keys(this.options.extensions),r={},s=[]);var a=i(10),l=[];n.forEach(function(t){var i=a("./"+t);r[t]=i,s.push(t);var n=i.requires;if(n)for(var d in n)o.options.extensions[d]||l.push(d),o.options.extensions[d]?e.extend(!0,o.options.extensions[d],n[d]):o.options.extensions[d]=n[d]}),l.length?o.loadExtensions(t,l,r,s):t(s,r)},sortByLoadOrder:function(e,t){function i(e){void 0!==t[e]&&void 0===r[e]&&(t[e].loadFirst&&t[e].loadFirst.forEach(i),n.push(e),r[e]=!0)}var n=[],r={};return e.forEach(i),n},initLoadingIndicator:function(){e(this.target).addClass("pg-loading")},init:function(){var t=this,i=(this.baseSelector="#"+this.target.attr("id"),this.container=e("<div class='powergrid'>")),r=this.columnheadercontainer=e("<div class='pg-columnheaders'>"),s=this.headercontainer=this.options.frozenRowsTop&&e("<div class='pg-rowgroup pg-header'>")||void 0,o=this.scrollingcontainer=e("<div class='pg-rowgroup pg-scrolling'>"),a=this.footercontainer=this.options.frozenRowsBottom&&e("<div class='pg-rowgroup pg-footer'>")||void 0,l=this.scroller=e("<div class='pg-scroller'>"),d=this.scrollFiller=e("<div class='pg-scroller-filler'>");this.scrollContainers=e().add(o).add(s).add(a);this.options.fullWidth&&i.addClass("pg-full-width"),this.options.autoResize&&i.addClass("pg-autoresize"),this.options.columns.forEach(function(e,t){void 0===e.key&&(e.key=t)}),this.fixedLeft=this.fixedRight=this.middleScrollers=e(),this.columnheadergroup=this.createRowGroup(r),this.headergroup=s&&this.createRowGroup(s),this.scrollinggroup=this.createRowGroup(o,!1),this.footergroup=a&&this.createRowGroup(a),this.renderColumnHeaderContents(this.columnheadergroup),i.append(r).append(s).append(o).append(a).append(l.append(d)),this.queueAdjustColumnPositions(),e(this.target).append(i),l.on("scroll",function(e){t.syncScroll(this,e)}),this.dataSource.isReady()?(t.isInited||(t.isInited=!0,t.trigger("inited",t)),t.trigger("dataloaded"),n.inAnimationFrame(function(){t.renderData(),t.trigger("viewchanged"),e(t.target).removeClass("pg-loading")})):this.initLoadingIndicator(),e(this.dataSource).on("dataloaded",function(i){t.isInited||(t.isInited=!0,t.trigger("inited",t)),t.trigger("dataloaded",i.data),n.inAnimationFrame(function(){t.renderData(),t.queueAfterRender(function(){t.trigger("viewchanged"),e(t.target).removeClass("pg-loading")})})}).on("rowsremoved",function(e,i){n.inAnimationFrame(function(){t._removeRows(i.start,i.end),t.queueUpdateViewport(),t.queueAdjustHeights(),t.queueAfterRender(function(){t.trigger("rowsremoved",i),t.trigger("viewchanged")})})}).on("rowsadded",function(e,i){n.inAnimationFrame(function(){t._addRows(i.start,i.end),t.queueUpdateViewport(),t.queueAdjustHeights(),t.queueAfterRender(function(){t.trigger("rowsadded",i),t.trigger("viewchanged")})})}).on("datachanged",function(e,i){n.inAnimationFrame(function(){i.data&&t._dataChanged(i.data,i.oldData),i.values&&(t.updateCellValues(i.values),t.trigger("change")),t.trigger("datachanged",i),t.trigger("viewchanged")})}),this.initScrollEvents()},ready:function(e){this.isInited?e.apply(this,[this]):this.on("inited",e.bind(this,this))},destroy:function(){this.target.empty()},initScrollEvents:function(){var e=this;this.target.on("wheel",function(t){var i,n,r=t.originalEvent.deltaX,s=t.originalEvent.deltaY,o=t.originalEvent.deltaMode;switch(o){case 0:i=n=1;break;case 1:i=n=e.rowHeight(0);break;case 2:i=e.pageHeight(),n=e.pageWidth()}e.scrollBy(r*i,s*n),t.preventDefault()}),this.initTouchScrollEvents()},initTouchScrollEvents:function(){function e(){for(var e=u[0].t,t=1,i=u.length;t<i&&!(e-u[t].t>a);t++);u=u.slice(0,t)}function t(e,t){function i(){if(!o){var n=(new Date).getTime(),u=n-r;r=n;var c=Math.pow(d,u);e*=c,t*=c,Math.abs(e)>=l&&Math.abs(t)>=l&&(a.left+=e*u,a.top+=t*u,s.scrollTo(Math.round(a.left),Math.round(a.top)),requestAnimationFrame(i))}}var r=(new Date).getTime(),a=s.getScrollPosition();n.inAnimationFrame(i)}var i,r,s=this,o=!1,a=100,l=.001,d=.998,u=[];this.target.on("touchstart",function(e){o=!0,i=e.originalEvent.touches[0].pageX,r=e.originalEvent.touches[0].pageY}).on("touchmove",function(t){if(o){var n=t.originalEvent.touches[0].pageX,a=t.originalEvent.touches[0].pageY,l=i-n,d=r-a,c={x:l,y:d,t:(new Date).getTime()};u.unshift(c),e(),i=n,r=a,s.scrollBy(l,d),t.preventDefault()}}).on("touchend",function(e){if(o=!1,u.length){var i=(new Date).getTime()-u[0].t;if(i<a){var n=u.reduce(function(e,t){return e.dX+=t.x,e.dY+=t.y,e},{dX:0,dY:0}),r=u[0].t-u[u.length-1].t;t(n.dX/r,n.dY/r)}u=[]}})},createRowGroup:function(t,i){var n=this.options.frozenColumnsLeft>0&&e("<div class='pg-container pg-fixed pg-left'>"),r=this.options.frozenColumnsRight>0&&e("<div class='pg-container pg-fixed pg-right'>"),s=e("<div class='pg-container pg-scrolling'>");this.fixedLeft=this.fixedLeft.add(n),this.fixedRight=this.fixedRight.add(r),this.middleScrollers=this.middleScrollers.add(s);i&&n.add(s).add(r).each(function(t,i){e(i).append("<div class='.pg-dummyLead'>").append("<div class='.pg-dummyTail'>")}),t.append(n).append(s).append(r);var o=e();return n&&(o=o.add(n)),s&&(o=o.add(s)),r&&(o=o.add(r)),{left:n,scrolling:s,right:r,all:o}},renderData:function(){this.headergroup&&this.headergroup.all.empty(),this.footergroup&&this.footergroup.all.empty(),this.scrollinggroup.all.empty(),this.setViewport({begin:0,end:0}),this._renderDataErrorMessage="",this.headergroup&&this.renderRowGroupContents(0,this.options.frozenRowsTop,this.headergroup),this.footergroup&&this.renderRowGroupContents(this.dataSource.recordCount()-this.options.frozenRowsBottom,this.dataSource.recordCount(),this.footergroup),"undefined"!=typeof this._renderDataErrorMessage&&this._renderDataErrorMessage&&(e.msgbox(i18n(this._renderDataErrorMessage),{type:"error",buttons:[{type:"submit",value:i18n("close")}]}),this._renderDataErrorMessage=""),this.queueUpdateViewport(),this.queueAdjustHeights(),this.queueAfterRender(function(){this.trigger("datarendered")})},renderColumnHeaderContents:function(t){var i=t.left&&e("<div class='pg-row pg-fixed'>"),n=t.scrolling&&e("<div class='pg-row pg-scrolling'>"),r=t.right&&e("<div class='pg-row pg-fixed'>"),s=e();t.left&&t.left.append(i),t.scrolling&&t.scrolling.append(n),t.right&&t.right.append(r),i&&(s=s.add(i)),n&&(s=s.add(n)),r&&(s=s.add(r));for(var o=0;o<this.options.columns.length;o++){var a,l=this.options.columns[o];a=this.renderHeaderCell(l,o),a.addClass("pg-column"+this.normalizeCssClass(l.key)),a.attr("data-column-key",l.key),o<this.options.frozenColumnsLeft?i.append(a):o>this.options.columns.length-this.options.frozenColumnsRight-1?r.append(a):n.append(a)}},rowGroupTemplates:{fixed:o("div","pg-row pg-fixed"),scrolling:o("div","pg-row pg-scrolling")},renderRowGroupContents:function(e,t,i,n,r){var s=this;r!=-1||n||(r=void 0,n=!0);var o,l,d,u=void 0===r?n===!0?"prepend":"append":n===!0?"before":"after";void 0===r?(o=i.left,l=i.scrolling,d=i.right):(o=i.left&&i.left.children(".pg-row:eq("+r+")"),l=i.scrolling&&i.scrolling.children(".pg-row:eq("+r+")"),d=i.right&&i.right.children(".pg-row:eq("+r+")"));for(var c=o&&document.createDocumentFragment(),h=l&&document.createDocumentFragment(),p=d&&document.createDocumentFragment(),f=this.dataSource.getData(e<0?0:e,t),g=e;g<t;g++){var m=f[g-e],v=o&&this.rowGroupTemplates.fixed.cloneNode(),y=l&&this.rowGroupTemplates.scrolling.cloneNode(),w=d&&this.rowGroupTemplates.fixed.cloneNode(),b=[v,y,w].filter(a);this.renderRowToParts(m,g,v,y,w),this.afterRenderRow(m,g,b),b.forEach(function(e){e.setAttribute("data-row-idx",g),e.setAttribute("data-row-id",m.id),e.style.height=s.rowHeight(g)+"px"}),c&&c.appendChild(v),h&&h.appendChild(y),p&&p.appendChild(w)}o&&o[u](c),l&&l[u](h),d&&d[u](p)},renderRowToParts:function(e,t,i,n,r){for(var s=0;s<this.options.columns.length;s++){var o,a=this.options.columns[s];o=this.renderCell(e,a,t,s),this.afterCellRendered(e,a,o),o.className+=" pg-column"+this.normalizeCssClass(a.key),o.setAttribute("data-column-key",a.key),s<this.options.frozenColumnsLeft?i.appendChild(o):s>this.options.columns.length-this.options.frozenColumnsRight-1?r.appendChild(o):n.appendChild(o)}},afterRenderRow:function(e,t,i){},_removeRows:function(t,i){function n(t,i,n){var r=".pg-row:lt("+i+")";return t>0&&(r+=":gt("+(t-1)+")"),n.children(".pg-container").each(function(t,i){e(i).children(r).remove()}),i-t}console.log("Removing rows "+t+" to "+i);var r=this.dataSource.recordCount()-this.options.frozenRowsTop;if(t<i&&t>=this.viewport.begin&&t<this.viewport.end){var s=n(t-this.viewport.begin,Math.min(this.viewport.end,i)-this.viewport.begin,this.scrollingcontainer);t=Math.min(r,i),this.viewport.end-=s}},viewRange:function(){var e=this.options.frozenRowsTop,t=this.dataSource.recordCount()-this.options.frozenRowsBottom,i=this.getScrollPosition(),n=this.getScrollAreaSize(),r=this.rowsInView(i.top,i.top+n.height,e,t);return r.begin=Math.max(e,r.begin-this.options.virtualScrollingExcess),r.end=Math.min(t,r.end+this.options.virtualScrollingExcess),r},scrollToCell:function(e,t){var i=this.options.frozenRowsTop,n=this.dataSource.recordCount()-this.options.frozenRowsBottom,r=this.getScrollPosition(),s=this.getScrollAreaSize(),o=this.rowsInView(r.top,r.top+s.height,i,n),a=r.top,l=r.left;(!this.options.frozenRowsTop||e>=this.options.frozenRowsTop)&&(!this.options.frozenRowsBottom||e<this.dataSource.recordCount()-this.options.frozenRowsBottom)&&(e<=o.begin||e>=o.end)&&(a=Math.max(0,this.rowHeight(i,e)-s.height/2)),this.scrollTo(l,a)},_addRows:function(e,t){var i=this.viewRange();e>=this.viewport.begin&&e<=this.viewport.end&&(console.log("Adding rows "+e+" to "+t),t=Math.min(i.end,t),this.renderRowGroupContents(e,t,this.scrollinggroup,!1,e-this.viewport.begin-1),this.viewport.end+=t-e)},_applyDiff:function(e){for(var t=0,i=e.length;t<i;t++){var n=e[t];n.add?this._addRows(n.add[0],n.add[1]):n.remove&&this._removeRows(n.remove[0],n.remove[1])}this.queueUpdateViewport(),this.queueAdjustHeights()},_dataChanged:function(e,t){var i=this.diff(t,e);this._applyDiff(i)},updateViewport:function(e){var t,i=this.options.frozenRowsTop,n=this.dataSource.recordCount()-this.options.frozenRowsBottom,r=this.getScrollPosition(),s=this.getScrollAreaSize(),o=this.rowsInView(r.top,r.top+s.height,i,n),a={begin:Math.max(i,o.begin-this.options.virtualScrollingExcess),end:Math.min(n,o.end+this.options.virtualScrollingExcess)};t=e?a:l(this.viewport,a)?{begin:Math.min(o.begin,this.viewport.begin),end:Math.max(o.end,this.viewport.end)}:o,this.setViewport(t),e||(window.clearImmediate&&window.clearImmediate(this._updateViewportImmediate),this._updateViewportImmediate=(window.setImmediate||requestAnimationFrame)(this.updateViewport.bind(this,[!0])))},setViewport:function(t){var i=this,n=this.options.frozenRowsTop,r=this.dataSource.recordCount()-this.options.frozenRowsBottom,s=this.scrollinggroup,o=s.all;if(!this.viewport||t.begin!=this.viewport.begin||t.end!=this.viewport.end){var a=this.rowHeight(n,t.begin),d=this.rowHeight(t.end,r);l(t,this.viewport)?(t.begin<this.viewport.begin?this.renderRowGroupContents(Math.max(n,t.begin),Math.min(t.end,this.viewport.begin),this.scrollinggroup,!0):t.begin>this.viewport.begin&&o.each(function(n,r){e(r).children(".pg-row:lt("+(t.begin-i.viewport.begin)+")").remove()}),t.end<this.viewport.end&&t.end>this.viewport.begin?o.each(function(n,r){e(r).children(".pg-row:gt("+(i.viewport.begin+t.end-t.begin-1)+")").remove()}):t.end>this.viewport.end&&this.renderRowGroupContents(Math.max(this.viewport.end,t.begin),Math.min(t.end,r),this.scrollinggroup,!1)):(o.empty(),this.renderRowGroupContents(Math.max(n,t.begin),Math.min(t.end,r),this.scrollinggroup,!1)),o.css("padding-top",a+"px"),o.css("padding-bottom",d+"px");this.viewport=t}},_updateStyle:function(i,n,r){if(i===!0)e(n).css(r);else{if(i===!1){var s={};Object.keys(r).forEach(function(e){s[e]=""}),e(n).css(s)}t.inject(n,r)}},adjustWidths:function(e){for(var t=this.options.columns,i=0,n=t.length;i<n;i++){var r=t[i],s=this.columnWidth(i);this.options.fullWidth&&i==this.options.columns.length-this.options.frozenColumnsRight-1?this._updateStyle(e,this.baseSelector+" .pg-column"+this.normalizeCssClass(r.key),{width:"auto","min-width":s+"px",right:"0"}):this._updateStyle(e,this.baseSelector+" .pg-column"+this.normalizeCssClass(r.key),{width:s+"px",right:"auto"})}var o=this.columnWidth(0,this.options.frozenColumnsLeft),a=this.columnWidth(this.options.frozenColumnsLeft,this.options.columns.length-this.options.frozenColumnsRight),l=this.columnWidth(this.options.columns.length-this.options.frozenColumnsRight,this.options.columns.length);this.fixedLeft.css("width",o+"px"),this.fixedRight.css("width",l+"px"),this.columnheadergroup.right&&this.columnheadergroup.right.css("width",l+u.width+"px");var d="calc(100% - "+o+"px - "+l+"px)";this.middleScrollers.css({left:o+"px",width:a+"px","min-width":d}),this.scrollFiller.css({width:o+a+l+this.scroller.width()-this.scrollingcontainer.width()+"px"}),this.options.autoResize&&this.container.css({width:this.columnWidth(0,this.options.columns.length)+"px"})},adjustHeights:function(){var e=this.headerContainerHeight(),t=this.rowHeight(0,this.options.frozenRowsTop),i=this.rowHeight(this.dataSource.recordCount()-this.options.frozenRowsBottom,this.dataSource.recordCount());this.columnheadercontainer.css("height",e+"px"),this.columnheadergroup.all.css("height",this.headerHeight()+"px"),this.headercontainer&&this.headercontainer.css("height",t+"px").css("top",e+"px"),this.footercontainer&&this.footercontainer.css("height",i+"px"),this.scrollingcontainer.css("top",e+t+"px").css("bottom",i+(this.options.autoResize?0:u.height)+"px"),this.scroller.css("top",e+"px"),this.scrollFiller.css({height:this.rowHeight(0,this.dataSource.recordCount())+this.scroller.height()-this.scrollingcontainer.height()}),this.options.autoResize&&this.container.css({height:this.rowHeight(0,this.dataSource.recordCount())+e+"px"})},headerContainerHeight:function(){return this.headerHeight()},headerHeight:function(){return Math.max.apply(void 0,this.target.find(".pg-columnheader span").map(function(t,i){return e(i).outerHeight()}))},adjustColumnPositions:function(e){for(var t=this.options.columns,i=0,n=new Array(this.options.length),r=0,s=t.length;r<s;r++){var o=t[r];r!=this.options.frozenColumnsLeft&&s-r!=this.options.frozenColumnsRight||(i=0),n[r]=i,this._updateStyle(e,this.baseSelector+" .pg-column"+this.normalizeCssClass(o.key),{left:i+"px"}),o.offsetLeft=i,i+=this.columnWidth(r)}return this.adjustWidths(e),n},queueRenderUpdate:function(){var e=this;return void 0==this.renderQueue&&(this.renderQueue={callbacks:[]},n.inAnimationFrame(function(){e.processRenderQueue(e.renderQueue),e.renderQueue.callbacks.forEach(function(t){t.apply(e)}),e.renderQueue=void 0},!0)),this.renderQueue},processRenderQueue:function(e){e.syncScroll&&this.syncScroll(!0),e.updateViewport&&this.updateViewport(),e.adjustColumnPositions&&this.adjustColumnPositions(e.columnPositionsTemporary),e.adjustHeights&&this.adjustHeights()},queueAdjustColumnPositions:function(e){var t=this.queueRenderUpdate();e?void 0===t.columnPositionsTemporary&&(t.columnPositionsTemporary=e):t.columnPositionsTemporary=!1,t.adjustColumnPositions=!0},queueAdjustHeights:function(){this.queueRenderUpdate().adjustHeights=!0},queueUpdateViewport:function(){this.queueRenderUpdate().updateViewport=!0},queueAfterRender:function(e){this.queueRenderUpdate().callbacks.push(e)},queueSyncScroll:function(){this.queueRenderUpdate().syncScroll=!0},columnWidth:function(e,t){if(void 0==t)return this.options.columns[e].width;for(var i=0;e<t;)i+=this.options.columns[e++].width;return i},rowHeight:function(e,t){return void 0==t?this.options.rowHeight:(t-e)*this.options.rowHeight},rowsInView:function(e,t,i,n){for(var r=-1,s=0,o=i||0,a=n||this.dataSource.recordCount();o<a;o++)if(s+=this.rowHeight(o),s>=e&&r===-1)r=o;else if(s>t)break;return r>-1?{begin:r,end:o}:{begin:0,end:0}},scrollBy:function(e,t){var i=this;void 0===i.scrollBydY&&void 0===i.scrollBydX?(i.scrollBydY=t,i.scrollBydX=e,(window.setImmediate||requestAnimationFrame)(function(){i.scroller[0].scrollTop+=i.scrollBydY,i.scroller[0].scrollLeft+=i.scrollBydX,i.scrollBydY=void 0,i.scrollBydX=void 0,i.afterscroll()})):(i.scrollBydY+=t,i.scrollBydX+=e)},scrollTo:function(e,t){this.scroller[0].scrollTop=Math.max(0,t),this.scroller[0].scrollLeft=Math.max(0,e),this.afterscroll()},getScrollPosition:function(){return{left:this.scroller[0].scrollLeft,top:this.scroller[0].scrollTop}},getScrollAreaSize:function(){return{width:this.container.children(".pg-rowgroup.pg-scrolling").children(".pg-container.pg-scrolling")[0].offsetWidth,height:this.container.children(".pg-rowgroup.pg-scrolling")[0].offsetHeight}},syncScroll:function(e,t,i){1==arguments.length&&"boolean"==typeof arguments[0]&&(i=arguments[0],e=void 0),e||(e=this.scroller[0]),this.container.children(".pg-scrolling").scrollTop(e.scrollTop),this.middleScrollers.css("transform","translate(-"+e.scrollLeft+"px,0)"),i||this.afterscroll()},afterscroll:function(){var t=this;this.updateViewportTimer||(this.updateViewportTimer=setTimeout(function(){n.inAnimationFrame(t.updateViewport.bind(t)),t.updateViewportTimer=null},100)),e(this).trigger("scroll")},renderHeaderCell:function(t,i){return e("<div class='pg-columnheader'>").append(e("<span>").text(t.title))},renderCellTemplate:function(){var e=document.createElement("div");return e.className="pg-cell",e}(),renderCell:function(e,t,i,n){var r=this.renderCellTemplate.cloneNode(),s=this.renderCellContent(e,t);return r.appendChild(s),r},renderCellContent:function(e,t){return this.renderCellValue(e,t,this.getCellTextValue(n.getValue(e,t.key),e,t))},updateCellValues:function(e){for(var t=0,i=e.length;t<i;t++)this.updateCellValue(e[t].id,e[t].key)},afterCellRendered:function(e,t,i){},updateCellValue:function(e,t){var i=this.findRow(e),n=i.children(".pg-cell[data-column-key='"+t+"']");if(n.length){var r=this.dataSource.getRecordById(e),s=this.getColumnForKey(t);n.empty().append(this.renderCellContent(r,s)),this.afterCellRendered(r,s,n)}},getRecordById:function(e){return this.dataSource.getRecordById(e)},findRow:function(e){return this.container.find("> .pg-rowgroup > .pg-container > .pg-row[data-row-id='"+e+"']")},cellValueTemplate:function(){var e=document.createElement("span");return e}(),renderCellValue:function(e,t,i){var n=this.cellValueTemplate.cloneNode();return null!=i&&(n.textContent=i),n},getCellTextValue:function(e,t,i){return e},getColumnForKey:function(e){return this.getColumnForIndex(this.getColumnIndexForKey(e))},getColumnForIndex:function(e){return this.options.columns[e]},columnCount:function(){return this.options.columns.length},getColumnIndexForKey:function(e){for(var t=0,i=this.options.columns.length;t<i;t++)if(this.options.columns[t].key==e)return t},getCellFor:function(e,t){return this.container.find(".pg-row[data-row-id='"+e+"'] > .pg-cell[data-column-key='"+t+"']")},trigger:function(t,i){e(this).trigger(t,i),e(this.target).trigger(t,i)},on:function(t,i){return e(this).on(t,i)},getRowGroupFor:function(e){return e<this.options.frozenRowsTop?this.headergroup:e>this.dataSource.recordCount()-this.options.frozenRowsBottom?this.footergroup:this.scrollinggroup},diff:function e(t,i){function n(e){for(var t={},i=0,n=e.length;i<n;i++)t[e[i].id]=e[i];return t}if(!t.length&&!i.length)return[];if(!t.length)return[{add:[0,i.length]}];if(!i.length)return[{remove:[0,t.length]}];for(var e=[],r=n(t),s=[],o=t.length-1,a=i.length-1;o>=0;){for(;a>=0&&!r[i[a].id];)a--;if(a<0){e.push({remove:[0,o+1]});break}for(var l=o;o>=0&&t[o].id!==i[a].id;)o--;o>=0&&s.unshift(t[o]),o!==l&&e.push({remove:[o+1,l+1]}),o--,a--}if(0==s.length)e.push({add:[0,i.length]});else for(var d=0,a=0;a<i.length&&d<s.length;){for(;a<i.length&&d<s.length&&s[d].id===i[a].id;)d++,a++;if(a>=i.length)break;var u=a;if(d>=s.length)a=i.length;else for(;s[d].id!==i[a].id;)a++;u!==a&&e.push({add:[u,a]})}return e},saveSetting:function(e,t){localStorage[this.options.settingsId+"_"+e]=JSON.stringify(t)},loadSetting:function(e){var t=localStorage[this.options.settingsId+"_"+e];if(t)return JSON.parse(t)},normalizeCssClass:function(e){return"string"!=typeof e?e:e.replace(/[.\[\]]/g,"_")}},e.fn.extend({PowerGrid:function(e){var t=this.data("powergrid");return e&&(t&&t.destroy(),t=new d(this,e),this.data("powergrid",t)),t}}),d}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;/*!
	 * jQuery JavaScript Library v3.2.1
	 * https://jquery.com/
	 *
	 * Includes Sizzle.js
	 * https://sizzlejs.com/
	 *
	 * Copyright JS Foundation and other contributors
	 * Released under the MIT license
	 * https://jquery.org/license
	 *
	 * Date: 2017-03-20T18:59Z
	 */
!function(t,i){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(t)}("undefined"!=typeof window?window:this,function(i,s){"use strict";function o(e,t){t=t||oe;var i=t.createElement("script");i.text=e,t.head.appendChild(i).parentNode.removeChild(i)}function a(e){var t=!!e&&"length"in e&&e.length,i=we.type(e);return"function"!==i&&!we.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function l(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function d(e,t,i){return we.isFunction(t)?we.grep(e,function(e,n){return!!t.call(e,n,e)!==i}):t.nodeType?we.grep(e,function(e){return e===t!==i}):"string"!=typeof t?we.grep(e,function(e){return ce.call(t,e)>-1!==i}):Re.test(t)?we.filter(t,e,i):(t=we.filter(t,e),we.grep(e,function(e){return ce.call(t,e)>-1!==i&&1===e.nodeType}))}function u(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function c(e){var t={};return we.each(e.match(Ae)||[],function(e,i){t[i]=!0}),t}function h(e){return e}function p(e){throw e}function f(e,t,i,n){var r;try{e&&we.isFunction(r=e.promise)?r.call(e).done(t).fail(i):e&&we.isFunction(r=e.then)?r.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}function g(){oe.removeEventListener("DOMContentLoaded",g),i.removeEventListener("load",g),we.ready()}function m(){this.expando=we.expando+m.uid++}function v(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Be.test(e)?JSON.parse(e):e)}function y(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(qe,"-$&").toLowerCase(),i=e.getAttribute(n),"string"==typeof i){try{i=v(i)}catch(e){}Pe.set(e,t,i)}else i=void 0;return i}function w(e,t,i,n){var r,s=1,o=20,a=n?function(){return n.cur()}:function(){return we.css(e,t,"")},l=a(),d=i&&i[3]||(we.cssNumber[t]?"":"px"),u=(we.cssNumber[t]||"px"!==d&&+l)&&Ye.exec(we.css(e,t));if(u&&u[3]!==d){d=d||u[3],i=i||[],u=+l||1;do s=s||".5",u/=s,we.style(e,t,u+d);while(s!==(s=a()/l)&&1!==s&&--o)}return i&&(u=+u||+l||0,r=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=d,n.start=u,n.end=r)),r}function b(e){var t,i=e.ownerDocument,n=e.nodeName,r=Ke[n];return r?r:(t=i.body.appendChild(i.createElement(n)),r=we.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),Ke[n]=r,r)}function x(e,t){for(var i,n,r=[],s=0,o=e.length;s<o;s++)n=e[s],n.style&&(i=n.style.display,t?("none"===i&&(r[s]=He.get(n,"display")||null,r[s]||(n.style.display="")),""===n.style.display&&We(n)&&(r[s]=b(n))):"none"!==i&&(r[s]="none",He.set(n,"display",i)));for(s=0;s<o;s++)null!=r[s]&&(e[s].style.display=r[s]);return e}function _(e,t){var i;return i="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&l(e,t)?we.merge([e],i):i}function $(e,t){for(var i=0,n=e.length;i<n;i++)He.set(e[i],"globalEval",!t||He.get(t[i],"globalEval"))}function k(e,t,i,n,r){for(var s,o,a,l,d,u,c=t.createDocumentFragment(),h=[],p=0,f=e.length;p<f;p++)if(s=e[p],s||0===s)if("object"===we.type(s))we.merge(h,s.nodeType?[s]:s);else if(et.test(s)){for(o=o||c.appendChild(t.createElement("div")),a=(Je.exec(s)||["",""])[1].toLowerCase(),l=Ze[a]||Ze._default,o.innerHTML=l[1]+we.htmlPrefilter(s)+l[2],u=l[0];u--;)o=o.lastChild;we.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(t.createTextNode(s));for(c.textContent="",p=0;s=h[p++];)if(n&&we.inArray(s,n)>-1)r&&r.push(s);else if(d=we.contains(s.ownerDocument,s),o=_(c.appendChild(s),"script"),d&&$(o),i)for(u=0;s=o[u++];)Qe.test(s.type||"")&&i.push(s);return c}function C(){return!0}function T(){return!1}function S(){try{return oe.activeElement}catch(e){}}function D(e,t,i,n,r,s){var o,a;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=void 0);for(a in t)D(e,a,i,n,t[a],s);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),r===!1)r=T;else if(!r)return e;return 1===s&&(o=r,r=function(e){return we().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=we.guid++)),e.each(function(){we.event.add(this,t,r,n,i)})}function R(e,t){return l(e,"table")&&l(11!==t.nodeType?t:t.firstChild,"tr")?we(">tbody",e)[0]||e:e}function z(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function j(e){var t=lt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function E(e,t){var i,n,r,s,o,a,l,d;if(1===t.nodeType){if(He.hasData(e)&&(s=He.access(e),o=He.set(t,s),d=s.events)){delete o.handle,o.events={};for(r in d)for(i=0,n=d[r].length;i<n;i++)we.event.add(t,r,d[r][i])}Pe.hasData(e)&&(a=Pe.access(e),l=we.extend({},a),Pe.set(t,l))}}function O(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Ue.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function I(e,t,i,n){t=de.apply([],t);var r,s,a,l,d,u,c=0,h=e.length,p=h-1,f=t[0],g=we.isFunction(f);if(g||h>1&&"string"==typeof f&&!ve.checkClone&&at.test(f))return e.each(function(r){var s=e.eq(r);g&&(t[0]=f.call(this,r,s.html())),I(s,t,i,n)});if(h&&(r=k(t,e[0].ownerDocument,!1,e,n),s=r.firstChild,1===r.childNodes.length&&(r=s),s||n)){for(a=we.map(_(r,"script"),z),l=a.length;c<h;c++)d=r,c!==p&&(d=we.clone(d,!0,!0),l&&we.merge(a,_(d,"script"))),i.call(e[c],d,c);if(l)for(u=a[a.length-1].ownerDocument,we.map(a,j),c=0;c<l;c++)d=a[c],Qe.test(d.type||"")&&!He.access(d,"globalEval")&&we.contains(u,d)&&(d.src?we._evalUrl&&we._evalUrl(d.src):o(d.textContent.replace(dt,""),u))}return e}function A(e,t,i){for(var n,r=t?we.filter(t,e):e,s=0;null!=(n=r[s]);s++)i||1!==n.nodeType||we.cleanData(_(n)),n.parentNode&&(i&&we.contains(n.ownerDocument,n)&&$(_(n,"script")),n.parentNode.removeChild(n));return e}function M(e,t,i){var n,r,s,o,a=e.style;return i=i||ht(e),i&&(o=i.getPropertyValue(t)||i[t],""!==o||we.contains(e.ownerDocument,e)||(o=we.style(e,t)),!ve.pixelMarginRight()&&ct.test(o)&&ut.test(t)&&(n=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=r,a.maxWidth=s)),void 0!==o?o+"":o}function N(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function F(e){if(e in yt)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=vt.length;i--;)if(e=vt[i]+t,e in yt)return e}function L(e){var t=we.cssProps[e];return t||(t=we.cssProps[e]=F(e)||e),t}function H(e,t,i){var n=Ye.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function P(e,t,i,n,r){var s,o=0;for(s=i===(n?"border":"content")?4:"width"===t?1:0;s<4;s+=2)"margin"===i&&(o+=we.css(e,i+Xe[s],!0,r)),n?("content"===i&&(o-=we.css(e,"padding"+Xe[s],!0,r)),"margin"!==i&&(o-=we.css(e,"border"+Xe[s]+"Width",!0,r))):(o+=we.css(e,"padding"+Xe[s],!0,r),"padding"!==i&&(o+=we.css(e,"border"+Xe[s]+"Width",!0,r)));return o}function B(e,t,i){var n,r=ht(e),s=M(e,t,r),o="border-box"===we.css(e,"boxSizing",!1,r);return ct.test(s)?s:(n=o&&(ve.boxSizingReliable()||s===e.style[t]),"auto"===s&&(s=e["offset"+t[0].toUpperCase()+t.slice(1)]),s=parseFloat(s)||0,s+P(e,t,i||(o?"border":"content"),n,r)+"px")}function q(e,t,i,n,r){return new q.prototype.init(e,t,i,n,r)}function V(){bt&&(oe.hidden===!1&&i.requestAnimationFrame?i.requestAnimationFrame(V):i.setTimeout(V,we.fx.interval),we.fx.tick())}function Y(){return i.setTimeout(function(){wt=void 0}),wt=we.now()}function X(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)i=Xe[n],r["margin"+i]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function W(e,t,i){for(var n,r=(U.tweeners[t]||[]).concat(U.tweeners["*"]),s=0,o=r.length;s<o;s++)if(n=r[s].call(i,t,e))return n}function G(e,t,i){var n,r,s,o,a,l,d,u,c="width"in t||"height"in t,h=this,p={},f=e.style,g=e.nodeType&&We(e),m=He.get(e,"fxshow");i.queue||(o=we._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,h.always(function(){h.always(function(){o.unqueued--,we.queue(e,"fx").length||o.empty.fire()})}));for(n in t)if(r=t[n],xt.test(r)){if(delete t[n],s=s||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;g=!0}p[n]=m&&m[n]||we.style(e,n)}if(l=!we.isEmptyObject(t),l||!we.isEmptyObject(p)){c&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],d=m&&m.display,null==d&&(d=He.get(e,"display")),u=we.css(e,"display"),"none"===u&&(d?u=d:(x([e],!0),d=e.style.display||d,u=we.css(e,"display"),x([e]))),("inline"===u||"inline-block"===u&&null!=d)&&"none"===we.css(e,"float")&&(l||(h.done(function(){f.display=d}),null==d&&(u=f.display,d="none"===u?"":u)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]})),l=!1;for(n in p)l||(m?"hidden"in m&&(g=m.hidden):m=He.access(e,"fxshow",{display:d}),s&&(m.hidden=!g),g&&x([e],!0),h.done(function(){g||x([e]),He.remove(e,"fxshow");for(n in p)we.style(e,n,p[n])})),l=W(g?m[n]:0,n,h),n in m||(m[n]=l.start,g&&(l.end=l.start,l.start=0))}}function K(e,t){var i,n,r,s,o;for(i in e)if(n=we.camelCase(i),r=t[n],s=e[i],Array.isArray(s)&&(r=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),o=we.cssHooks[n],o&&"expand"in o){s=o.expand(s),delete e[n];for(i in s)i in e||(e[i]=s[i],t[i]=r)}else t[n]=r}function U(e,t,i){var n,r,s=0,o=U.prefilters.length,a=we.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=wt||Y(),i=Math.max(0,d.startTime+d.duration-t),n=i/d.duration||0,s=1-n,o=0,l=d.tweens.length;o<l;o++)d.tweens[o].run(s);return a.notifyWith(e,[d,s,i]),s<1&&l?i:(l||a.notifyWith(e,[d,1,0]),a.resolveWith(e,[d]),!1)},d=a.promise({elem:e,props:we.extend({},t),opts:we.extend(!0,{specialEasing:{},easing:we.easing._default},i),originalProperties:t,originalOptions:i,startTime:wt||Y(),duration:i.duration,tweens:[],createTween:function(t,i){var n=we.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(n),n},stop:function(t){var i=0,n=t?d.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)d.tweens[i].run(1);return t?(a.notifyWith(e,[d,1,0]),a.resolveWith(e,[d,t])):a.rejectWith(e,[d,t]),this}}),u=d.props;for(K(u,d.opts.specialEasing);s<o;s++)if(n=U.prefilters[s].call(d,e,u,d.opts))return we.isFunction(n.stop)&&(we._queueHooks(d.elem,d.opts.queue).stop=we.proxy(n.stop,n)),n;return we.map(u,W,d),we.isFunction(d.opts.start)&&d.opts.start.call(e,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),we.fx.timer(we.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d}function J(e){var t=e.match(Ae)||[];return t.join(" ")}function Q(e){return e.getAttribute&&e.getAttribute("class")||""}function Z(e,t,i,n){var r;if(Array.isArray(t))we.each(t,function(t,r){i||Et.test(e)?n(e,r):Z(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,i,n)});else if(i||"object"!==we.type(t))n(e,t);else for(r in t)Z(e+"["+r+"]",t[r],i,n)}function ee(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,s=t.toLowerCase().match(Ae)||[];if(we.isFunction(i))for(;n=s[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function te(e,t,i,n){function r(a){var l;return s[a]=!0,we.each(e[a]||[],function(e,a){var d=a(t,i,n);return"string"!=typeof d||o||s[d]?o?!(l=d):void 0:(t.dataTypes.unshift(d),r(d),!1)}),l}var s={},o=e===Vt;return r(t.dataTypes[0])||!s["*"]&&r("*")}function ie(e,t){var i,n,r=we.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&we.extend(!0,e,n),e}function ne(e,t,i){for(var n,r,s,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)s=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),i[s]}function re(e,t,i,n){var r,s,o,a,l,d={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)d[o.toLowerCase()]=e.converters[o];for(s=u.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(o=d[l+" "+s]||d["* "+s],!o)for(r in d)if(a=r.split(" "),a[1]===s&&(o=d[l+" "+a[0]]||d["* "+a[0]])){o===!0?o=d[r]:d[r]!==!0&&(s=a[0],u.unshift(a[1]));break}if(o!==!0)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}var se=[],oe=i.document,ae=Object.getPrototypeOf,le=se.slice,de=se.concat,ue=se.push,ce=se.indexOf,he={},pe=he.toString,fe=he.hasOwnProperty,ge=fe.toString,me=ge.call(Object),ve={},ye="3.2.1",we=function(e,t){return new we.fn.init(e,t)},be=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,xe=/^-ms-/,_e=/-([a-z])/g,$e=function(e,t){return t.toUpperCase()};we.fn=we.prototype={jquery:ye,constructor:we,length:0,toArray:function(){return le.call(this)},get:function(e){return null==e?le.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=we.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return we.each(this,e)},map:function(e){return this.pushStack(we.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(le.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:ue,sort:se.sort,splice:se.splice},we.extend=we.fn.extend=function(){var e,t,i,n,r,s,o=arguments[0]||{},a=1,l=arguments.length,d=!1;for("boolean"==typeof o&&(d=o,o=arguments[a]||{},a++),"object"==typeof o||we.isFunction(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)i=o[t],n=e[t],o!==n&&(d&&n&&(we.isPlainObject(n)||(r=Array.isArray(n)))?(r?(r=!1,s=i&&Array.isArray(i)?i:[]):s=i&&we.isPlainObject(i)?i:{},o[t]=we.extend(d,s,n)):void 0!==n&&(o[t]=n));return o},we.extend({expando:"jQuery"+(ye+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===we.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=we.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==pe.call(e))&&(!(t=ae(e))||(i=fe.call(t,"constructor")&&t.constructor,"function"==typeof i&&ge.call(i)===me))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?he[pe.call(e)]||"object":typeof e},globalEval:function(e){o(e)},camelCase:function(e){return e.replace(xe,"ms-").replace(_e,$e)},each:function(e,t){var i,n=0;if(a(e))for(i=e.length;n<i&&t.call(e[n],n,e[n])!==!1;n++);else for(n in e)if(t.call(e[n],n,e[n])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(be,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(a(Object(e))?we.merge(i,"string"==typeof e?[e]:e):ue.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:ce.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n,r=[],s=0,o=e.length,a=!i;s<o;s++)n=!t(e[s],s),n!==a&&r.push(e[s]);return r},map:function(e,t,i){var n,r,s=0,o=[];if(a(e))for(n=e.length;s<n;s++)r=t(e[s],s,i),null!=r&&o.push(r);else for(s in e)r=t(e[s],s,i),null!=r&&o.push(r);return de.apply([],o)},guid:1,proxy:function(e,t){var i,n,r;if("string"==typeof t&&(i=e[t],t=e,e=i),we.isFunction(e))return n=le.call(arguments,2),r=function(){return e.apply(t||this,n.concat(le.call(arguments)))},r.guid=e.guid=e.guid||we.guid++,r},now:Date.now,support:ve}),"function"==typeof Symbol&&(we.fn[Symbol.iterator]=se[Symbol.iterator]),we.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){he["[object "+t+"]"]=t.toLowerCase()});var ke=/*!
	 * Sizzle CSS Selector Engine v2.3.3
	 * https://sizzlejs.com/
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2016-08-08
	 */
function(e){function t(e,t,i,n){var r,s,o,a,l,d,u,h=t&&t.ownerDocument,f=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return i;if(!n&&((t?t.ownerDocument||t:P)!==O&&E(t),t=t||O,A)){if(11!==f&&(l=ve.exec(e)))if(r=l[1]){if(9===f){if(!(o=t.getElementById(r)))return i;if(o.id===r)return i.push(o),i}else if(h&&(o=h.getElementById(r))&&L(t,o)&&o.id===r)return i.push(o),i}else{if(l[2])return Q.apply(i,t.getElementsByTagName(e)),i;if((r=l[3])&&_.getElementsByClassName&&t.getElementsByClassName)return Q.apply(i,t.getElementsByClassName(r)),i}if(_.qsa&&!X[e+" "]&&(!M||!M.test(e))){if(1!==f)h=t,u=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(xe,_e):t.setAttribute("id",a=H),d=T(e),s=d.length;s--;)d[s]="#"+a+" "+p(d[s]);u=d.join(","),h=ye.test(e)&&c(t.parentNode)||t}if(u)try{return Q.apply(i,h.querySelectorAll(u)),i}catch(e){}finally{a===H&&t.removeAttribute("id")}}}return D(e.replace(ae,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>$.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[H]=!0,e}function r(e){var t=O.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var i=e.split("|"),n=i.length;n--;)$.attrHandle[i[n]]=t}function o(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function a(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function d(e){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ke(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function u(e){return n(function(t){return t=+t,n(function(i,n){for(var r,s=e([],i.length,t),o=s.length;o--;)i[r=s[o]]&&(i[r]=!(n[r]=i[r]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function h(){}function p(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function f(e,t,i){var n=t.dir,r=t.next,s=r||n,o=i&&"parentNode"===s,a=q++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||o)return e(t,i,r);return!1}:function(t,i,l){var d,u,c,h=[B,a];if(l){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||o)if(c=t[H]||(t[H]={}),u=c[t.uniqueID]||(c[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[n]||t;else{if((d=u[s])&&d[0]===B&&d[1]===a)return h[2]=d[2];if(u[s]=h,h[2]=e(t,i,l))return!0}return!1}}function g(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function m(e,i,n){for(var r=0,s=i.length;r<s;r++)t(e,i[r],n);return n}function v(e,t,i,n,r){for(var s,o=[],a=0,l=e.length,d=null!=t;a<l;a++)(s=e[a])&&(i&&!i(s,n,r)||(o.push(s),d&&t.push(a)));return o}function y(e,t,i,r,s,o){return r&&!r[H]&&(r=y(r)),s&&!s[H]&&(s=y(s,o)),n(function(n,o,a,l){var d,u,c,h=[],p=[],f=o.length,g=n||m(t||"*",a.nodeType?[a]:a,[]),y=!e||!n&&t?g:v(g,h,e,a,l),w=i?s||(n?e:f||r)?[]:o:y;if(i&&i(y,w,a,l),r)for(d=v(w,p),r(d,[],a,l),u=d.length;u--;)(c=d[u])&&(w[p[u]]=!(y[p[u]]=c));if(n){if(s||e){if(s){for(d=[],u=w.length;u--;)(c=w[u])&&d.push(y[u]=c);s(null,w=[],d,l)}for(u=w.length;u--;)(c=w[u])&&(d=s?ee(n,c):h[u])>-1&&(n[d]=!(o[d]=c))}}else w=v(w===o?w.splice(f,w.length):w),s?s(null,o,w,l):Q.apply(o,w)})}function w(e){for(var t,i,n,r=e.length,s=$.relative[e[0].type],o=s||$.relative[" "],a=s?1:0,l=f(function(e){return e===t},o,!0),d=f(function(e){return ee(t,e)>-1},o,!0),u=[function(e,i,n){var r=!s&&(n||i!==R)||((t=i).nodeType?l(e,i,n):d(e,i,n));return t=null,r}];a<r;a++)if(i=$.relative[e[a].type])u=[f(g(u),i)];else{if(i=$.filter[e[a].type].apply(null,e[a].matches),i[H]){for(n=++a;n<r&&!$.relative[e[n].type];n++);return y(a>1&&g(u),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),i,a<n&&w(e.slice(a,n)),n<r&&w(e=e.slice(n)),n<r&&p(e))}u.push(i)}return g(u)}function b(e,i){var r=i.length>0,s=e.length>0,o=function(n,o,a,l,d){var u,c,h,p=0,f="0",g=n&&[],m=[],y=R,w=n||s&&$.find.TAG("*",d),b=B+=null==y?1:Math.random()||.1,x=w.length;for(d&&(R=o===O||o||d);f!==x&&null!=(u=w[f]);f++){if(s&&u){for(c=0,o||u.ownerDocument===O||(E(u),a=!A);h=e[c++];)if(h(u,o||O,a)){l.push(u);break}d&&(B=b)}r&&((u=!h&&u)&&p--,n&&g.push(u))}if(p+=f,r&&f!==p){for(c=0;h=i[c++];)h(g,m,o,a);if(n){if(p>0)for(;f--;)g[f]||m[f]||(m[f]=U.call(l));m=v(m)}Q.apply(l,m),d&&!n&&m.length>0&&p+i.length>1&&t.uniqueSort(l)}return d&&(B=b,R=y),g};return r?n(o):o}var x,_,$,k,C,T,S,D,R,z,j,E,O,I,A,M,N,F,L,H="sizzle"+1*new Date,P=e.document,B=0,q=0,V=i(),Y=i(),X=i(),W=function(e,t){return e===t&&(j=!0),0},G={}.hasOwnProperty,K=[],U=K.pop,J=K.push,Q=K.push,Z=K.slice,ee=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",re="\\["+ie+"*("+ne+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ne+"))|)"+ie+"*\\]",se=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",oe=new RegExp(ie+"+","g"),ae=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),de=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),ue=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),ce=new RegExp(se),he=new RegExp("^"+ne+"$"),pe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,we=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),be=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},xe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,_e=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},$e=function(){E()},ke=f(function(e){return e.disabled===!0&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Q.apply(K=Z.call(P.childNodes),P.childNodes),K[P.childNodes.length].nodeType}catch(e){Q={apply:K.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}_=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},E=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:P;return n!==O&&9===n.nodeType&&n.documentElement?(O=n,I=O.documentElement,A=!C(O),P!==O&&(i=O.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",$e,!1):i.attachEvent&&i.attachEvent("onunload",$e)),_.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=r(function(e){return e.appendChild(O.createComment("")),!e.getElementsByTagName("*").length}),_.getElementsByClassName=me.test(O.getElementsByClassName),_.getById=r(function(e){return I.appendChild(e).id=H,!O.getElementsByName||!O.getElementsByName(H).length}),_.getById?($.filter.ID=function(e){var t=e.replace(we,be);return function(e){return e.getAttribute("id")===t}},$.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&A){var i=t.getElementById(e);return i?[i]:[]}}):($.filter.ID=function(e){var t=e.replace(we,be);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},$.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&A){var i,n,r,s=t.getElementById(e);if(s){if(i=s.getAttributeNode("id"),i&&i.value===e)return[s];for(r=t.getElementsByName(e),n=0;s=r[n++];)if(i=s.getAttributeNode("id"),i&&i.value===e)return[s]}return[]}}),$.find.TAG=_.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):_.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[r++];)1===i.nodeType&&n.push(i);return n}return s},$.find.CLASS=_.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&A)return t.getElementsByClassName(e)},N=[],M=[],(_.qsa=me.test(O.querySelectorAll))&&(r(function(e){I.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+ie+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+H+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||M.push(".#.+[+~]")}),r(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=O.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+ie+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&M.push(":enabled",":disabled"),I.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(_.matchesSelector=me.test(F=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&r(function(e){_.disconnectedMatch=F.call(e,"*"),F.call(e,"[s!='']:x"),N.push("!=",se)}),M=M.length&&new RegExp(M.join("|")),N=N.length&&new RegExp(N.join("|")),t=me.test(I.compareDocumentPosition),L=t||me.test(I.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return j=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!_.sortDetached&&t.compareDocumentPosition(e)===i?e===O||e.ownerDocument===P&&L(P,e)?-1:t===O||t.ownerDocument===P&&L(P,t)?1:z?ee(z,e)-ee(z,t):0:4&i?-1:1)}:function(e,t){if(e===t)return j=!0,0;var i,n=0,r=e.parentNode,s=t.parentNode,a=[e],l=[t];if(!r||!s)return e===O?-1:t===O?1:r?-1:s?1:z?ee(z,e)-ee(z,t):0;if(r===s)return o(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;a[n]===l[n];)n++;return n?o(a[n],l[n]):a[n]===P?-1:l[n]===P?1:0},O):O},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==O&&E(e),i=i.replace(ue,"='$1']"),_.matchesSelector&&A&&!X[i+" "]&&(!N||!N.test(i))&&(!M||!M.test(i)))try{var n=F.call(e,i);if(n||_.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return t(i,O,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==O&&E(e),L(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==O&&E(e);var i=$.attrHandle[t.toLowerCase()],n=i&&G.call($.attrHandle,t.toLowerCase())?i(e,t,!A):void 0;return void 0!==n?n:_.attributes||!A?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.escape=function(e){return(e+"").replace(xe,_e)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,r=0;if(j=!_.detectDuplicates,z=!_.sortStable&&e.slice(0),e.sort(W),j){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return z=null,e},k=t.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=k(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=k(t);return i},$=t.selectors={cacheLength:50,createPseudo:n,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,be),e[3]=(e[3]||e[4]||e[5]||"").replace(we,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ce.test(i)&&(t=T(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&V(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(r){var s=t.attr(r,e);return null==s?"!="===i:!i||(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s.replace(oe," ")+" ").indexOf(n)>-1:"|="===i&&(s===n||s.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,i,n,r){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var d,u,c,h,p,f,g=s!==o?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a,w=!1;if(m){if(s){for(;g;){for(h=t;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&y){for(h=m,c=h[H]||(h[H]={}),u=c[h.uniqueID]||(c[h.uniqueID]={}),d=u[e]||[],p=d[0]===B&&d[1],w=p&&d[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(w=p=0)||f.pop();)if(1===h.nodeType&&++w&&h===t){u[e]=[B,p,w];break}}else if(y&&(h=t,c=h[H]||(h[H]={}),u=c[h.uniqueID]||(c[h.uniqueID]={}),d=u[e]||[],p=d[0]===B&&d[1],w=p),w===!1)for(;(h=++p&&h&&h[g]||(w=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++w||(y&&(c=h[H]||(h[H]={}),u=c[h.uniqueID]||(c[h.uniqueID]={}),u[e]=[B,w]),h!==t)););return w-=r,w===n||w%n===0&&w/n>=0}}},PSEUDO:function(e,i){var r,s=$.pseudos[e]||$.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[H]?s(i):s.length>1?(r=[e,e,"",i],$.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=s(e,i),o=r.length;o--;)n=ee(e,r[o]),e[n]=!(t[n]=r[o])}):function(e){return s(e,0,r)}):s}},pseudos:{not:n(function(e){var t=[],i=[],r=S(e.replace(ae,"$1"));return r[H]?n(function(e,t,i,n){for(var s,o=r(e,null,n,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,n,s){return t[0]=e,r(t,null,s,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(we,be),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:n(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,be).toLowerCase(),function(t){var i;do if(i=A?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===I},focus:function(e){return e===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:d(!1),disabled:d(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!$.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,i){return[i<0?i+t:i]}),even:u(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:u(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:u(function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e}),gt:u(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}},$.pseudos.nth=$.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})$.pseudos[x]=a(x);for(x in{submit:!0,reset:!0})$.pseudos[x]=l(x);return h.prototype=$.filters=$.pseudos,$.setFilters=new h,T=t.tokenize=function(e,i){var n,r,s,o,a,l,d,u=Y[e+" "];if(u)return i?0:u.slice(0);for(a=e,l=[],d=$.preFilter;a;){n&&!(r=le.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),n=!1,(r=de.exec(a))&&(n=r.shift(),s.push({value:n,type:r[0].replace(ae," ")}),a=a.slice(n.length));for(o in $.filter)!(r=pe[o].exec(a))||d[o]&&!(r=d[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?t.error(e):Y(e,l).slice(0)},S=t.compile=function(e,t){var i,n=[],r=[],s=X[e+" "];if(!s){for(t||(t=T(e)),i=t.length;i--;)s=w(t[i]),s[H]?n.push(s):r.push(s);s=X(e,b(r,n)),s.selector=e}return s},D=t.select=function(e,t,i,n){var r,s,o,a,l,d="function"==typeof e&&e,u=!n&&T(e=d.selector||e);if(i=i||[],1===u.length){if(s=u[0]=u[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&9===t.nodeType&&A&&$.relative[s[1].type]){if(t=($.find.ID(o.matches[0].replace(we,be),t)||[])[0],!t)return i;d&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(r=pe.needsContext.test(e)?0:s.length;r--&&(o=s[r],!$.relative[a=o.type]);)if((l=$.find[a])&&(n=l(o.matches[0].replace(we,be),ye.test(s[0].type)&&c(t.parentNode)||t))){if(s.splice(r,1),e=n.length&&p(s),!e)return Q.apply(i,n),i;break}}return(d||S(e,u))(n,t,!A,i,!t||ye.test(e)&&c(t.parentNode)||t),i},_.sortStable=H.split("").sort(W).join("")===H,_.detectDuplicates=!!j,E(),_.sortDetached=r(function(e){return 1&e.compareDocumentPosition(O.createElement("fieldset"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),_.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||s(te,function(e,t,i){var n;if(!i)return e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(i);we.find=ke,we.expr=ke.selectors,we.expr[":"]=we.expr.pseudos,we.uniqueSort=we.unique=ke.uniqueSort,we.text=ke.getText,we.isXMLDoc=ke.isXML,we.contains=ke.contains,we.escapeSelector=ke.escape;var Ce=function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&we(e).is(i))break;n.push(e)}return n},Te=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},Se=we.expr.match.needsContext,De=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Re=/^.[^:#\[\.,]*$/;we.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?we.find.matchesSelector(n,e)?[n]:[]:we.find.matches(e,we.grep(t,function(e){return 1===e.nodeType}))},we.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(we(e).filter(function(){for(t=0;t<n;t++)if(we.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)we.find(e,r[t],i);return n>1?we.uniqueSort(i):i},filter:function(e){return this.pushStack(d(this,e||[],!1))},not:function(e){return this.pushStack(d(this,e||[],!0))},is:function(e){return!!d(this,"string"==typeof e&&Se.test(e)?we(e):e||[],!1).length}});var ze,je=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ee=we.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||ze,"string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:je.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof we?t[0]:t,we.merge(this,we.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:oe,!0)),De.test(n[1])&&we.isPlainObject(t))for(n in t)we.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=oe.getElementById(n[2]),r&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):we.isFunction(e)?void 0!==i.ready?i.ready(e):e(we):we.makeArray(e,this)};Ee.prototype=we.fn,ze=we(oe);var Oe=/^(?:parents|prev(?:Until|All))/,Ie={children:!0,contents:!0,next:!0,prev:!0};we.fn.extend({has:function(e){var t=we(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(we.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,s=[],o="string"!=typeof e&&we(e);if(!Se.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&we.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(s.length>1?we.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?ce.call(we(e),this[0]):ce.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(we.uniqueSort(we.merge(this.get(),we(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),we.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Ce(e,"parentNode")},parentsUntil:function(e,t,i){return Ce(e,"parentNode",i)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return Ce(e,"nextSibling")},prevAll:function(e){return Ce(e,"previousSibling")},nextUntil:function(e,t,i){return Ce(e,"nextSibling",i)},prevUntil:function(e,t,i){return Ce(e,"previousSibling",i)},siblings:function(e){return Te((e.parentNode||{}).firstChild,e)},children:function(e){return Te(e.firstChild)},contents:function(e){return l(e,"iframe")?e.contentDocument:(l(e,"template")&&(e=e.content||e),we.merge([],e.childNodes))}},function(e,t){we.fn[e]=function(i,n){var r=we.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=we.filter(n,r)),this.length>1&&(Ie[e]||we.uniqueSort(r),Oe.test(e)&&r.reverse()),this.pushStack(r)}});var Ae=/[^\x20\t\r\n\f]+/g;we.Callbacks=function(e){e="string"==typeof e?c(e):we.extend({},e);var t,i,n,r,s=[],o=[],a=-1,l=function(){for(r=r||e.once,n=t=!0;o.length;a=-1)for(i=o.shift();++a<s.length;)s[a].apply(i[0],i[1])===!1&&e.stopOnFalse&&(a=s.length,i=!1);e.memory||(i=!1),t=!1,r&&(s=i?[]:"")},d={add:function(){return s&&(i&&!t&&(a=s.length-1,o.push(i)),function t(i){we.each(i,function(i,n){we.isFunction(n)?e.unique&&d.has(n)||s.push(n):n&&n.length&&"string"!==we.type(n)&&t(n)})}(arguments),i&&!t&&l()),this},remove:function(){return we.each(arguments,function(e,t){for(var i;(i=we.inArray(t,s,i))>-1;)s.splice(i,1),i<=a&&a--}),this},has:function(e){return e?we.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=o=[],s=i="",this},disabled:function(){return!s},lock:function(){return r=o=[],i||t||(s=i=""),this},locked:function(){return!!r},fireWith:function(e,i){return r||(i=i||[],i=[e,i.slice?i.slice():i],o.push(i),t||l()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},we.extend({Deferred:function(e){var t=[["notify","progress",we.Callbacks("memory"),we.Callbacks("memory"),2],["resolve","done",we.Callbacks("once memory"),we.Callbacks("once memory"),0,"resolved"],["reject","fail",we.Callbacks("once memory"),we.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return we.Deferred(function(i){we.each(t,function(t,n){var r=we.isFunction(e[n[4]])&&e[n[4]];s[n[1]](function(){var e=r&&r.apply(this,arguments);e&&we.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(e,n,r){function s(e,t,n,r){return function(){var a=this,l=arguments,d=function(){var i,d;if(!(e<o)){if(i=n.apply(a,l),i===t.promise())throw new TypeError("Thenable self-resolution");d=i&&("object"==typeof i||"function"==typeof i)&&i.then,we.isFunction(d)?r?d.call(i,s(o,t,h,r),s(o,t,p,r)):(o++,d.call(i,s(o,t,h,r),s(o,t,p,r),s(o,t,h,t.notifyWith))):(n!==h&&(a=void 0,l=[i]),(r||t.resolveWith)(a,l))}},u=r?d:function(){try{d()}catch(i){we.Deferred.exceptionHook&&we.Deferred.exceptionHook(i,u.stackTrace),e+1>=o&&(n!==p&&(a=void 0,l=[i]),t.rejectWith(a,l))}};e?u():(we.Deferred.getStackHook&&(u.stackTrace=we.Deferred.getStackHook()),i.setTimeout(u))}}var o=0;return we.Deferred(function(i){t[0][3].add(s(0,i,we.isFunction(r)?r:h,i.notifyWith)),t[1][3].add(s(0,i,we.isFunction(e)?e:h)),t[2][3].add(s(0,i,we.isFunction(n)?n:p))}).promise()},promise:function(e){return null!=e?we.extend(e,r):r}},s={};return we.each(t,function(e,i){var o=i[2],a=i[5];r[i[1]]=o.add,a&&o.add(function(){n=a},t[3-e][2].disable,t[0][2].lock),o.add(i[3].fire),s[i[0]]=function(){return s[i[0]+"With"](this===s?void 0:this,arguments),this},s[i[0]+"With"]=o.fireWith}),r.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,i=t,n=Array(i),r=le.call(arguments),s=we.Deferred(),o=function(e){return function(i){n[e]=this,r[e]=arguments.length>1?le.call(arguments):i,--t||s.resolveWith(n,r)}};if(t<=1&&(f(e,s.done(o(i)).resolve,s.reject,!t),"pending"===s.state()||we.isFunction(r[i]&&r[i].then)))return s.then();for(;i--;)f(r[i],o(i),s.reject);return s.promise()}});var Me=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;we.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&Me.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},we.readyException=function(e){i.setTimeout(function(){throw e})};var Ne=we.Deferred();we.fn.ready=function(e){return Ne.then(e).catch(function(e){we.readyException(e)}),this},we.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--we.readyWait:we.isReady)||(we.isReady=!0,e!==!0&&--we.readyWait>0||Ne.resolveWith(oe,[we]))}}),we.ready.then=Ne.then,"complete"===oe.readyState||"loading"!==oe.readyState&&!oe.documentElement.doScroll?i.setTimeout(we.ready):(oe.addEventListener("DOMContentLoaded",g),i.addEventListener("load",g));var Fe=function(e,t,i,n,r,s,o){var a=0,l=e.length,d=null==i;if("object"===we.type(i)){r=!0;for(a in i)Fe(e,t,a,i[a],!0,s,o)}else if(void 0!==n&&(r=!0,we.isFunction(n)||(o=!0),d&&(o?(t.call(e,n),t=null):(d=t,t=function(e,t,i){return d.call(we(e),i)})),t))for(;a<l;a++)t(e[a],i,o?n:n.call(e[a],a,t(e[a],i)));return r?e:d?t.call(e):l?t(e[0],i):s},Le=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};m.uid=1,m.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Le(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[we.camelCase(t)]=i;else for(n in t)r[we.camelCase(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][we.camelCase(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){Array.isArray(t)?t=t.map(we.camelCase):(t=we.camelCase(t),t=t in n?[t]:t.match(Ae)||[]),i=t.length;for(;i--;)delete n[t[i]]}(void 0===t||we.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!we.isEmptyObject(t)}};var He=new m,Pe=new m,Be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,qe=/[A-Z]/g;we.extend({hasData:function(e){return Pe.hasData(e)||He.hasData(e)},data:function(e,t,i){return Pe.access(e,t,i)},removeData:function(e,t){Pe.remove(e,t)},_data:function(e,t,i){return He.access(e,t,i)},_removeData:function(e,t){He.remove(e,t)}}),we.fn.extend({data:function(e,t){var i,n,r,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(r=Pe.get(s),1===s.nodeType&&!He.get(s,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&(n=o[i].name,0===n.indexOf("data-")&&(n=we.camelCase(n.slice(5)),y(s,n,r[n])));He.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){Pe.set(this,e)}):Fe(this,function(t){var i;if(s&&void 0===t){if(i=Pe.get(s,e),void 0!==i)return i;if(i=y(s,e),void 0!==i)return i}else this.each(function(){Pe.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Pe.remove(this,e)})}}),we.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=He.get(e,t),i&&(!n||Array.isArray(i)?n=He.access(e,t,we.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=we.queue(e,t),n=i.length,r=i.shift(),s=we._queueHooks(e,t),o=function(){we.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete s.stop,r.call(e,o,s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return He.get(e,i)||He.access(e,i,{empty:we.Callbacks("once memory").add(function(){He.remove(e,[t+"queue",i])})})}}),we.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?we.queue(this[0],e):void 0===t?this:this.each(function(){var i=we.queue(this,e,t);we._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&we.dequeue(this,e)})},dequeue:function(e){return this.each(function(){we.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=we.Deferred(),s=this,o=this.length,a=function(){--n||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)i=He.get(s[o],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(t)}});var Ve=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ye=new RegExp("^(?:([+-])=|)("+Ve+")([a-z%]*)$","i"),Xe=["Top","Right","Bottom","Left"],We=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&we.contains(e.ownerDocument,e)&&"none"===we.css(e,"display")},Ge=function(e,t,i,n){var r,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];r=i.apply(e,n||[]);for(s in t)e.style[s]=o[s];return r},Ke={};we.fn.extend({show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){We(this)?we(this).show():we(this).hide()})}});var Ue=/^(?:checkbox|radio)$/i,Je=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Qe=/^$|\/(?:java|ecma)script/i,Ze={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ze.optgroup=Ze.option,Ze.tbody=Ze.tfoot=Ze.colgroup=Ze.caption=Ze.thead,
Ze.th=Ze.td;var et=/<|&#?\w+;/;!function(){var e=oe.createDocumentFragment(),t=e.appendChild(oe.createElement("div")),i=oe.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),ve.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ve.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var tt=oe.documentElement,it=/^key/,nt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rt=/^([^.]*)(?:\.(.+)|)/;we.event={global:{},add:function(e,t,i,n,r){var s,o,a,l,d,u,c,h,p,f,g,m=He.get(e);if(m)for(i.handler&&(s=i,i=s.handler,r=s.selector),r&&we.find.matchesSelector(tt,r),i.guid||(i.guid=we.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(t){return"undefined"!=typeof we&&we.event.triggered!==t.type?we.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Ae)||[""],d=t.length;d--;)a=rt.exec(t[d])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p&&(c=we.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,c=we.event.special[p]||{},u=we.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&we.expr.match.needsContext.test(r),namespace:f.join(".")},s),(h=l[p])||(h=l[p]=[],h.delegateCount=0,c.setup&&c.setup.call(e,n,f,o)!==!1||e.addEventListener&&e.addEventListener(p,o)),c.add&&(c.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),we.event.global[p]=!0)},remove:function(e,t,i,n,r){var s,o,a,l,d,u,c,h,p,f,g,m=He.hasData(e)&&He.get(e);if(m&&(l=m.events)){for(t=(t||"").match(Ae)||[""],d=t.length;d--;)if(a=rt.exec(t[d])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(c=we.event.special[p]||{},p=(n?c.delegateType:c.bindType)||p,h=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;s--;)u=h[s],!r&&g!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(h.splice(s,1),u.selector&&h.delegateCount--,c.remove&&c.remove.call(e,u));o&&!h.length&&(c.teardown&&c.teardown.call(e,f,m.handle)!==!1||we.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)we.event.remove(e,p+t[d],i,n,!0);we.isEmptyObject(l)&&He.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,s,o,a=we.event.fix(e),l=new Array(arguments.length),d=(He.get(this,"events")||{})[a.type]||[],u=we.event.special[a.type]||{};for(l[0]=a,t=1;t<arguments.length;t++)l[t]=arguments[t];if(a.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,a)!==!1){for(o=we.event.handlers.call(this,a,d),t=0;(r=o[t++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,i=0;(s=r.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(s.namespace)||(a.handleObj=s,a.data=s.data,n=((we.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l),void 0!==n&&(a.result=n)===!1&&(a.preventDefault(),a.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,a),a.result}},handlers:function(e,t){var i,n,r,s,o,a=[],l=t.delegateCount,d=e.target;if(l&&d.nodeType&&!("click"===e.type&&e.button>=1))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||d.disabled!==!0)){for(s=[],o={},i=0;i<l;i++)n=t[i],r=n.selector+" ",void 0===o[r]&&(o[r]=n.needsContext?we(r,this).index(d)>-1:we.find(r,this,null,[d]).length),o[r]&&s.push(n);s.length&&a.push({elem:d,handlers:s})}return d=this,l<t.length&&a.push({elem:d,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(we.Event.prototype,e,{enumerable:!0,configurable:!0,get:we.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[we.expando]?e:new we.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==S()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===S()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&l(this,"input"))return this.click(),!1},_default:function(e){return l(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},we.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},we.Event=function(e,t){return this instanceof we.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?C:T,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&we.extend(this,t),this.timeStamp=e&&e.timeStamp||we.now(),void(this[we.expando]=!0)):new we.Event(e,t)},we.Event.prototype={constructor:we.Event,isDefaultPrevented:T,isPropagationStopped:T,isImmediatePropagationStopped:T,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=C,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=C,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=C,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},we.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&it.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&nt.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},we.event.addProp),we.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){we.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,s=e.handleObj;return r&&(r===n||we.contains(n,r))||(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}}),we.fn.extend({on:function(e,t,i,n){return D(this,e,t,i,n)},one:function(e,t,i,n){return D(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,we(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return t!==!1&&"function"!=typeof t||(i=t,t=void 0),i===!1&&(i=T),this.each(function(){we.event.remove(this,e,i,t)})}});var st=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ot=/<script|<style|<link/i,at=/checked\s*(?:[^=]|=\s*.checked.)/i,lt=/^true\/(.*)/,dt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;we.extend({htmlPrefilter:function(e){return e.replace(st,"<$1></$2>")},clone:function(e,t,i){var n,r,s,o,a=e.cloneNode(!0),l=we.contains(e.ownerDocument,e);if(!(ve.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||we.isXMLDoc(e)))for(o=_(a),s=_(e),n=0,r=s.length;n<r;n++)O(s[n],o[n]);if(t)if(i)for(s=s||_(e),o=o||_(a),n=0,r=s.length;n<r;n++)E(s[n],o[n]);else E(e,a);return o=_(a,"script"),o.length>0&&$(o,!l&&_(e,"script")),a},cleanData:function(e){for(var t,i,n,r=we.event.special,s=0;void 0!==(i=e[s]);s++)if(Le(i)){if(t=i[He.expando]){if(t.events)for(n in t.events)r[n]?we.event.remove(i,n):we.removeEvent(i,n,t.handle);i[He.expando]=void 0}i[Pe.expando]&&(i[Pe.expando]=void 0)}}}),we.fn.extend({detach:function(e){return A(this,e,!0)},remove:function(e){return A(this,e)},text:function(e){return Fe(this,function(e){return void 0===e?we.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return I(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=R(this,e);t.appendChild(e)}})},prepend:function(){return I(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=R(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return I(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return I(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(we.cleanData(_(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return we.clone(this,e,t)})},html:function(e){return Fe(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ot.test(e)&&!Ze[(Je.exec(e)||["",""])[1].toLowerCase()]){e=we.htmlPrefilter(e);try{for(;i<n;i++)t=this[i]||{},1===t.nodeType&&(we.cleanData(_(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return I(this,arguments,function(t){var i=this.parentNode;we.inArray(this,e)<0&&(we.cleanData(_(this)),i&&i.replaceChild(t,this))},e)}}),we.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){we.fn[e]=function(e){for(var i,n=[],r=we(e),s=r.length-1,o=0;o<=s;o++)i=o===s?this:this.clone(!0),we(r[o])[t](i),ue.apply(n,i.get());return this.pushStack(n)}});var ut=/^margin/,ct=new RegExp("^("+Ve+")(?!px)[a-z%]+$","i"),ht=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)};!function(){function e(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",tt.appendChild(o);var e=i.getComputedStyle(a);t="1%"!==e.top,s="2px"===e.marginLeft,n="4px"===e.width,a.style.marginRight="50%",r="4px"===e.marginRight,tt.removeChild(o),a=null}}var t,n,r,s,o=oe.createElement("div"),a=oe.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",ve.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),we.extend(ve,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return e(),n},pixelMarginRight:function(){return e(),r},reliableMarginLeft:function(){return e(),s}}))}();var pt=/^(none|table(?!-c[ea]).+)/,ft=/^--/,gt={position:"absolute",visibility:"hidden",display:"block"},mt={letterSpacing:"0",fontWeight:"400"},vt=["Webkit","Moz","ms"],yt=oe.createElement("div").style;we.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=M(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,o,a=we.camelCase(t),l=ft.test(t),d=e.style;return l||(t=L(a)),o=we.cssHooks[t]||we.cssHooks[a],void 0===i?o&&"get"in o&&void 0!==(r=o.get(e,!1,n))?r:d[t]:(s=typeof i,"string"===s&&(r=Ye.exec(i))&&r[1]&&(i=w(e,t,r),s="number"),null!=i&&i===i&&("number"===s&&(i+=r&&r[3]||(we.cssNumber[a]?"":"px")),ve.clearCloneStyle||""!==i||0!==t.indexOf("background")||(d[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,n))||(l?d.setProperty(t,i):d[t]=i)),void 0)}},css:function(e,t,i,n){var r,s,o,a=we.camelCase(t),l=ft.test(t);return l||(t=L(a)),o=we.cssHooks[t]||we.cssHooks[a],o&&"get"in o&&(r=o.get(e,!0,i)),void 0===r&&(r=M(e,t,n)),"normal"===r&&t in mt&&(r=mt[t]),""===i||i?(s=parseFloat(r),i===!0||isFinite(s)?s||0:r):r}}),we.each(["height","width"],function(e,t){we.cssHooks[t]={get:function(e,i,n){if(i)return!pt.test(we.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?B(e,t,n):Ge(e,gt,function(){return B(e,t,n)})},set:function(e,i,n){var r,s=n&&ht(e),o=n&&P(e,t,n,"border-box"===we.css(e,"boxSizing",!1,s),s);return o&&(r=Ye.exec(i))&&"px"!==(r[3]||"px")&&(e.style[t]=i,i=we.css(e,t)),H(e,i,o)}}}),we.cssHooks.marginLeft=N(ve.reliableMarginLeft,function(e,t){if(t)return(parseFloat(M(e,"marginLeft"))||e.getBoundingClientRect().left-Ge(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),we.each({margin:"",padding:"",border:"Width"},function(e,t){we.cssHooks[e+t]={expand:function(i){for(var n=0,r={},s="string"==typeof i?i.split(" "):[i];n<4;n++)r[e+Xe[n]+t]=s[n]||s[n-2]||s[0];return r}},ut.test(e)||(we.cssHooks[e+t].set=H)}),we.fn.extend({css:function(e,t){return Fe(this,function(e,t,i){var n,r,s={},o=0;if(Array.isArray(t)){for(n=ht(e),r=t.length;o<r;o++)s[t[o]]=we.css(e,t[o],!1,n);return s}return void 0!==i?we.style(e,t,i):we.css(e,t)},e,t,arguments.length>1)}}),we.Tween=q,q.prototype={constructor:q,init:function(e,t,i,n,r,s){this.elem=e,this.prop=i,this.easing=r||we.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(we.cssNumber[i]?"":"px")},cur:function(){var e=q.propHooks[this.prop];return e&&e.get?e.get(this):q.propHooks._default.get(this)},run:function(e){var t,i=q.propHooks[this.prop];return this.options.duration?this.pos=t=we.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):q.propHooks._default.set(this),this}},q.prototype.init.prototype=q.prototype,q.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=we.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){we.fx.step[e.prop]?we.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[we.cssProps[e.prop]]&&!we.cssHooks[e.prop]?e.elem[e.prop]=e.now:we.style(e.elem,e.prop,e.now+e.unit)}}},q.propHooks.scrollTop=q.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},we.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},we.fx=q.prototype.init,we.fx.step={};var wt,bt,xt=/^(?:toggle|show|hide)$/,_t=/queueHooks$/;we.Animation=we.extend(U,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return w(i.elem,e,Ye.exec(t),i),i}]},tweener:function(e,t){we.isFunction(e)?(t=e,e=["*"]):e=e.match(Ae);for(var i,n=0,r=e.length;n<r;n++)i=e[n],U.tweeners[i]=U.tweeners[i]||[],U.tweeners[i].unshift(t)},prefilters:[G],prefilter:function(e,t){t?U.prefilters.unshift(e):U.prefilters.push(e)}}),we.speed=function(e,t,i){var n=e&&"object"==typeof e?we.extend({},e):{complete:i||!i&&t||we.isFunction(e)&&e,duration:e,easing:i&&t||t&&!we.isFunction(t)&&t};return we.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in we.fx.speeds?n.duration=we.fx.speeds[n.duration]:n.duration=we.fx.speeds._default),null!=n.queue&&n.queue!==!0||(n.queue="fx"),n.old=n.complete,n.complete=function(){we.isFunction(n.old)&&n.old.call(this),n.queue&&we.dequeue(this,n.queue)},n},we.fn.extend({fadeTo:function(e,t,i,n){return this.filter(We).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=we.isEmptyObject(e),s=we.speed(t,i,n),o=function(){var t=U(this,we.extend({},e),s);(r||He.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",s=we.timers,o=He.get(this);if(r)o[r]&&o[r].stop&&n(o[r]);else for(r in o)o[r]&&o[r].stop&&_t.test(r)&&n(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=e&&s[r].queue!==e||(s[r].anim.stop(i),t=!1,s.splice(r,1));!t&&i||we.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=He.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],s=we.timers,o=n?n.length:0;for(i.finish=!0,we.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),we.each(["toggle","show","hide"],function(e,t){var i=we.fn[t];we.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(X(t,!0),e,n,r)}}),we.each({slideDown:X("show"),slideUp:X("hide"),slideToggle:X("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){we.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),we.timers=[],we.fx.tick=function(){var e,t=0,i=we.timers;for(wt=we.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||we.fx.stop(),wt=void 0},we.fx.timer=function(e){we.timers.push(e),we.fx.start()},we.fx.interval=13,we.fx.start=function(){bt||(bt=!0,V())},we.fx.stop=function(){bt=null},we.fx.speeds={slow:600,fast:200,_default:400},we.fn.delay=function(e,t){return e=we.fx?we.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(r)}})},function(){var e=oe.createElement("input"),t=oe.createElement("select"),i=t.appendChild(oe.createElement("option"));e.type="checkbox",ve.checkOn=""!==e.value,ve.optSelected=i.selected,e=oe.createElement("input"),e.value="t",e.type="radio",ve.radioValue="t"===e.value}();var $t,kt=we.expr.attrHandle;we.fn.extend({attr:function(e,t){return Fe(this,we.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){we.removeAttr(this,e)})}}),we.extend({attr:function(e,t,i){var n,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return"undefined"==typeof e.getAttribute?we.prop(e,t,i):(1===s&&we.isXMLDoc(e)||(r=we.attrHooks[t.toLowerCase()]||(we.expr.match.bool.test(t)?$t:void 0)),void 0!==i?null===i?void we.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:(n=we.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!ve.radioValue&&"radio"===t&&l(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(Ae);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),$t={set:function(e,t,i){return t===!1?we.removeAttr(e,i):e.setAttribute(i,i),i}},we.each(we.expr.match.bool.source.match(/\w+/g),function(e,t){var i=kt[t]||we.find.attr;kt[t]=function(e,t,n){var r,s,o=t.toLowerCase();return n||(s=kt[o],kt[o]=r,r=null!=i(e,t,n)?o:null,kt[o]=s),r}});var Ct=/^(?:input|select|textarea|button)$/i,Tt=/^(?:a|area)$/i;we.fn.extend({prop:function(e,t){return Fe(this,we.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[we.propFix[e]||e]})}}),we.extend({prop:function(e,t,i){var n,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&we.isXMLDoc(e)||(t=we.propFix[t]||t,r=we.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=we.find.attr(e,"tabindex");return t?parseInt(t,10):Ct.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ve.optSelected||(we.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),we.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){we.propFix[this.toLowerCase()]=this}),we.fn.extend({addClass:function(e){var t,i,n,r,s,o,a,l=0;if(we.isFunction(e))return this.each(function(t){we(this).addClass(e.call(this,t,Q(this)))});if("string"==typeof e&&e)for(t=e.match(Ae)||[];i=this[l++];)if(r=Q(i),n=1===i.nodeType&&" "+J(r)+" "){for(o=0;s=t[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");a=J(n),r!==a&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,r,s,o,a,l=0;if(we.isFunction(e))return this.each(function(t){we(this).removeClass(e.call(this,t,Q(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ae)||[];i=this[l++];)if(r=Q(i),n=1===i.nodeType&&" "+J(r)+" "){for(o=0;s=t[o++];)for(;n.indexOf(" "+s+" ")>-1;)n=n.replace(" "+s+" "," ");a=J(n),r!==a&&i.setAttribute("class",a)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):we.isFunction(e)?this.each(function(i){we(this).toggleClass(e.call(this,i,Q(this),t),t)}):this.each(function(){var t,n,r,s;if("string"===i)for(n=0,r=we(this),s=e.match(Ae)||[];t=s[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==i||(t=Q(this),t&&He.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":He.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+J(Q(i))+" ").indexOf(t)>-1)return!0;return!1}});var St=/\r/g;we.fn.extend({val:function(e){var t,i,n,r=this[0];{if(arguments.length)return n=we.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=n?e.call(this,i,we(this).val()):e,null==r?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=we.map(r,function(e){return null==e?"":e+""})),t=we.valHooks[this.type]||we.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=we.valHooks[r.type]||we.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(St,""):null==i?"":i)}}}),we.extend({valHooks:{option:{get:function(e){var t=we.find.attr(e,"value");return null!=t?t:J(we.text(e))}},select:{get:function(e){var t,i,n,r=e.options,s=e.selectedIndex,o="select-one"===e.type,a=o?null:[],d=o?s+1:r.length;for(n=s<0?d:o?s:0;n<d;n++)if(i=r[n],(i.selected||n===s)&&!i.disabled&&(!i.parentNode.disabled||!l(i.parentNode,"optgroup"))){if(t=we(i).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var i,n,r=e.options,s=we.makeArray(t),o=r.length;o--;)n=r[o],(n.selected=we.inArray(we.valHooks.option.get(n),s)>-1)&&(i=!0);return i||(e.selectedIndex=-1),s}}}}),we.each(["radio","checkbox"],function(){we.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=we.inArray(we(e).val(),t)>-1}},ve.checkOn||(we.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Dt=/^(?:focusinfocus|focusoutblur)$/;we.extend(we.event,{trigger:function(e,t,n,r){var s,o,a,l,d,u,c,h=[n||oe],p=fe.call(e,"type")?e.type:e,f=fe.call(e,"namespace")?e.namespace.split("."):[];if(o=a=n=n||oe,3!==n.nodeType&&8!==n.nodeType&&!Dt.test(p+we.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),d=p.indexOf(":")<0&&"on"+p,e=e[we.expando]?e:new we.Event(p,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:we.makeArray(t,[e]),c=we.event.special[p]||{},r||!c.trigger||c.trigger.apply(n,t)!==!1)){if(!r&&!c.noBubble&&!we.isWindow(n)){for(l=c.delegateType||p,Dt.test(l+p)||(o=o.parentNode);o;o=o.parentNode)h.push(o),a=o;a===(n.ownerDocument||oe)&&h.push(a.defaultView||a.parentWindow||i)}for(s=0;(o=h[s++])&&!e.isPropagationStopped();)e.type=s>1?l:c.bindType||p,u=(He.get(o,"events")||{})[e.type]&&He.get(o,"handle"),u&&u.apply(o,t),u=d&&o[d],u&&u.apply&&Le(o)&&(e.result=u.apply(o,t),e.result===!1&&e.preventDefault());return e.type=p,r||e.isDefaultPrevented()||c._default&&c._default.apply(h.pop(),t)!==!1||!Le(n)||d&&we.isFunction(n[p])&&!we.isWindow(n)&&(a=n[d],a&&(n[d]=null),we.event.triggered=p,n[p](),we.event.triggered=void 0,a&&(n[d]=a)),e.result}},simulate:function(e,t,i){var n=we.extend(new we.Event,i,{type:e,isSimulated:!0});we.event.trigger(n,null,t)}}),we.fn.extend({trigger:function(e,t){return this.each(function(){we.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return we.event.trigger(e,t,i,!0)}}),we.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){we.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),we.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ve.focusin="onfocusin"in i,ve.focusin||we.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){we.event.simulate(t,e.target,we.event.fix(e))};we.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=He.access(n,t);r||n.addEventListener(e,i,!0),He.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=He.access(n,t)-1;r?He.access(n,t,r):(n.removeEventListener(e,i,!0),He.remove(n,t))}}});var Rt=i.location,zt=we.now(),jt=/\?/;we.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||we.error("Invalid XML: "+e),t};var Et=/\[\]$/,Ot=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;we.param=function(e,t){var i,n=[],r=function(e,t){var i=we.isFunction(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(e)||e.jquery&&!we.isPlainObject(e))we.each(e,function(){r(this.name,this.value)});else for(i in e)Z(i,e[i],t,r);return n.join("&")},we.fn.extend({serialize:function(){return we.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=we.prop(this,"elements");return e?we.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!we(this).is(":disabled")&&At.test(this.nodeName)&&!It.test(e)&&(this.checked||!Ue.test(e))}).map(function(e,t){var i=we(this).val();return null==i?null:Array.isArray(i)?we.map(i,function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:i.replace(Ot,"\r\n")}}).get()}});var Mt=/%20/g,Nt=/#.*$/,Ft=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ht=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Pt=/^(?:GET|HEAD)$/,Bt=/^\/\//,qt={},Vt={},Yt="*/".concat("*"),Xt=oe.createElement("a");Xt.href=Rt.href,we.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rt.href,type:"GET",isLocal:Ht.test(Rt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Yt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":we.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ie(ie(e,we.ajaxSettings),t):ie(we.ajaxSettings,e)},ajaxPrefilter:ee(qt),ajaxTransport:ee(Vt),ajax:function(e,t){function n(e,t,n,a){var d,h,p,b,x,_=t;u||(u=!0,l&&i.clearTimeout(l),r=void 0,o=a||"",$.readyState=e>0?4:0,d=e>=200&&e<300||304===e,n&&(b=ne(f,$,n)),b=re(f,b,$,d),d?(f.ifModified&&(x=$.getResponseHeader("Last-Modified"),x&&(we.lastModified[s]=x),x=$.getResponseHeader("etag"),x&&(we.etag[s]=x)),204===e||"HEAD"===f.type?_="nocontent":304===e?_="notmodified":(_=b.state,h=b.data,p=b.error,d=!p)):(p=_,!e&&_||(_="error",e<0&&(e=0))),$.status=e,$.statusText=(t||_)+"",d?v.resolveWith(g,[h,_,$]):v.rejectWith(g,[$,_,p]),$.statusCode(w),w=void 0,c&&m.trigger(d?"ajaxSuccess":"ajaxError",[$,f,d?h:p]),y.fireWith(g,[$,_]),c&&(m.trigger("ajaxComplete",[$,f]),--we.active||we.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,s,o,a,l,d,u,c,h,p,f=we.ajaxSetup({},t),g=f.context||f,m=f.context&&(g.nodeType||g.jquery)?we(g):we.event,v=we.Deferred(),y=we.Callbacks("once memory"),w=f.statusCode||{},b={},x={},_="canceled",$={readyState:0,getResponseHeader:function(e){var t;if(u){if(!a)for(a={};t=Lt.exec(o);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==u&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)$.always(e[$.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||_;return r&&r.abort(t),n(0,t),this}};if(v.promise($),f.url=((e||f.url||Rt.href)+"").replace(Bt,Rt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(Ae)||[""],null==f.crossDomain){d=oe.createElement("a");try{d.href=f.url,d.href=d.href,f.crossDomain=Xt.protocol+"//"+Xt.host!=d.protocol+"//"+d.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=we.param(f.data,f.traditional)),te(qt,f,t,$),u)return $;c=we.event&&f.global,c&&0===we.active++&&we.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Pt.test(f.type),s=f.url.replace(Nt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Mt,"+")):(p=f.url.slice(s.length),f.data&&(s+=(jt.test(s)?"&":"?")+f.data,delete f.data),f.cache===!1&&(s=s.replace(Ft,"$1"),p=(jt.test(s)?"&":"?")+"_="+zt++ +p),f.url=s+p),f.ifModified&&(we.lastModified[s]&&$.setRequestHeader("If-Modified-Since",we.lastModified[s]),we.etag[s]&&$.setRequestHeader("If-None-Match",we.etag[s])),(f.data&&f.hasContent&&f.contentType!==!1||t.contentType)&&$.setRequestHeader("Content-Type",f.contentType),$.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Yt+"; q=0.01":""):f.accepts["*"]);for(h in f.headers)$.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(f.beforeSend.call(g,$,f)===!1||u))return $.abort();if(_="abort",y.add(f.complete),$.done(f.success),$.fail(f.error),r=te(Vt,f,t,$)){if($.readyState=1,c&&m.trigger("ajaxSend",[$,f]),u)return $;f.async&&f.timeout>0&&(l=i.setTimeout(function(){$.abort("timeout")},f.timeout));try{u=!1,r.send(b,n)}catch(e){if(u)throw e;n(-1,e)}}else n(-1,"No Transport");return $},getJSON:function(e,t,i){return we.get(e,t,i,"json")},getScript:function(e,t){return we.get(e,void 0,t,"script")}}),we.each(["get","post"],function(e,t){we[t]=function(e,i,n,r){return we.isFunction(i)&&(r=r||n,n=i,i=void 0),we.ajax(we.extend({url:e,type:t,dataType:r,data:i,success:n},we.isPlainObject(e)&&e))}}),we._evalUrl=function(e){return we.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},we.fn.extend({wrapAll:function(e){var t;return this[0]&&(we.isFunction(e)&&(e=e.call(this[0])),t=we(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return we.isFunction(e)?this.each(function(t){we(this).wrapInner(e.call(this,t))}):this.each(function(){var t=we(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=we.isFunction(e);return this.each(function(i){we(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){we(this).replaceWith(this.childNodes)}),this}}),we.expr.pseudos.hidden=function(e){return!we.expr.pseudos.visible(e)},we.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length);
},we.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},Gt=we.ajaxSettings.xhr();ve.cors=!!Gt&&"withCredentials"in Gt,ve.ajax=Gt=!!Gt,we.ajaxTransport(function(e){var t,n;if(ve.cors||Gt&&!e.crossDomain)return{send:function(r,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)a.setRequestHeader(o,r[o]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Wt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout(function(){t&&n()})},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),we.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),we.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return we.globalEval(e),e}}}),we.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),we.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,r){t=we("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),oe.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Kt=[],Ut=/(=)\?(?=&|$)|\?\?/;we.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||we.expando+"_"+zt++;return this[e]=!0,e}}),we.ajaxPrefilter("json jsonp",function(e,t,n){var r,s,o,a=e.jsonp!==!1&&(Ut.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=we.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ut,"$1"+r):e.jsonp!==!1&&(e.url+=(jt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||we.error(r+" was not called"),o[0]},e.dataTypes[0]="json",s=i[r],i[r]=function(){o=arguments},n.always(function(){void 0===s?we(i).removeProp(r):i[r]=s,e[r]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(r)),o&&we.isFunction(s)&&s(o[0]),o=s=void 0}),"script"}),ve.createHTMLDocument=function(){var e=oe.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),we.parseHTML=function(e,t,i){if("string"!=typeof e)return[];"boolean"==typeof t&&(i=t,t=!1);var n,r,s;return t||(ve.createHTMLDocument?(t=oe.implementation.createHTMLDocument(""),n=t.createElement("base"),n.href=oe.location.href,t.head.appendChild(n)):t=oe),r=De.exec(e),s=!i&&[],r?[t.createElement(r[1])]:(r=k([e],t,s),s&&s.length&&we(s).remove(),we.merge([],r.childNodes))},we.fn.load=function(e,t,i){var n,r,s,o=this,a=e.indexOf(" ");return a>-1&&(n=J(e.slice(a)),e=e.slice(0,a)),we.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),o.length>0&&we.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(n?we("<div>").append(we.parseHTML(e)).find(n):e)}).always(i&&function(e,t){o.each(function(){i.apply(this,s||[e.responseText,t,e])})}),this},we.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){we.fn[t]=function(e){return this.on(t,e)}}),we.expr.pseudos.animated=function(e){return we.grep(we.timers,function(t){return e===t.elem}).length},we.offset={setOffset:function(e,t,i){var n,r,s,o,a,l,d,u=we.css(e,"position"),c=we(e),h={};"static"===u&&(e.style.position="relative"),a=c.offset(),s=we.css(e,"top"),l=we.css(e,"left"),d=("absolute"===u||"fixed"===u)&&(s+l).indexOf("auto")>-1,d?(n=c.position(),o=n.top,r=n.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),we.isFunction(t)&&(t=t.call(e,i,we.extend({},a))),null!=t.top&&(h.top=t.top-a.top+o),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):c.css(h)}},we.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){we.offset.setOffset(this,e,t)});var t,i,n,r,s=this[0];if(s)return s.getClientRects().length?(n=s.getBoundingClientRect(),t=s.ownerDocument,i=t.documentElement,r=t.defaultView,{top:n.top+r.pageYOffset-i.clientTop,left:n.left+r.pageXOffset-i.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===we.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),l(e[0],"html")||(n=e.offset()),n={top:n.top+we.css(e[0],"borderTopWidth",!0),left:n.left+we.css(e[0],"borderLeftWidth",!0)}),{top:t.top-n.top-we.css(i,"marginTop",!0),left:t.left-n.left-we.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===we.css(e,"position");)e=e.offsetParent;return e||tt})}}),we.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;we.fn[e]=function(n){return Fe(this,function(e,n,r){var s;return we.isWindow(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===r?s?s[t]:e[n]:void(s?s.scrollTo(i?s.pageXOffset:r,i?r:s.pageYOffset):e[n]=r)},e,n,arguments.length)}}),we.each(["top","left"],function(e,t){we.cssHooks[t]=N(ve.pixelPosition,function(e,i){if(i)return i=M(e,t),ct.test(i)?we(e).position()[t]+"px":i})}),we.each({Height:"height",Width:"width"},function(e,t){we.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){we.fn[n]=function(r,s){var o=arguments.length&&(i||"boolean"!=typeof r),a=i||(r===!0||s===!0?"margin":"border");return Fe(this,function(t,i,r){var s;return we.isWindow(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===r?we.css(t,i,a):we.style(t,i,r,a)},t,o?r:void 0,o)}})}),we.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),we.holdReady=function(e){e?we.readyWait++:we.ready(!0)},we.isArray=Array.isArray,we.parseJSON=JSON.parse,we.nodeName=l,n=[],r=function(){return we}.apply(t,n),!(void 0!==r&&(e.exports=r));var Jt=i.jQuery,Qt=i.$;return we.noConflict=function(e){return i.$===we&&(i.$=Qt),e&&i.jQuery===we&&(i.jQuery=Jt),we},s||(i.jQuery=i.$=we),we})},function(e,t,i){!function(t,i){e.exports=i()}("vein",function(){var e=function(){},t=function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var i in arguments[t])arguments[t].hasOwnProperty(i)&&(e[i]=arguments[t][i]);return e},i=function(e,t,i){var n,r,s=[],o=[],a=t[document.all?"rules":"cssRules"],l=e.replace(/\s/g,"");for(n=0,r=a.length;n<r;n++)(a[n].selectorText===e||4===a[n].type&&a[n].cssText.replace(/\s/g,"").substring(0,l.length)==l)&&(null===i?o.push(n):s.push(a[n]));for(n=0,r=o.length;n<r;n++)t.deleteRule(o[n]);return s},n=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+": "+e[i]+";");var n=t.join("");return n};e.getStylesheet=function(){var e=this;return e.element&&document.getElementById("vein")||(e.element=document.createElement("style"),e.element.setAttribute("type","text/css"),e.element.setAttribute("id","vein"),document.getElementsByTagName("head")[0].appendChild(e.element),e.stylesheet=e.element.sheet),e.stylesheet};var r=function(e){return e[document.all?"rules":"cssRules"]},s=function(e,t,i){var n=r(i);i.insertRule?i.insertRule(e+"{"+t+"}",n.length):i.addRule(e,t,n.length)};return e.inject=function(e,o,a){a=t({},a);var l,d,u,c,h,p,f,g,m,v,y=this,w=a.stylesheet||y.getStylesheet();r(w);for("string"==typeof e&&(e=[e]),l=0,d=e.length;l<d;l++)if("object"==typeof e[l]&&w.insertRule)for(u in e[l])if(c=i(u,w,o),0===c.length)for(h=n(o),m=0,v=e[l][u].length;m<v;m++)s(u,e[l][u][m]+"{"+h+"}",w);else for(f=0,g=c.length;f<g;f++)y.inject(e[l][u],o,{stylesheet:c[f]});else{if(c=i(e[l],w,o),null===o)return;if(0===c.length)h=n(o),s(e[l],h,w);else for(f=0,g=c.length;f<g;f++)for(p in o)o.hasOwnProperty(p)&&(c[f].style.setProperty?c[f].style.setProperty(p,o[p],""):c[f].style.setAttribute(p,o[p],""))}return y},e})},function(e,t,i){var n,r;!function(s){"use strict";function o(e){var t=[];return"string"!=typeof e?t.push(e):e.replace(h,function(e,i){void 0!==i?t.push(parseInt(i)):t.push(e)}),t}function a(e,t){for(var i=e,n=o(t),r=0,s=n.length;r<s;r++){if(void 0===i)return;i=i[n[r]]}return i}function l(e,t,i){for(var n=e,r=o(t),s=0,a=r.length-1;s<a;s++)n=n[r[s]];n[r[s]]=i}var d=[],u=!1,c=!1,h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g;n=[i(2)],r=function(e){return{inAnimationFrame:function(e,t){u&&!t?e():(d.push(e),c||(c=!0,requestAnimationFrame(this.handleAnimationFrames.bind(this))))},handleAnimationFrames:function(){u=!0;try{for(;d.length;)d.pop()()}finally{u=!1,c=!1}},handleEventInAnimationFrame:function(e){var t=this,i=arguments;requestAnimationFrame(function(){e.data.apply(t,i)})},findInArray:function(e,t){for(var i=0,n=e.length;i<n;i++)if(t(e[i],i))return i;return-1},elementFromPoint:function(t,i,n){for(var r=e(n),s=r.length-1;s>=0;s--){var o=e(r.get(s)),a=o.offset();if(t>=a.left&&i>=a.top&&t<a.left+o.outerWidth()&&i<a.top+o.outerHeight())return o}},loggingInterceptor:function(e){var t=Array.prototype.slice.apply(arguments,[1]),i=e.apply(this,t);return console.log(t.map(function(e){return e}).join(",")+" -> "+i),i},cancelEvent:function(e){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()},getValue:a,setValue:l}}.apply(t,n),!(void 0!==r&&(e.exports=r))}(i(5))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,i){var n,r;n=[i(7)],r=function(e){return window.Promise?window.Promise:e.Promise}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){(function(t,n){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.1.0
	 */
!function(t,i){e.exports=i()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function r(e){return"function"==typeof e}function s(e){K=e}function o(e){U=e}function a(){return function(){return t.nextTick(h)}}function l(){return"undefined"!=typeof G?function(){G(h)}:c()}function d(){var e=0,t=new Z(h),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}function u(){var e=new MessageChannel;return e.port1.onmessage=h,function(){return e.port2.postMessage(0)}}function c(){var e=setTimeout;return function(){return e(h,1)}}function h(){for(var e=0;e<W;e+=2){var t=ie[e],i=ie[e+1];t(i),ie[e]=void 0,ie[e+1]=void 0}W=0}function p(){try{var e=i(9);return G=e.runOnLoop||e.runOnContext,l()}catch(e){return c()}}function f(e,t){var i=arguments,n=this,r=new this.constructor(m);void 0===r[re]&&A(r);var s=n._state;return s?!function(){var e=i[s-1];U(function(){return E(s,r,e,n._result)})}():D(n,r,e,t),r}function g(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var i=new t(m);return k(i,e),i}function m(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(e){return le.error=e,le}}function b(e,t,i,n){try{e.call(t,i,n)}catch(e){return e}}function x(e,t,i){U(function(e){var n=!1,r=b(i,t,function(i){n||(n=!0,t!==i?k(e,i):T(e,i))},function(t){n||(n=!0,S(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&r&&(n=!0,S(e,r))},e)}function _(e,t){t._state===oe?T(e,t._result):t._state===ae?S(e,t._result):D(t,void 0,function(t){return k(e,t)},function(t){return S(e,t)})}function $(e,t,i){t.constructor===e.constructor&&i===f&&t.constructor.resolve===g?_(e,t):i===le?(S(e,le.error),le.error=null):void 0===i?T(e,t):r(i)?x(e,t,i):T(e,t)}function k(t,i){t===i?S(t,v()):e(i)?$(t,i,w(i)):T(t,i)}function C(e){e._onerror&&e._onerror(e._result),R(e)}function T(e,t){e._state===se&&(e._result=t,e._state=oe,0!==e._subscribers.length&&U(R,e))}function S(e,t){e._state===se&&(e._state=ae,e._result=t,U(C,e))}function D(e,t,i,n){var r=e._subscribers,s=r.length;e._onerror=null,r[s]=t,r[s+oe]=i,r[s+ae]=n,0===s&&e._state&&U(R,e)}function R(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n=void 0,r=void 0,s=e._result,o=0;o<t.length;o+=3)n=t[o],r=t[o+i],n?E(i,n,r,s):r(s);e._subscribers.length=0}}function z(){this.error=null}function j(e,t){try{return e(t)}catch(e){return de.error=e,de}}function E(e,t,i,n){var s=r(i),o=void 0,a=void 0,l=void 0,d=void 0;if(s){if(o=j(i,n),o===de?(d=!0,a=o.error,o.error=null):l=!0,t===o)return void S(t,y())}else o=n,l=!0;t._state!==se||(s&&l?k(t,o):d?S(t,a):e===oe?T(t,o):e===ae&&S(t,o))}function O(e,t){try{t(function(t){k(e,t)},function(t){S(e,t)})}catch(t){S(e,t)}}function I(){return ue++}function A(e){e[re]=ue++,e._state=void 0,e._result=void 0,e._subscribers=[]}function M(e,t){this._instanceConstructor=e,this.promise=new e(m),this.promise[re]||A(this.promise),X(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?T(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&T(this.promise,this._result))):S(this.promise,N())}function N(){return new Error("Array Methods must be provided an Array")}function F(e){return new M(this,e).promise}function L(e){var t=this;return new t(X(e)?function(i,n){for(var r=e.length,s=0;s<r;s++)t.resolve(e[s]).then(i,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function H(e){var t=this,i=new t(m);return S(i,e),i}function P(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function q(e){this[re]=I(),this._result=this._state=void 0,this._subscribers=[],m!==e&&("function"!=typeof e&&P(),this instanceof q?O(this,e):B())}function V(){var e=void 0;if("undefined"!=typeof n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=q}var Y=void 0;Y=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var X=Y,W=0,G=void 0,K=void 0,U=function(e,t){ie[W]=e,ie[W+1]=t,W+=2,2===W&&(K?K(h):ne())},J="undefined"!=typeof window?window:void 0,Q=J||{},Z=Q.MutationObserver||Q.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ie=new Array(1e3),ne=void 0;ne=ee?a():Z?d():te?u():void 0===J?p():c();var re=Math.random().toString(36).substring(16),se=void 0,oe=1,ae=2,le=new z,de=new z,ue=0;return M.prototype._enumerate=function(){for(var e=this.length,t=this._input,i=0;this._state===se&&i<e;i++)this._eachEntry(t[i],i)},M.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,n=i.resolve;if(n===g){var r=w(e);if(r===f&&e._state!==se)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(i===q){var s=new i(m);$(s,e,r),this._willSettleAt(s,t)}else this._willSettleAt(new i(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},M.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===se&&(this._remaining--,e===ae?S(n,i):this._result[t]=i),0===this._remaining&&T(n,this._result)},M.prototype._willSettleAt=function(e,t){var i=this;D(e,void 0,function(e){return i._settledAt(oe,t,e)},function(e){return i._settledAt(ae,t,e)})},q.all=F,q.race=L,q.resolve=g,q.reject=H,q._setScheduler=s,q._setAsap=o,q._asap=U,q.prototype={constructor:q,then:f,catch:function(e){return this.then(null,e)}},q.polyfill=V,q.Promise=q,q})}).call(t,i(8),function(){return this}())},function(e,t){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(e){if(u===setTimeout)return setTimeout(e,0);if((u===i||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function s(e){if(c===clearTimeout)return clearTimeout(e);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function o(){g&&p&&(g=!1,p.length?f=p.concat(f):m=-1,f.length&&a())}function a(){if(!g){var e=r(o);g=!0;for(var t=f.length;t;){for(p=f,f=[];++m<t;)p&&p[m].run();m=-1,t=f.length}p=null,g=!1,s(e)}}function l(e,t){this.fun=e,this.array=t}function d(){}var u,c,h=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:i}catch(e){u=i}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(e){c=n}}();var p,f=[],g=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];f.push(new l(e,t)),1!==f.length||g||r(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=d,h.addListener=d,h.once=d,h.off=d,h.removeListener=d,h.removeAllListeners=d,h.emit=d,h.prependListener=d,h.prependOnceListener=d,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t){},function(e,t,i){function n(e){return i(r(e))}function r(e){return s[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var s={"./align":11,"./align.js":11,"./autosizecolumn":13,"./autosizecolumn.js":13,"./backdrop":14,"./backdrop.js":14,"./cellSelection":15,"./cellSelection.js":15,"./columnmoving":16,"./columnmoving.js":16,"./columnsizing":17,"./columnsizing.js":17,"./directinput":18,"./directinput.js":18,"./dragging":19,"./dragging.js":19,"./dummy":20,"./dummy.js":20,"./editing":21,"./editing.js":21,"./editing_currency":22,"./editing_currency.js":22,"./editing_date":24,"./editing_date.js":24,"./editing_number_int":25,"./editing_number_int.js":25,"./editing_option":26,"./editing_option.js":26,"./filtering":27,"./filtering.js":27,"./formatting":30,"./formatting.js":30,"./grouping":31,"./grouping.js":31,"./rowhighlighting":39,"./rowhighlighting.js":39,"./selection":40,"./selection.js":40,"./sorting":41,"./sorting.js":41,"./statistics":46,"./statistics.js":46,"./styling":48,"./styling.js":48,"./subgrids":49,"./subgrids.js":49,"./subview":50,"./subview.js":50,"./templating":51,"./templating.js":51,"./treegrid":34,"./treegrid.js":34,"./validation":52,"./validation.js":52};n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id=10},function(e,t,i){var n,r;n=[i(12),i(2),i(4)],r=function(e,t){"use strict";return function(t,i){e(t,function(e){return{renderCell:function(t,i,n,r){var s=e.renderCell(t,i,n,r);return i.align&&s.classList.add("pg-align-"+i.align),s}}})}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n;n=function(){"use strict";return function(e,t){var i={};for(var n in e)"function"==typeof e[n]&&(i[n]=e[n].bind(e));var r=t.apply(e,[i,e]);for(var n in r)e[n]=r[n];return e}}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,i){var n,r;n=[i(12),i(4),i(2)],r=function(e,t,i){"use strict";return{init:function(n,r){function s(e,t){var i=n.target.find(".pg-cell[data-column-key='"+e.key+"']");if(i.length){t&&(e.width=0);var r=i.map(function(e,t){return t.scrollWidth}),s=2,o=e.width;return e.width=Math.max.apply(null,r)+s,e.width!=o}}return n.options.extensions.columnsizing?e(n,function(e){return{init:function(){e.init(),this.container.on("dblclick",".pg-resizehandle",function(e){if(i(this).parents(".powergrid")[0]===n.container[0]){var r=e.target.parentNode,o=i(r).attr("data-column-key"),a=t.findInArray(n.options.columns,function(e){return e.key==o}),l=n.options.columns[a];s(l,!0)&&n.queueAdjustColumnPositions(),e.stopPropagation(),e.preventDefault()}})},updateViewport:function(){e.updateViewport.apply(this,arguments);for(var t=!1,i=0,r=n.options.columns.length;i<r;i++){var o=n.options.columns[i];o.autoSize&&(t|=s(o,!0))}t&&this.queueAdjustColumnPositions()}}}):n}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12)],r=function(e){return{init:function(t){e(t,function(e){return{renderData:function(){e.renderData.apply(this,arguments),this.renderBackdrop(this.scrollinggroup)},renderBackdrop:function(e){var t=e.left&&$("<div class='pg-fixed pg-backdrop'>"),i=e.scrolling&&$("<div class='pg-scrolling pg-backdrop'>"),n=e.right&&$("<div class='pg-fixed pg-backdrop'>"),r=$();e.left&&e.left.append(t),e.scrolling&&e.scrolling.append(i),e.right&&e.right.append(n),t&&(r=r.add(t)),i&&(r=r.add(i)),n&&(r=r.add(n));for(var s=0;s<this.options.columns.length;s++){var o,a=this.options.columns[s];o=$("<div class='pg-column-backdrop'>"),o.addClass("pg-column"+this.normalizeCssClass(a.key)),o.attr("data-column-key",a.key),s<this.options.frozenColumnsLeft?t.append(o):s>this.options.columns.length-this.options.frozenColumnsRight-1?n.append(o):i.append(o)}}}})}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12),i(2)],r=function(e,t){"use strict";return function(i,n){e(i,function(e){return{init:function(){e.init.apply(this,arguments),this.container.on("click",".pg-cell",function(e){var r=t(e.currentTarget.parentNode),s=r.data("row-id"),o=r.index()+i.viewport.begin,a=t(e.currentTarget).data("column-key"),l=n.highlightRow===!0;i.selection.selectRow({row:s,idx:o,col:a,highlightRow:l})}),n.onCellSelected&&i.on("onCellSelected",n.onCellSelected)},selection:{selectRow:function(e){e.highlightRow&&(this.selectedElements&&this.selectedElements.removeClass("pg-selected"),this.selectedElements=i.container.find("> .pg-rowgroup > .pg-container > .pg-row[data-row-id='"+e.row+"']"),this.selectedElements.addClass("pg-selected")),i.trigger("onCellSelected",e)}}}})}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12),i(3),i(4),i(2)],r=function(e,t,i,n){"use strict";function r(e){var t={};e.options.columns.map(function(e,i){return t[e.key]=i}),e.saveSetting("columnmoving",t)}function s(e){var t=e.loadSetting("columnmoving");void 0!==t&&null!==t&&""!==t&&e.options.columns.sort(function(e,i){return t[e.key]-t[i.key]})}return{loadFirst:["filtering"],requires:{dragging:{}},init:function(t,i){e(t,function(e){return{init:function(){var i,o,a,l,d,u;s(t),e.init(),t.on("columndragstart",function(e){a=e.idx,l=a,a<t.options.frozenColumnsLeft?(i=0,o=t.options.frozenColumnsLeft):a>t.options.columns.length-t.options.frozenColumnsRight?(i=t.options.columns.length-t.options.frozenColumnsRight,o=t.options.columns.length):(i=t.options.frozenColumnsLeft,o=t.options.columns.length-t.options.frozenColumnsRight),d=n.extend([],t.options.columns),u=!1}).on("columndragmove",function(e,n){if(e.outOfViewPort)u||(u=!0,t.options.columns=d,a=l,t.adjustColumnPositions());else{for(var s=e.x,c=i,h=0;c<o&&(a!=c&&(h+=t.options.columns[c].width),!(h>s));c++);if(c>a&&c--,c<i&&(c=i),c!=a){var p=t.options.columns.splice(a,1);t.options.columns.splice(c,0,p[0]),t.adjustColumnPositions(!0),a=c,r(t)}}}).on("columndragend",function(e,i){d=null,t.adjustColumnPositions(!1)})}}})}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12),i(4),i(2)],r=function(e,t,i){"use strict";return{loadFirst:["filtering"],init:function(n,r){e(n,function(e){return{renderHeaderCell:function(){var t=e.renderHeaderCell.apply(this,arguments),n=i("<div class='pg-resizehandle'></div>");return t.append(n),t},init:function(){function r(e){i(this).parents(".powergrid")[0]===n.container[0]&&(c=e.target.parentNode,h=i(c).attr("data-column-key"),p=t.findInArray(n.options.columns,function(e){return e.key==h}),f=n.options.columns[p],f.resizable!==!1&&(g=e.pageX,m=f.width,v=e.offsetX||e.originalEvent.layerX||0,p<n.options.columns.length-n.options.frozenColumnsRight?y=1:p>=n.options.columns.length-n.options.frozenColumnsRight&&(y=-1)))}function s(e){if(1==y)f.width=Math.max(0,e.pageX-g+m);else{if(y!=-1)return;f.width=Math.max(0,g-e.pageX+m)}requestAnimationFrame(function(){n.adjustColumnPositions(!0),n.adjustHeights()})}function o(e){0!==y&&(y=0,n.saveSetting(f.key+"_width",f.width),e.preventDefault(),e.stopImmediatePropagation(),requestAnimationFrame(function(){n.adjustColumnPositions(!1)}))}for(var a=0,l=this.options.columns.length;a<l;a++){var d=this.options.columns[a],u=this.loadSetting(d.key+"_width");void 0!==u&&null!==u&&""!==u&&(d.width=u)}e.init();var c,h,p,f,g,m,v,y=0;this.container.on("mousedown",".pg-resizehandle",r).on("mousemove",s).on("mouseup",":not(.pg-resizehandle)",o).on("click",".pg-resizehandle",function(e){e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation()})}}})}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(2),i(12),i(4)],r=function(e,t,i){"use strict";return{loadFirst:["editing"],init:function(n,r){t(n,function(r){return n.editing&&t(n.editing,function(e){return{startEdit:function(t,i,r,s){var o=n.getColumnForKey(i);n.directinput.isDirectInput(o)||e.startEdit(t,i,r,s)}}}),{init:function(){r.init(),this.container.on("change",".pg-directinput",function(t){var i=e(this).parents(".pg-cell:eq(0)"),r=i.parents(".pg-row:eq(0)"),s=i.attr("data-column-key"),o=r.data("row-id");n.dataSource.setValue(o,s,this.checked)})},renderCellContent:function(e,t){var n=i.getValue(e,t.key);if(this.directinput.isDirectInput(t)){var s=document.createDocumentFragment();return(null!==n&&void 0!==n||0==t.hideOnNull)&&s.appendChild(this.directinput.createInput(e,t,n)),t.template&&s.appendChild(r.renderCellContent(e,t)),s}return r.renderCellContent(e,t,n)},directinput:{isDirectInput:function(e){return"checkbox"===e.type||"radio"===e.type},createInput:function(t,i,r){var s=e("<input type='"+i.type+"' class='pg-directinput'>").attr("checked",r);return n.editing&&n.editing.isEditable(t,i)||s.attr("disabled",!0),s[0]}}}})}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12),i(3),i(4),i(2)],r=function(e,t,i,n){"use strict";return{loadFirst:["filtering"],init:function(t,r){e(t,function(e){return{init:function(){function s(e){if(n(this).parents(".powergrid")[0]===t.container[0]&&(v=this,y=n(v).attr("data-column-key"))){g=i.findInArray(t.options.columns,function(e){return e.key==y}),p=t.options.columns[g];var r=t.adjustColumnPositions();f=r[g],d=e.pageX,u=e.pageY,b=e.offsetX,x=e.offsetY,m=e.offsetX||e.originalEvent.layerX||0,m<=v.offsetWidth-8&&m>=8&&(l=n(t.target).find("> .powergrid > .pg-rowgroup > .pg-container > .pg-row > .pg-column"+t.normalizeCssClass(y)+", > .powergrid > .pg-rowgroup > .pg-container > .pg-row > .pg-inner-row > .pg-column"+t.normalizeCssClass(y)+", > .powergrid > .pg-columnheaders > .pg-container > .pg-row > .pg-column"+y),h=!0,c=!1,e.stopPropagation())}}function o(e){if(h){var s=e.pageX-d,o=e.pageY-u;if(!c){var a=new n.Event("columndragstart",{idx:g,column:p,offsetX:b,offsetY:x});if(t.trigger(a),e.isDefaultPrevented())return;if(!(s*s+o*o>400))return;l.addClass("pg-columndragging"),c=!0}var m,y,_=f+e.pageX-d,$=e.pageY-u;if(r.allowDragOutsideOfViewPort){var k=i.elementFromPoint(e.pageX,e.pageY,".pg-column-dragtarget");if(k&&k!==w){var e=new n.Event("columndragenter",{column:p});k.trigger(e),w?w.removeClass("pg-column-dragtarget-focussed"):y=!0,e.isDefaultPrevented()||(k.addClass("pg-column-dragtarget-focussed"),w=k,m=!0)}else w&&(w.trigger("columndragexit"),w.removeClass("pg-column-dragtarget-focussed"),w=null)}t.trigger(new n.Event("columndragmove",{column:p,x:_,y:$,outOfViewPort:m})),requestAnimationFrame(function(){h&&(m?(y&&l.css({transform:""}),n(v).css({transform:"translate("+(_-p.offsetLeft)+"px, "+$+"px)"})):l.css({transform:"translate("+(_-p.offsetLeft)+"px)"}))})}}function a(e){h=!1,c&&(w&&(w.trigger(new n.Event("columndropped",{column:p})),w.removeClass("pg-column-dragtarget-focussed"),w=null),t.trigger(new n.Event("columndragend")),c=!1,n(t.baseSelector+" .pg-column"+t.normalizeCssClass(p.key)).css({transform:""}),l.removeClass("pg-columndragging"),e.preventDefault(),e.stopImmediatePropagation()),l=null,p=null,v=null,y=null}e.init();var l,d,u,c,h,p,f,g,m,v,y,w,b,x;this.container.on("mousedown",".pg-columnheader",s).on("click",".pg-columnheader",a),n(window).on("mousemove."+this.id,o).on("mouseup."+this.id,a)},destroy:function(){n(window).off("mousemove."+this.id).off("mouseup."+this.id),e.destroy()}}})}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12)],r=function(e,t){"use strict";return function(t,i){e(t,i.bind(this,e))}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12),i(2),i(4)],r=function(e,t,i){"use strict";return function(n,r){e(n,function(e){return{renderCell:function(t,i,n,r){var s=e.renderCell.apply(this,arguments),o=this.editing.isEditable(t,i);return o&&s.classList.add("pg-editable"),s},init:function(){var i=this;e.init(),this.container.on("click",".pg-cell.pg-editable",function(e){for(var n=e.target;n&&!t(n).is(".pg-cell");)n=n.parentNode;var r=t(n).attr("data-column-key"),s=t(n).parents(".pg-row:eq(0)").data("row-id"),o=t(n).parents(".pg-row:eq(0)").data("row-idx"),a=i.dataSource.getRecordById(s);i.editing.startEdit(n,r,a,o)}),t(this.dataSource).on("editabilitychanged",function(e,t){i.editing.updateEditability(t.values)})},editing:{grid:n,editors:{},addEditor:function(e,t){this.editors[e.key]=t},isEditable:function(e,t){var i=t.editable;return i&&"function"==typeof r.isEditable&&(i=r.isEditable.apply(n,[e,t])),i},startEdit:function(e,r,s,o){var a=n.getColumnForKey(r),l=i.getValue(s,r),d=this.createEditor(s,a,l),u=this;if(n.scrollToCell(o,r),!t(e).is(".pg-editing")&&a.editable){var c={cell:e,key:r,record:s,rowIdx:o,column:a},h=new t.Event("beforeedit",c);n.trigger(h),h.isDefaultPrevented()||(t(d).on("commit",function(t,n,r){i.inAnimationFrame(function(){u.commit(e,s,o,a,n,l,r)})}).on("abort",function(t){i.inAnimationFrame(function(){u.abort(e,s,o,a,l)})}),t(e).addClass("pg-editing").empty().append(d))}},commit:function(e,t,i,r,s,o,a){try{n.dataSource.setValue(t.id,r.key,s)}catch(e){console.error("Exception while committing value",t,r,s,e)}this.endEdit(e,t,i,r,n.dataSource.getRecordById(t.id)[r.key]);var l=i,d=r,u=t;if(a){switch(a){case 1:case-1:do l+=a,u=n.dataSource.getData(l,l+1)[0];while(u&&!this.isEditable(u,d));break;case 2:case-2:var c=n.getColumnIndexForKey(r.key);do c+=a/2,(c>=n.columnCount()||c<0)&&(l+=a/2,u=n.dataSource.getData(l,l+1)[0],c=a<0?n.columnCount()-1:0),d=n.getColumnForIndex(c);while(u&&!this.isEditable(u,d))}if(u){var h=n.getCellFor(u.id,d.key);this.startEdit(h,d.key,u,l)}}},abort:function(e,t,i,n,r){this.endEdit(e,t,i,n,r)},endEdit:function(e,i,r,s,o){t(e).removeClass("pg-editing"),n.updateCellValue(i.id,s.key)},createEditor:function(e,i,n){var s;s=r.editors&&r.editors[i.type]?r.editors[i.type](e,i,n):t("<input>").attr("type",i.type).val(n);var o=!1;return s.on("keydown",function(e){switch(e.keyCode){case 13:e.preventDefault(),t(this).trigger("commit",[s.val(),e.shiftKey?-1:1]);break;case 27:e.preventDefault(),t(this).trigger("abort");break;case 9:e.preventDefault(),t(this).trigger("commit",[s.val(),e.shiftKey?-2:2])}}),s.on("blur",function(e){r.commitOnBlur!==!1&&o?t(this).trigger("commit",[s.val()]):r.abortOnBlur!==!0&&o||t(this).trigger("abort")}).on("change",function(e){o=!0}),s[0].select?setTimeout(s[0].select.bind(s[0]),10):s[0].focus&&setTimeout(s[0].focus.bind(s[0]),10),s},updateEditability:function(e){for(var t=0,i=e.length;t<i;t++){var r=e[t],s=n.getColumnForKey(r.key),o=n.getRecordById(r.id),a=s&&o&&n.getCellFor(r.id,r.key);a&&this.updateCellEditability(o,s,a)}},updateCellEditability:function(e,i,n){t(n).toggleClass("pg-editable",this.isEditable(e,i))}}}})}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12),i(2),i(4),i(23)],r=function(e,t){"use strict";return{requires:{editing:{editors:{currency:function(e,i,n){var r=t("<input>").w2field("money",{autoFormat:!0,currencyPrefix:"ï¿½",currencyPrecision:i.precision,precision:i.precision});return r.value(n),r}}}}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(module,exports){var w2ui=w2ui||{},w2obj=w2obj||{},w2utils=function(){function e(e){var t=/^[-+]?[0-9]+$/;return t.test(e)}function t(e){return"string"==typeof e&&(e=e.replace(w2utils.settings.decimalSymbol,".")),("number"==typeof e||"string"==typeof e&&""!==e)&&!isNaN(Number(e))}function i(e){var t=w2utils.settings,i=new RegExp("^"+(t.currencyPrefix?"\\"+t.currencyPrefix+"?":"")+"[-+]?[0-9]*[\\"+w2utils.settings.decimalSymbol+"]?[0-9]+"+(t.currencySuffix?"\\"+t.currencySuffix+"?":"")+"$","i");return"string"==typeof e&&(e=e.replace(new RegExp(t.groupSymbol,"g"),"")),"object"!=typeof e&&""!==e&&i.test(e)}function n(e){var t=/^[a-fA-F0-9]+$/;return t.test(e)}function r(e){var t=/^[a-zA-Z0-9_-]+$/;return t.test(e)}function s(e){var t=/^[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;return t.test(e)}function o(t,i,n){if(!t)return!1;var r,s,o,a="Invalid Date";if(null==i&&(i=w2utils.settings.date_format),"function"==typeof t.getUTCFullYear&&"function"==typeof t.getUTCMonth&&"function"==typeof t.getUTCDate)o=t.getUTCFullYear(),r=t.getUTCMonth(),s=t.getUTCDate();else if("function"==typeof t.getFullYear&&"function"==typeof t.getMonth&&"function"==typeof t.getDate)o=t.getFullYear(),r=t.getMonth(),s=t.getDate();else{if(t=String(t),RegExp("mon","ig").test(i)){i=i.replace(/month/gi,"m").replace(/mon/gi,"m").replace(/dd/gi,"d").replace(/[, ]/gi,"/").replace(/\/\//g,"/").toLowerCase(),t=t.replace(/[, ]/gi,"/").replace(/\/\//g,"/").toLowerCase();for(var l=0,d=w2utils.settings.fullmonths.length;d>l;l++){var u=w2utils.settings.fullmonths[l];t=t.replace(RegExp(u,"ig"),parseInt(l)+1).replace(RegExp(u.substr(0,3),"ig"),parseInt(l)+1)}}var c=t.replace(/-/g,"/").replace(/\./g,"/").toLowerCase().split("/"),h=i.replace(/-/g,"/").replace(/\./g,"/").toLowerCase();"mm/dd/yyyy"===h&&(r=c[0],s=c[1],o=c[2]),"m/d/yyyy"===h&&(r=c[0],s=c[1],o=c[2]),"dd/mm/yyyy"===h&&(r=c[1],s=c[0],o=c[2]),"d/m/yyyy"===h&&(r=c[1],s=c[0],o=c[2]),"yyyy/dd/mm"===h&&(r=c[2],s=c[1],o=c[0]),"yyyy/d/m"===h&&(r=c[2],s=c[1],o=c[0]),"yyyy/mm/dd"===h&&(r=c[1],s=c[2],o=c[0]),"yyyy/m/d"===h&&(r=c[1],s=c[2],o=c[0]),"mm/dd/yy"===h&&(r=c[0],s=c[1],o=c[2]),"m/d/yy"===h&&(r=c[0],s=c[1],o=parseInt(c[2])+1900),"dd/mm/yy"===h&&(r=c[1],s=c[0],o=parseInt(c[2])+1900),"d/m/yy"===h&&(r=c[1],s=c[0],o=parseInt(c[2])+1900),"yy/dd/mm"===h&&(r=c[2],s=c[1],o=parseInt(c[0])+1900),"yy/d/m"===h&&(r=c[2],s=c[1],o=parseInt(c[0])+1900),"yy/mm/dd"===h&&(r=c[1],s=c[2],o=parseInt(c[0])+1900),"yy/m/d"===h&&(r=c[1],s=c[2],o=parseInt(c[0])+1900)}return!!(e(o)&&e(r)&&e(s))&&(o=+o,r=+r,s=+s,a=new Date(o,r-1,s),null!=r&&("Invalid Date"!=String(a)&&(a.getMonth()+1===r&&a.getDate()===s&&a.getFullYear()===o&&(n!==!0||a))))}function a(e,t){if(null==e)return!1;var i,n;e=String(e),e=e.toUpperCase(),n=e.indexOf("PM")>=0;var r=n||e.indexOf("AM")>=0;i=r?12:24,e=e.replace("AM","").replace("PM",""),e=$.trim(e);var s=e.split(":"),o=parseInt(s[0]||0),a=parseInt(s[1]||0);return!!(r&&1===s.length||2===s.length)&&(!(""===s[0]||0>o||o>i||!this.isInt(s[0])||s[0].length>2)&&(!(2===s.length&&(""===s[1]||0>a||a>59||!this.isInt(s[1])||2!==s[1].length))&&(!(!r&&i===o&&0!==a)&&((!r||1!==s.length||0!==o)&&(t!==!0||(n&&(o+=12),{hours:o,minutes:a}))))))}function l(e){if(""===e||null==e)return"";var t=new Date(e);if(w2utils.isInt(e)&&(t=new Date(Number(e))),"Invalid Date"==String(t))return"";var i=new Date,n=(i.getTime()-t.getTime())/1e3,r="",s="";return 0>n?(r='<span style="color: #aaa">future</span>',s=""):60>n?(r=Math.floor(n),s="sec",0>n&&(r=0,s="sec")):3600>n?(r=Math.floor(n/60),s="min"):86400>n?(r=Math.floor(n/60/60),s="hour"):2592e3>n?(r=Math.floor(n/24/60/60),s="day"):31557600>n?(r=Math.floor(n/365.25/24/60/60*10)/10,s="month"):n>=31557600&&(r=Math.floor(n/365.25/24/60/60*10)/10,s="year"),r+" "+s+(r>1?"s":"")}function d(e){if(""===e||null==e)return"";var t=new Date(e);if(w2utils.isInt(e)&&(t=new Date(Number(e))),"Invalid Date"==String(t))return"";var i=w2utils.settings.shortmonths,n=new Date,r=new Date;r.setTime(r.getTime()-864e5);var s=i[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear(),o=i[n.getMonth()]+" "+n.getDate()+", "+n.getFullYear(),a=i[r.getMonth()]+" "+r.getDate()+", "+r.getFullYear(),l=t.getHours()-(t.getHours()>12?12:0)+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+" "+(t.getHours()>=12?"pm":"am"),d=t.getHours()-(t.getHours()>12?12:0)+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds()+" "+(t.getHours()>=12?"pm":"am"),u=s;return s===o&&(u=l),s===a&&(u=w2utils.lang("Yesterday")),'<span title="'+s+" "+d+'">'+u+"</span>"}function u(e){if(!w2utils.isFloat(e)||""===e)return"";if(e=parseFloat(e),0===e)return 0;var t=["Bt","KB","MB","GB","TB"],i=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return(Math.floor(e/Math.pow(1024,i)*10)/10).toFixed(0===i?0:1)+" "+t[i]}function c(e,t,i){var n="";return null==t&&(t=w2utils.settings.groupSymbol||","),null==i&&(i=w2utils.settings.decimalSymbol||"."),(w2utils.isFloat(e)||w2utils.isInt(e)||w2utils.isMoney(e))&&(j=String(e).split("."),n=String(j[0]).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+t),null!=j[1]&&(n+=w2utils.settings.decimalSymbol+j[1])),n}function h(e,t){if(w2utils.settings.shortmonths,w2utils.settings.fullmonths,t||(t=this.settings.date_format),""===e||null==e||"object"==typeof e&&!e.getMonth)return"";var i=new Date(e);if(w2utils.isInt(e)&&(i=new Date(Number(e))),"Invalid Date"==String(i))return"";var n=i.getFullYear(),r=i.getMonth(),s=i.getDate();return t.toLowerCase().replace("month",w2utils.settings.fullmonths[r]).replace("mon",w2utils.settings.shortmonths[r]).replace(/yyyy/g,n).replace(/yyy/g,n).replace(/yy/g,n>2e3?100+parseInt(String(n).substr(2)):String(n).substr(2)).replace(/(^|[^a-z$])y/g,"$1"+n).replace(/mm/g,(10>r+1?"0":"")+(r+1)).replace(/dd/g,(10>s?"0":"")+s).replace(/th/g,1==s?"st":"th").replace(/th/g,2==s?"nd":"th").replace(/th/g,3==s?"rd":"th").replace(/(^|[^a-z$])m/g,"$1"+(r+1)).replace(/(^|[^a-z$])d/g,"$1"+s)}function p(e,t){if(w2utils.settings.shortmonths,w2utils.settings.fullmonths,t||(t=this.settings.time_format),""===e||null==e||"object"==typeof e&&!e.getMonth)return"";var i=new Date(e);if(w2utils.isInt(e)&&(i=new Date(Number(e))),w2utils.isTime(e)){var n=w2utils.isTime(e,!0);i=new Date,i.setHours(n.hours),i.setMinutes(n.minutes)}if("Invalid Date"==String(i))return"";var r="am",s=i.getHours(),o=i.getHours(),a=i.getMinutes(),l=i.getSeconds();return 10>a&&(a="0"+a),10>l&&(l="0"+l),(-1!==t.indexOf("am")||-1!==t.indexOf("pm"))&&(s>=12&&(r="pm"),s>12&&(s-=12)),t.toLowerCase().replace("am",r).replace("pm",r).replace("hhh",10>s?"0"+s:s).replace("hh24",10>o?"0"+o:o).replace("h24",o).replace("hh",s).replace("mm",a).replace("mi",a).replace("ss",l).replace(/(^|[^a-z$])h/g,"$1"+s).replace(/(^|[^a-z$])m/g,"$1"+a).replace(/(^|[^a-z$])s/g,"$1"+l)}function f(e,t){var i;return""===e||null==e||"object"==typeof e&&!e.getMonth?"":(i="string"!=typeof t?[this.settings.date_format,this.settings.time_format]:t.split("|"),this.formatDate(e,i[0])+" "+this.formatTime(e,i[1]))}function g(e){if(null===e)return e;switch(typeof e){case"number":break;case"string":e=$.trim(String(e).replace(/(<([^>]+)>)/gi,""));break;case"object":for(var t in e)e[t]=this.stripTags(e[t])}return e}function m(e){if(null===e)return e;switch(typeof e){case"number":break;case"string":e=String(e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");break;case"object":for(var t in e)e[t]=this.encodeTags(e[t])}return e}function v(e){return""===e||null==e?"":String(e).replace(/([;&,\.\+\*\~'`:"\!\^#$%@\[\]\(\)=<>\|\/? {}\\])/g,"\\$1")}function y(e){function t(e){for(var e=String(e).replace(/\r\n/g,"\n"),t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);128>n?t+=String.fromCharCode(n):n>127&&2048>n?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}var i,n,r,s,o,a,l,d="",u=0,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(e=t(e);u<e.length;)i=e.charCodeAt(u++),n=e.charCodeAt(u++),r=e.charCodeAt(u++),s=i>>2,o=(3&i)<<4|n>>4,a=(15&n)<<2|r>>6,l=63&r,isNaN(n)?a=l=64:isNaN(r)&&(l=64),d=d+c.charAt(s)+c.charAt(o)+c.charAt(a)+c.charAt(l);return d}function w(e){function t(e){for(var t,i,n="",r=0,s=0;r<e.length;)s=e.charCodeAt(r),128>s?(n+=String.fromCharCode(s),r++):s>191&&224>s?(t=e.charCodeAt(r+1),n+=String.fromCharCode((31&s)<<6|63&t),r+=2):(t=e.charCodeAt(r+1),i=e.charCodeAt(r+2),n+=String.fromCharCode((15&s)<<12|(63&t)<<6|63&i),r+=3);return n}var i,n,r,s,o,a,l,d="",u=0,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)s=c.indexOf(e.charAt(u++)),o=c.indexOf(e.charAt(u++)),a=c.indexOf(e.charAt(u++)),l=c.indexOf(e.charAt(u++)),i=s<<2|o>>4,n=(15&o)<<4|a>>2,r=(3&a)<<6|l,d+=String.fromCharCode(i),64!==a&&(d+=String.fromCharCode(n)),64!==l&&(d+=String.fromCharCode(r));return d=t(d)}function b(e,t,i,n){function r(e,t,i){var n=!!window.webkitURL;return n||"undefined"==typeof i||(t=i),";"+e+": "+t+"; -webkit-"+e+": "+t+"; -moz-"+e+": "+t+"; -ms-"+e+": "+t+"; -o-"+e+": "+t+";"}var s=$(e).width(),o=$(e).height(),a=.5;if(!e||!t)return void console.log("ERROR: Cannot do transition when one of the divs is null");switch(e.parentNode.style.cssText+=r("perspective","700px")+"; overflow: hidden;",e.style.cssText+="; position: absolute; z-index: 1019; "+r("backface-visibility","hidden"),
t.style.cssText+="; position: absolute; z-index: 1020; "+r("backface-visibility","hidden"),i){case"slide-left":e.style.cssText+="overflow: hidden; "+r("transform","translate3d(0, 0, 0)","translate(0, 0)"),t.style.cssText+="overflow: hidden; "+r("transform","translate3d("+s+"px, 0, 0)","translate("+s+"px, 0)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=r("transition",a+"s")+";"+r("transform","translate3d(0, 0, 0)","translate(0, 0)"),e.style.cssText+=r("transition",a+"s")+";"+r("transform","translate3d(-"+s+"px, 0, 0)","translate(-"+s+"px, 0)")},1);break;case"slide-right":e.style.cssText+="overflow: hidden; "+r("transform","translate3d(0, 0, 0)","translate(0, 0)"),t.style.cssText+="overflow: hidden; "+r("transform","translate3d(-"+s+"px, 0, 0)","translate(-"+s+"px, 0)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=r("transition",a+"s")+"; "+r("transform","translate3d(0px, 0, 0)","translate(0px, 0)"),e.style.cssText+=r("transition",a+"s")+"; "+r("transform","translate3d("+s+"px, 0, 0)","translate("+s+"px, 0)")},1);break;case"slide-down":e.style.cssText+="overflow: hidden; z-index: 1; "+r("transform","translate3d(0, 0, 0)","translate(0, 0)"),t.style.cssText+="overflow: hidden; z-index: 0; "+r("transform","translate3d(0, 0, 0)","translate(0, 0)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=r("transition",a+"s")+"; "+r("transform","translate3d(0, 0, 0)","translate(0, 0)"),e.style.cssText+=r("transition",a+"s")+"; "+r("transform","translate3d(0, "+o+"px, 0)","translate(0, "+o+"px)")},1);break;case"slide-up":e.style.cssText+="overflow: hidden; "+r("transform","translate3d(0, 0, 0)","translate(0, 0)"),t.style.cssText+="overflow: hidden; "+r("transform","translate3d(0, "+o+"px, 0)","translate(0, "+o+"px)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=r("transition",a+"s")+"; "+r("transform","translate3d(0, 0, 0)","translate(0, 0)"),e.style.cssText+=r("transition",a+"s")+"; "+r("transform","translate3d(0, 0, 0)","translate(0, 0)")},1);break;case"flip-left":e.style.cssText+="overflow: hidden; "+r("transform","rotateY(0deg)"),t.style.cssText+="overflow: hidden; "+r("transform","rotateY(-180deg)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=r("transition",a+"s")+"; "+r("transform","rotateY(0deg)"),e.style.cssText+=r("transition",a+"s")+"; "+r("transform","rotateY(180deg)")},1);break;case"flip-right":e.style.cssText+="overflow: hidden; "+r("transform","rotateY(0deg)"),t.style.cssText+="overflow: hidden; "+r("transform","rotateY(180deg)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=r("transition",a+"s")+"; "+r("transform","rotateY(0deg)"),e.style.cssText+=r("transition",a+"s")+"; "+r("transform","rotateY(-180deg)")},1);break;case"flip-down":e.style.cssText+="overflow: hidden; "+r("transform","rotateX(0deg)"),t.style.cssText+="overflow: hidden; "+r("transform","rotateX(180deg)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=r("transition",a+"s")+"; "+r("transform","rotateX(0deg)"),e.style.cssText+=r("transition",a+"s")+"; "+r("transform","rotateX(-180deg)")},1);break;case"flip-up":e.style.cssText+="overflow: hidden; "+r("transform","rotateX(0deg)"),t.style.cssText+="overflow: hidden; "+r("transform","rotateX(-180deg)"),$(t).show(),window.setTimeout(function(){t.style.cssText+=r("transition",a+"s")+"; "+r("transform","rotateX(0deg)"),e.style.cssText+=r("transition",a+"s")+"; "+r("transform","rotateX(180deg)")},1);break;case"pop-in":e.style.cssText+="overflow: hidden; "+r("transform","translate3d(0, 0, 0)","translate(0, 0)"),t.style.cssText+="overflow: hidden; "+r("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; "+r("transform","scale(.8)")+"; opacity: 0;",$(t).show(),window.setTimeout(function(){t.style.cssText+=r("transition",a+"s")+"; "+r("transform","scale(1)")+"; opacity: 1;",e.style.cssText+=r("transition",a+"s")+";"},1);break;case"pop-out":e.style.cssText+="overflow: hidden; "+r("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; "+r("transform","scale(1)")+"; opacity: 1;",t.style.cssText+="overflow: hidden; "+r("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; opacity: 0;",$(t).show(),window.setTimeout(function(){t.style.cssText+=r("transition",a+"s")+"; opacity: 1;",e.style.cssText+=r("transition",a+"s")+"; "+r("transform","scale(1.7)")+"; opacity: 0;"},1);break;default:e.style.cssText+="overflow: hidden; "+r("transform","translate3d(0, 0, 0)","translate(0, 0)"),t.style.cssText+="overflow: hidden; "+r("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; opacity: 0;",$(t).show(),window.setTimeout(function(){t.style.cssText+=r("transition",a+"s")+"; opacity: 1;",e.style.cssText+=r("transition",a+"s")},1)}setTimeout(function(){"slide-down"===i&&($(e).css("z-index","1019"),$(t).css("z-index","1020")),t&&$(t).css({opacity:"1","-webkit-transition":"","-moz-transition":"","-ms-transition":"","-o-transition":"","-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":"","-webkit-backface-visibility":"","-moz-backface-visibility":"","-ms-backface-visibility":"","-o-backface-visibility":""}),e&&($(e).css({opacity:"1","-webkit-transition":"","-moz-transition":"","-ms-transition":"","-o-transition":"","-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":"","-webkit-backface-visibility":"","-moz-backface-visibility":"","-ms-backface-visibility":"","-o-backface-visibility":""}),e.parentNode&&$(e.parentNode).css({"-webkit-perspective":"","-moz-perspective":"","-ms-perspective":"","-o-perspective":""})),"function"==typeof n&&n()},1e3*a)}function x(e,t,i){var n={};"object"==typeof t?n=t:(n.msg=t,n.spinner=i),n.msg||0===n.msg||(n.msg=""),w2utils.unlock(e),$(e).prepend('<div class="w2ui-lock"></div><div class="w2ui-lock-msg"></div>');var r=$(e).find(".w2ui-lock"),s=$(e).find(".w2ui-lock-msg");n.msg||s.css({"background-color":"transparent",border:"0px"}),n.spinner===!0&&(n.msg='<div class="w2ui-spinner" '+(n.msg?"":'style="width: 35px; height: 35px"')+"></div>"+n.msg),null!=n.opacity&&r.css("opacity",n.opacity),"function"==typeof r.fadeIn?(r.fadeIn(200),s.html(n.msg).fadeIn(200)):(r.show(),s.html(n.msg).show(0)),$().w2tag()}function _(e){$(e).find(".w2ui-lock").remove(),$(e).find(".w2ui-lock-msg").remove()}function k(e,t){var i=$(e),n={left:parseInt(i.css("border-left-width"))||0,right:parseInt(i.css("border-right-width"))||0,top:parseInt(i.css("border-top-width"))||0,bottom:parseInt(i.css("border-bottom-width"))||0},r={left:parseInt(i.css("margin-left"))||0,right:parseInt(i.css("margin-right"))||0,top:parseInt(i.css("margin-top"))||0,bottom:parseInt(i.css("margin-bottom"))||0},s={left:parseInt(i.css("padding-left"))||0,right:parseInt(i.css("padding-right"))||0,top:parseInt(i.css("padding-top"))||0,bottom:parseInt(i.css("padding-bottom"))||0};switch(t){case"top":return n.top+r.top+s.top;case"bottom":return n.bottom+r.bottom+s.bottom;case"left":return n.left+r.left+s.left;case"right":return n.right+r.right+s.right;case"width":return n.left+n.right+r.left+r.right+s.left+s.right+parseInt(i.width());case"height":return n.top+n.bottom+r.top+r.bottom+s.top+s.bottom+parseInt(i.height());case"+width":return n.left+n.right+r.left+r.right+s.left+s.right;case"+height":return n.top+n.bottom+r.top+r.bottom+s.top+s.bottom}return 0}function C(e){var t=this.settings.phrases[e];return null==t?e:t}function T(e){e||(e="en-us"),5===e.length&&(e="locale/"+e+".json"),$.ajax({url:e,type:"GET",dataType:"JSON",async:!1,cache:!1,success:function(e){w2utils.settings=$.extend(!0,w2utils.settings,e);var t=w2obj.grid.prototype;for(var i in t.buttons)t.buttons[i].caption=w2utils.lang(t.buttons[i].caption),t.buttons[i].hint=w2utils.lang(t.buttons[i].hint);t.msgDelete=w2utils.lang(t.msgDelete),t.msgNotJSON=w2utils.lang(t.msgNotJSON),t.msgRefresh=w2utils.lang(t.msgRefresh)},error:function(){console.log("ERROR: Cannot load locale "+e)}})}function S(){if(j.scrollBarSize)return j.scrollBarSize;var e='<div id="_scrollbar_width" style="position: absolute; top: -300px; width: 100px; height: 100px; overflow-y: scroll;">    <div style="height: 120px">1</div></div>';return $("body").append(e),j.scrollBarSize=100-$("#_scrollbar_width > div").width(),$("#_scrollbar_width").remove(),String(navigator.userAgent).indexOf("MSIE")>=0&&(j.scrollBarSize=j.scrollBarSize/2),j.scrollBarSize}function D(e,t){return e&&"undefined"!=typeof e.name?"undefined"!=typeof w2ui[e.name]?(console.log('ERROR: The parameter "name" is not unique. There are other objects already created with the same name (obj: '+e.name+")."),!1):!!w2utils.isAlphaNumeric(e.name)||(console.log('ERROR: The parameter "name" has to be alpha-numeric (a-z, 0-9, dash and underscore). '),!1):(console.log('ERROR: The parameter "name" is required but not supplied in $().'+t+"()."),!1)}function R(e,t,i,n){$.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++)if(t[r].id===e)return console.log('ERROR: The parameter "id='+e+'" is not unique within the current '+i+". (obj: "+n+")"),!1;return!0}function z(e){var t=[],i=e.replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,i,n,r,s,o){return t.push({name:r,optional:!!o}),i=i||"",""+(o?"":i)+"(?:"+(o?i:"")+(n||"")+(s||n&&"([^/.]+?)"||"([^/]+?)")+")"+(o||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)");return{path:new RegExp("^"+i+"$","i"),keys:t}}var j={},E={version:"1.4.3",settings:{locale:"en-us",date_format:"m/d/yyyy",date_display:"Mon d, yyyy",time_format:"hh:mi pm",currencyPrefix:"$",currencySuffix:"",currencyPrecision:2,groupSymbol:",",decimalSymbol:".",shortmonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullmonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortdays:["M","T","W","T","F","S","S"],fulldays:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],dataType:"HTTP",phrases:{}},isInt:e,isFloat:t,isMoney:i,isHex:n,isAlphaNumeric:r,isEmail:s,isDate:o,isTime:a,age:l,date:d,size:u,formatNumber:c,formatDate:h,formatTime:p,formatDateTime:f,stripTags:g,encodeTags:m,escapeId:v,base64encode:y,base64decode:w,transition:b,lock:x,unlock:_,lang:C,locale:T,getSize:k,scrollBarSize:S,checkName:D,checkUniqueId:R,parseRoute:z,isIOS:-1!=navigator.userAgent.toLowerCase().indexOf("iphone")||-1!=navigator.userAgent.toLowerCase().indexOf("ipod")||-1!=navigator.userAgent.toLowerCase().indexOf("ipad"),isIE:-1!=navigator.userAgent.toLowerCase().indexOf("msie")||-1!=navigator.userAgent.toLowerCase().indexOf("trident")};return E}();w2utils.event={on:function(e,t){return $.isPlainObject(e)||(e={type:e}),e=$.extend({type:null,execute:"before",target:null,onComplete:null},e),e.type?t?($.isArray(this.handlers)||(this.handlers=[]),void this.handlers.push({event:e,handler:t})):void console.log("ERROR: You must specify event handler function when calling .on() method of "+this.name):void console.log("ERROR: You must specify event type when calling .on() method of "+this.name)},off:function(e,t){if($.isPlainObject(e)||(e={type:e}),e=$.extend({},{type:null,execute:"before",target:null,onComplete:null},e),!e.type)return void console.log("ERROR: You must specify event type when calling .off() method of "+this.name);t||(t=null);for(var i=[],n=0,r=this.handlers.length;r>n;n++){var s=this.handlers[n];(s.event.type!==e.type&&"*"!==e.type||s.event.target!==e.target&&null!==e.target||s.handler!==t&&null!==t)&&i.push(s)}this.handlers=i},trigger:function(e){var e=$.extend({type:null,phase:"before",target:null},e,{isStopped:!1,isCancelled:!1,preventDefault:function(){this.isCancelled=!0},stopPropagation:function(){this.isStopped=!0}});"before"===e.phase&&(e.onComplete=null);var t,i,n;null==e.target&&(e.target=null),$.isArray(this.handlers)||(this.handlers=[]);for(var r=this.handlers.length-1;r>=0;r--){var s=this.handlers[r];if(!(s.event.type!==e.type&&"*"!==s.event.type||s.event.target!==e.target&&null!==s.event.target||s.event.execute!==e.phase&&"*"!==s.event.execute&&"*"!==s.event.phase)&&(e=$.extend({},s.event,e),t=[],n=RegExp(/\((.*?)\)/).exec(s.handler),n&&(t=n[1].split(/\s*,\s*/)),2===t.length?s.handler.call(this,e.target,e):s.handler.call(this,e),e.isStopped===!0||e.stop===!0))return e}var o="on"+e.type.substr(0,1).toUpperCase()+e.type.substr(1);return"before"===e.phase&&"function"==typeof this[o]&&(i=this[o],t=[],n=RegExp(/\((.*?)\)/).exec(i),n&&(t=n[1].split(/\s*,\s*/)),2===t.length?i.call(this,e.target,e):i.call(this,e),e.isStopped===!0||e.stop===!0)?e:null!=e.object&&"before"===e.phase&&"function"==typeof e.object[o]&&(i=e.object[o],t=[],n=RegExp(/\((.*?)\)/).exec(i),n&&(t=n[1].split(/\s*,\s*/)),2===t.length?i.call(this,e.target,e):i.call(this,e),e.isStopped===!0||e.stop===!0)?e:("after"===e.phase&&"function"==typeof e.onComplete&&e.onComplete.call(this,e),e)}},w2utils.keyboard=function(e){function t(){$(document).on("keydown",i),$(document).on("mousedown",n)}function i(e){var t=e.target.tagName;-1===$.inArray(t,["INPUT","SELECT","TEXTAREA"])&&"true"!==$(e.target).prop("contenteditable")&&o&&w2ui[o]&&"function"==typeof w2ui[o].keydown&&w2ui[o].keydown.call(w2ui[o],e)}function n(e){var t=(e.target.tagName,$(e.target).parents(".w2ui-reset"));if(t.length>0){var i=t.attr("name");w2ui[i]&&w2ui[i].keyboard&&(o=i)}}function r(e){return"undefined"!=typeof e&&(o=e),o}function s(){o=null}var o=null;return e.active=r,e.clear=s,t(),e}({}),function(){$.fn.w2render=function(e){$(this).length>0&&("string"==typeof e&&w2ui[e]&&w2ui[e].render($(this)[0]),"object"==typeof e&&e.render($(this)[0]))},$.fn.w2destroy=function(e){!e&&this.length>0&&(e=this.attr("name")),"string"==typeof e&&w2ui[e]&&w2ui[e].destroy(),"object"==typeof e&&e.destroy()},$.fn.w2marker=function(e){return $(this).each(""===e||null==e?function(e,t){t.innerHTML=t.innerHTML.replace(/\<span class=\"w2ui\-marker\"\>(.*)\<\/span\>/gi,"$1")}:function(t,i){function n(e){return'<span class="w2ui-marker">'+e+"</span>"}"string"==typeof e&&(e=[e]),i.innerHTML=i.innerHTML.replace(/\<span class=\"w2ui\-marker\"\>(.*)\<\/span\>/gi,"$1");for(var r in e){var s=e[r];"string"!=typeof s&&(s=String(s)),s=s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&").replace(/&/g,"&amp;").replace(/</g,"&gt;").replace(/>/g,"&lt;");var o=new RegExp(s+"(?!([^<]+)?>)","gi");i.innerHTML=i.innerHTML.replace(o,n)}})},$.fn.w2tag=function(e,t){return $.isPlainObject(t)||(t={}),$.isPlainObject(t.css)||(t.css={}),"undefined"==typeof t.class&&(t.class=""),0===$(this).length?void $(".w2ui-tag").each(function(e,t){var i=$(t).data("options");null==i&&(i={}),$($(t).data("taged-el")).removeClass(i.class),clearInterval($(t).data("timer")),$(t).remove()}):$(this).each(function(i,n){function r(){$tag=$("#w2ui-tag-"+o),$tag.length<=0||(clearInterval($tag.data("timer")),$tag.remove(),$(n).off("keypress",r).removeClass(t.class),$(n).length>0&&($(n)[0].style.cssText=l),"function"==typeof t.onHide&&t.onHide())}var s=n.id,o=w2utils.escapeId(n.id);if(""===e||null==e)$("#w2ui-tag-"+o).css("opacity",0),setTimeout(function(){clearInterval($("#w2ui-tag-"+o).data("timer")),$("#w2ui-tag-"+o).remove()},300);else{clearInterval($("#w2ui-tag-"+o).data("timer")),$("#w2ui-tag-"+o).remove(),$("body").append('<div id="w2ui-tag-'+s+'" class="w2ui-tag '+($(n).parents(".w2ui-popup").length>0?"w2ui-tag-popup":"")+'" style=""></div>');var a=setInterval(function(){return 0===$(n).length||0===$(n).offset().left&&0===$(n).offset().top?(clearInterval($("#w2ui-tag-"+o).data("timer")),void r()):void($("#w2ui-tag-"+o).data("position")!==$(n).offset().left+n.offsetWidth+"x"+$(n).offset().top&&$("#w2ui-tag-"+o).css({"-webkit-transition":".2s","-moz-transition":".2s","-ms-transition":".2s","-o-transition":".2s",left:$(n).offset().left+n.offsetWidth+"px",top:$(n).offset().top+"px"}).data("position",$(n).offset().left+n.offsetWidth+"x"+$(n).offset().top))},100);setTimeout(function(){$(n).offset()&&($("#w2ui-tag-"+o).css({opacity:"1",left:$(n).offset().left+n.offsetWidth+"px",top:$(n).offset().top+"px"}).html('<div style="margin-top: -2px 0px 0px -2px; white-space: nowrap;"> <div class="w2ui-tag-body">'+e+"</div> </div>").data("text",e).data("taged-el",n).data("options",t).data("position",$(n).offset().left+n.offsetWidth+"x"+$(n).offset().top).data("timer",a),$(n).off("keypress",r).on("keypress",r).off("change",r).on("change",r).css(t.css).addClass(t.class),"function"==typeof t.onShow&&t.onShow())},1);var l="";$(n).length>0&&(l=$(n)[0].style.cssText)}})},$.fn.w2overlay=function(e,t){function i(){var e=$("#w2ui-overlay"+o);if(e.data("element")===s[0]&&0!==e.length){var t=$(s).offset().left+"x"+$(s).offset().top;e.data("position")!==t?n():setTimeout(i,250)}}function n(){var e=$("#w2ui-overlay"+o);if(e.data("keepOpen")===!0)return void e.removeData("keepOpen");var i;"function"==typeof t.onHide&&(i=t.onHide()),i!==!1&&(e.remove(),$(document).off("click",n),clearInterval(e.data("timer")))}function r(){var e=$("#w2ui-overlay"+o),i=e.find(" > div");if(e.length>0){i.height("auto").width("auto");var n=!1,a=!1,l=i.height(),d=i.width();switch(t.width&&t.width<d&&(d=t.width),30>d&&(d=30),t.tmp.contentHeight&&(l=t.tmp.contentHeight,i.height(l),setTimeout(function(){i.height()>i.find("div.menu > table").height()&&i.find("div.menu").css("overflow-y","hidden")},1),setTimeout(function(){i.find("div.menu").css("overflow-y","auto")},10)),t.tmp.contentWidth&&(d=t.tmp.contentWidth,i.width(d),setTimeout(function(){i.width()>i.find("div.menu > table").width()&&i.find("div.menu").css("overflow-x","hidden")},1),setTimeout(function(){i.find("div.menu").css("overflow-y","auto")},10)),t.align){case"both":t.left=17,0===t.width&&(t.width=w2utils.getSize($(s),"width"));break;case"left":t.left=17;break;case"right":t.tipLeft=d-45,t.left=w2utils.getSize($(s),"width")-d+10}var u=(d-17)/2,c=t.left,h=t.width,p=t.tipLeft;h=30!==d||h?t.width?t.width:"auto":30,25>u&&(c=25-u,p=Math.floor(u)),e.css({top:s.offset().top+w2utils.getSize(s,"height")+t.top+7+"px",left:(s.offset().left>25?s.offset().left:25)+c+"px","min-width":h,"min-height":t.height?t.height:"auto"});var f=window.innerHeight+$(document).scrollTop()-i.offset().top-7,g=window.innerWidth+$(document).scrollLeft()-i.offset().left-7;f>-50&&210>f||t.openAbove===!0?(f=i.offset().top-$(document).scrollTop()-7,t.maxHeight&&f>t.maxHeight&&(f=t.maxHeight),l>f&&(a=!0,i.height(f).width(d).css({"overflow-y":"auto"}),l=f),e.css("top",$(s).offset().top-l-24+t.top+"px"),e.find(">style").html("#w2ui-overlay"+o+":before { display: none; margin-left: "+parseInt(p)+"px; }#w2ui-overlay"+o+":after { display: block; margin-left: "+parseInt(p)+"px; }")):(t.maxHeight&&f>t.maxHeight&&(f=t.maxHeight),l>f&&(a=!0,i.height(f).width(d).css({"overflow-y":"auto"})),e.find(">style").html("#w2ui-overlay"+o+":before { display: block; margin-left: "+parseInt(p)+"px; }#w2ui-overlay"+o+":after { display: none; margin-left: "+parseInt(p)+"px; }")),d=i.width(),g=window.innerWidth+$(document).scrollLeft()-i.offset().left-7,t.maxWidth&&g>t.maxWidth&&(g=t.maxWidth),d>g&&"both"!==t.align&&(t.align="right",setTimeout(function(){r()},1)),a&&n&&i.width(d+w2utils.scrollBarSize()+2)}}var s=this,o="",a={name:null,html:"",align:"none",left:0,top:0,tipLeft:30,width:0,height:0,maxWidth:null,maxHeight:null,style:"",class:"",onShow:null,onHide:null,openAbove:!1,tmp:{}};1==arguments.length&&(t="object"==typeof e?e:{html:e}),2==arguments.length&&(t.html=e),$.isPlainObject(t)||(t={}),t=$.extend({},a,t),t.name&&(o="-"+t.name);var l;if(0===this.length||""===t.html||null==t.html)return $("#w2ui-overlay"+o).length>0?(l=$("#w2ui-overlay"+o)[0].hide,"function"==typeof l&&l()):$("#w2ui-overlay"+o).remove(),$(this);$("#w2ui-overlay"+o).length>0&&(l=$("#w2ui-overlay"+o)[0].hide,$(document).off("click",l),"function"==typeof l&&l()),$("body").append('<div id="w2ui-overlay'+o+'" style="display: none"        class="w2ui-reset w2ui-overlay '+($(this).parents(".w2ui-popup, .w2ui-overlay-popup").length>0?"w2ui-overlay-popup":"")+'">    <style></style>    <div style="'+t.style+'" class="'+t.class+'"></div></div>');var d=$("#w2ui-overlay"+o),u=d.find(" > div");u.html(t.html);var c=u.css("background-color");return null!=c&&"rgba(0, 0, 0, 0)"!==c&&"transparent"!==c&&d.css("background-color",c),d.data("element",s.length>0?s[0]:null).data("options",t).data("position",$(s).offset().left+"x"+$(s).offset().top).fadeIn("fast").on("mousedown",function(e){$("#w2ui-overlay"+o).data("keepOpen",!0),-1===["INPUT","TEXTAREA","SELECT"].indexOf(e.target.tagName)&&e.preventDefault()}),d[0].hide=n,d[0].resize=r,r(),setTimeout(function(){r(),$(document).off("click",n).on("click",n),"function"==typeof t.onShow&&t.onShow()},10),i(),$(this)},$.fn.w2menu=function(e,t){function i(){setTimeout(function(){$("#w2ui-overlay"+a+" tr.w2ui-selected").removeClass("w2ui-selected");var e=$("#w2ui-overlay"+a+" tr[index="+t.index+"]"),i=$("#w2ui-overlay"+a+" div.menu").scrollTop();if(e.addClass("w2ui-selected"),t.tmp&&(t.tmp.contentHeight=$("#w2ui-overlay"+a+" table").height()+(t.search?50:10)),t.tmp&&(t.tmp.contentWidth=$("#w2ui-overlay"+a+" table").width()),$("#w2ui-overlay"+a).length>0&&$("#w2ui-overlay"+a)[0].resize(),e.length>0){var n=e[0].offsetTop-5,r=$("#w2ui-overlay"+a+" div.menu"),s=r.height();$("#w2ui-overlay"+a+" div.menu").scrollTop(i),(i>n||n+e.height()>i+s)&&$("#w2ui-overlay"+a+" div.menu").animate({scrollTop:n-(s-2*e.height())/2},200,"linear")}},1)}function n(e){var n=this.value,r=e.keyCode,s=!1;switch(r){case 13:$("#w2ui-overlay"+a).remove(),$.fn.w2menuHandler(e,t.index);break;case 9:case 27:$("#w2ui-overlay"+a).remove(),$.fn.w2menuHandler(e,-1);break;case 38:for(t.index=w2utils.isInt(t.index)?parseInt(t.index):0,t.index--;t.index>0&&t.items[t.index].hidden;)t.index--;if(0===t.index&&t.items[t.index].hidden)for(;t.items[t.index]&&t.items[t.index].hidden;)t.index++;t.index<0&&(t.index=0),s=!0;break;case 40:for(t.index=w2utils.isInt(t.index)?parseInt(t.index):0,t.index++;t.index<t.items.length-1&&t.items[t.index].hidden;)t.index++;if(t.index===t.items.length-1&&t.items[t.index].hidden)for(;t.items[t.index]&&t.items[t.index].hidden;)t.index--;t.index>=t.items.length&&(t.index=t.items.length-1),s=!0}if(!s){var l=0;for(var d in t.items){var u=t.items[d],c="",h="";-1!==["is","begins with"].indexOf(t.match)&&(c="^"),-1!==["is","ends with"].indexOf(t.match)&&(h="$");try{var p=new RegExp(c+n+h,"i");u.hidden=!p.test(u.text)&&"..."!==u.text}catch(e){}"enum"===o.type&&-1!==$.inArray(u.id,ids)&&(u.hidden=!0),u.hidden!==!0&&l++}for(t.index=0;t.index<t.items.length-1&&t.items[t.index].hidden;)t.index++;0>=l&&(t.index=-1)}$(o).w2menu("refresh",t),i()}function r(){if(t.spinner)return'<table class="w2ui-drop-menu"><tr><td style="padding: 5px 10px 10px 10px; text-align: center">    <div class="w2ui-spinner" style="width: 18px; height: 18px; position: relative; top: 5px;"></div>     <div style="display: inline-block; padding: 3px; color: #999;">'+w2utils.lang("Loading...")+"</div></td></tr></table>";for(var e=0,i='<table cellspacing="0" cellpadding="0" class="w2ui-drop-menu">',n=null,r=null,s=0;s<t.items.length;s++){var o=t.items[s];if("string"==typeof o?o={id:o,text:o}:(null!=o.text&&null==o.id&&(o.id=o.text),null==o.text&&null!=o.id&&(o.text=o.id),null!=o.caption&&(o.text=o.caption),n=o.img,r=o.icon,null==n&&(n=null),null==r&&(r=null)),o.hidden!==!0){var l="",d=o.text;if("function"==typeof t.render&&(d=t.render(o,t)),n&&(l='<td class="menu-icon"><div class="w2ui-tb-image w2ui-icon '+n+'"></div></td>'),r&&(l='<td class="menu-icon" align="center"><span class="w2ui-icon '+r+'"></span></td>'),"undefined"==typeof d||""===d||/^-+$/.test(d))i+='<tr><td colspan="2" style="padding: 6px; pointer-events: none"><div style="border-top: 1px solid silver;"></div></td></tr>';else{var u=e%2===0?"w2ui-item-even":"w2ui-item-odd";t.altRows!==!0&&(u="");var c=1;""==l&&c++,null==o.count&&c++,i+='<tr index="'+s+'" style="'+(o.style?o.style:"")+'"         class="'+u+" "+(t.index===s?"w2ui-selected":"")+" "+(o.disabled===!0?"w2ui-disabled":"")+"\"        onmousedown=\"$(this).parent().find('tr').removeClass('w2ui-selected'); $(this).addClass('w2ui-selected');\"        onclick=\"event.stopPropagation();                if ("+(o.disabled===!0?"true":"false")+") return;               $('#w2ui-overlay"+a+"').remove();                $.fn.w2menuHandler(event, '"+s+"');\">"+l+'   <td class="menu-text" colspan="'+c+'">'+d+'</td>   <td class="menu-count">'+(null!=o.count?"<span>"+o.count+"</span>":"")+"</td></tr>",e++}}t.items[s]=o}return 0===e&&(i+='<tr><td style="padding: 13px; color: #999; text-align: center">'+t.msgNoItems+"</div></td></tr>"),i+="</table>"}var s={index:null,items:[],render:null,msgNoItems:"No items",onSelect:null,tmp:{}},o=this,a="";if("refresh"!==e){1===arguments.length?t=e:t.items=e,"object"!=typeof t&&(t={}),t=$.extend({},s,t),$.fn.w2menuOptions=t,t.name&&(a="-"+t.name),"function"==typeof t.select&&"function"!=typeof t.onSelect&&(t.onSelect=t.select),"function"==typeof t.onRender&&"function"!=typeof t.render&&(t.render=t.onRender),$.fn.w2menuHandler=function(e,i){"function"==typeof t.onSelect&&setTimeout(function(){t.onSelect({index:i,item:t.items[i],originalEvent:e})},10)};var l="";if(t.search){l+='<div style="position: absolute; top: 0px; height: 40px; left: 0px; right: 0px; border-bottom: 1px solid silver; background-color: #ECECEC; padding: 8px 5px;">    <div class="w2ui-icon icon-search" style="position: absolute; margin-top: 4px; margin-left: 6px; width: 11px; background-position: left !important;"></div>    <input id="menu-search" type="text" style="width: 100%; outline: none; padding-left: 20px;" onclick="event.stopPropagation();"></div>',t.style+=";background-color: #ECECEC",t.index=0;for(var d in t.items)t.items[d].hidden=!1}l+='<div class="menu" style="position: absolute; top: '+(t.search?40:0)+'px; bottom: 0px; width: 100%; overflow: auto;">'+r()+"</div>";var u=$(this).w2overlay(l,t);return setTimeout(function(){if($("#w2ui-overlay"+a+" #menu-search").on("keyup",n).on("keydown",function(e){9===e.keyCode&&(e.stopPropagation(),e.preventDefault())}),t.search){if(-1!=["text","password"].indexOf($(o)[0].type)||"texarea"==$(o)[0].tagName)return;$("#w2ui-overlay"+a+" #menu-search").focus()}},200),i(),u}if($("#w2ui-overlay"+a).length>0){t=$.extend($.fn.w2menuOptions,t);var c=$("#w2ui-overlay"+a+" div.menu").scrollTop();$("#w2ui-overlay"+a+" div.menu").html(r()),$("#w2ui-overlay"+a+" div.menu").scrollTop(c),i()}else $(this).w2menu(t)}}(),function(){var w2grid=function(e){this.name=null,this.box=null,this.header="",this.url="",this.routeData={},this.columns=[],this.columnGroups=[],this.records=[],this.summary=[],this.searches=[],this.searchData=[],this.sortData=[],this.postData={},this.toolbar={},this.show={header:!1,toolbar:!1,footer:!1,columnHeaders:!0,lineNumbers:!1,expandColumn:!1,selectColumn:!1,emptyRecords:!0,toolbarReload:!0,toolbarColumns:!0,toolbarSearch:!0,toolbarAdd:!1,toolbarEdit:!1,toolbarDelete:!1,toolbarSave:!1,selectionBorder:!0,recordTitles:!0,skipRecords:!0},this.autoLoad=!0,this.fixedBody=!0,this.recordHeight=24,this.keyboard=!0,this.selectType="row",this.multiSearch=!0,this.multiSelect=!0,this.multiSort=!0,this.reorderColumns=!1,this.reorderRows=!1,this.markSearch=!0,this.total=0,this.limit=100,this.offset=0,this.style="",this.ranges=[],this.menu=[],this.method=null,this.recid=null,this.parser=null,this.onAdd=null,this.onEdit=null,this.onRequest=null,this.onLoad=null,this.onDelete=null,this.onDeleted=null,this.onSubmit=null,this.onSave=null,this.onSelect=null,this.onUnselect=null,this.onClick=null,this.onDblClick=null,this.onContextMenu=null,this.onMenuClick=null,this.onColumnClick=null,this.onColumnResize=null,this.onSort=null,this.onSearch=null,this.onChange=null,this.onRestore=null,this.onExpand=null,this.onCollapse=null,this.onError=null,this.onKeydown=null,this.onToolbar=null,this.onColumnOnOff=null,this.onCopy=null,this.onPaste=null,this.onSelectionExtend=null,this.onEditField=null,this.onRender=null,this.onRefresh=null,this.onReload=null,this.onResize=null,this.onDestroy=null,this.onStateSave=null,this.onStateRestore=null,this.last={field:"all",caption:w2utils.lang("All Fields"),logic:"OR",search:"",searchIds:[],selection:{indexes:[],columns:{}},multi:!1,scrollTop:0,scrollLeft:0,sortData:null,sortCount:0,xhr:null,range_start:null,range_end:null,sel_ind:null,sel_col:null,sel_type:null,edit_col:null},$.extend(!0,this,w2obj.grid,e)};$.fn.w2grid=function(e){if("object"==typeof e||!e){if(!w2utils.checkName(e,"w2grid"))return;var t=e.columns,i=e.columnGroups,n=e.records,r=e.searches,s=e.searchData,o=e.sortData,a=e.postData,l=e.toolbar,d=new w2grid(e);$.extend(d,{postData:{},records:[],columns:[],searches:[],toolbar:{},sortData:[],searchData:[],handlers:[]}),null!=d.onExpand&&(d.show.expandColumn=!0),$.extend(!0,d.toolbar,l);for(var u in t)d.columns[u]=$.extend(!0,{},t[u]);for(var u in i)d.columnGroups[u]=$.extend(!0,{},i[u]);for(var u in r)d.searches[u]=$.extend(!0,{},r[u]);for(var u in s)d.searchData[u]=$.extend(!0,{},s[u]);for(var u in o)d.sortData[u]=$.extend(!0,{},o[u]);d.postData=$.extend(!0,{},a);for(var c in n){if(null==n[c].recid||"undefined"==typeof n[c].recid)return void console.log("ERROR: Cannot add records without recid. (obj: "+d.name+")");d.records[c]=$.extend(!0,{},n[c])}for(var h in d.columns){var p=d.columns[h];if("undefined"!=typeof p.searchable&&null==d.getSearch(p.field)){var f=p.searchable,g="";p.searchable===!0&&(f="text",g='size="20"'),d.addSearch({field:p.field,caption:p.caption,type:f,attr:g})}}return d.initToolbar(),0!==$(this).length&&d.render($(this)[0]),w2ui[d.name]=d,d}if(w2ui[$(this).attr("name")]){var m=w2ui[$(this).attr("name")];return m[e].apply(m,Array.prototype.slice.call(arguments,1)),this}console.log("ERROR: Method "+e+" does not exist on jQuery.w2grid")},w2grid.prototype={msgDelete:w2utils.lang("Are you sure you want to delete selected records?"),msgNotJSON:w2utils.lang("Returned data is not in valid JSON format."),msgAJAXerror:w2utils.lang("AJAX error. See console for more details."),msgRefresh:w2utils.lang("Refreshing..."),buttons:{reload:{type:"button",id:"w2ui-reload",icon:"w2ui-icon-reload",hint:w2utils.lang("Reload data in the list")},columns:{type:"drop",id:"w2ui-column-on-off",icon:"w2ui-icon-columns",hint:w2utils.lang("Show/hide columns"),arrow:!1,html:""},search:{type:"html",id:"w2ui-search",html:'<div class="w2ui-icon icon-search-down w2ui-search-down" title="Select Search Field" onclick="var obj = w2ui[$(this).parents(\'div.w2ui-grid\').attr(\'name\')]; obj.searchShowFields();"></div>'},"search-go":{type:"check",id:"w2ui-search-advanced",caption:w2utils.lang("Search..."),hint:w2utils.lang("Open Search Fields")},add:{type:"button",id:"w2ui-add",caption:w2utils.lang("Add New"),hint:w2utils.lang("Add new record"),icon:"w2ui-icon-plus"},edit:{type:"button",id:"w2ui-edit",caption:w2utils.lang("Edit"),hint:w2utils.lang("Edit selected record"),icon:"w2ui-icon-pencil",disabled:!0},delete:{type:"button",id:"w2ui-delete",caption:w2utils.lang("Delete"),hint:w2utils.lang("Delete selected records"),icon:"w2ui-icon-cross",disabled:!0},save:{type:"button",id:"w2ui-save",caption:w2utils.lang("Save"),hint:w2utils.lang("Save changed records"),icon:"w2ui-icon-check"}},add:function(e){$.isArray(e)||(e=[e]);var t=0;for(var i in e)this.recid&&"undefined"==typeof e[i].recid&&(e[i].recid=e[i][this.recid]),null!=e[i].recid&&"undefined"!=typeof e[i].recid?(this.records.push(e[i]),t++):console.log("ERROR: Cannot add record without recid. (obj: "+this.name+")");var n="object"!=typeof this.url?this.url:this.url.get;return n||(this.total=this.records.length,this.localSort(),this.localSearch()),this.refresh(),t},find:function(e,t){("undefined"==typeof e||null==e)&&(e={});var i=[],n=!1;for(var r in e)-1!=String(r).indexOf(".")&&(n=!0);for(var s=0;s<this.records.length;s++){var o=!0;for(var r in e){var a=this.records[s][r];n&&-1!=String(r).indexOf(".")&&(a=this.parseField(this.records[s],r)),e[r]!==a&&(o=!1)}o&&t!==!0&&i.push(this.records[s].recid),
o&&t===!0&&i.push(s)}return i},set:function(e,t,i){if("object"==typeof e&&(i=t,t=e,e=null),null==e){for(var n in this.records)$.extend(!0,this.records[n],t);i!==!0&&this.refresh()}else{var r=this.get(e,!0);if(null==r)return!1;var s=!this.records[r]||this.records[r].recid!=e;s?$.extend(!0,this.summary[r],t):$.extend(!0,this.records[r],t),i!==!0&&this.refreshRow(e)}return!0},get:function(e,t){for(var i=0;i<this.records.length;i++)if(this.records[i].recid==e)return t===!0?i:this.records[i];for(var i=0;i<this.summary.length;i++)if(this.summary[i].recid==e)return t===!0?i:this.summary[i];return null},remove:function(){for(var e=0,t=0;t<arguments.length;t++)for(var i=this.records.length-1;i>=0;i--)this.records[i].recid==arguments[t]&&(this.records.splice(i,1),e++);var n="object"!=typeof this.url?this.url:this.url.get;return n||(this.localSort(),this.localSearch()),this.refresh(),e},addColumn:function(e,t){var i=0;1==arguments.length?(t=e,e=this.columns.length):("string"==typeof e&&(e=this.getColumn(e,!0)),null===e&&(e=this.columns.length)),$.isArray(t)||(t=[t]);for(var n in t)this.columns.splice(e,0,t[n]),e++,i++;return this.refresh(),i},removeColumn:function(){for(var e=0,t=0;t<arguments.length;t++)for(var i=this.columns.length-1;i>=0;i--)this.columns[i].field==arguments[t]&&(this.columns.splice(i,1),e++);return this.refresh(),e},getColumn:function(e,t){for(var i=0;i<this.columns.length;i++)if(this.columns[i].field==e)return t===!0?i:this.columns[i];return null},toggleColumn:function(){for(var e=0,t=0;t<arguments.length;t++)for(var i=this.columns.length-1;i>=0;i--){var n=this.columns[i];n.field==arguments[t]&&(n.hidden=!n.hidden,e++)}return this.refresh(),e},showColumn:function(){for(var e=0,t=0;t<arguments.length;t++)for(var i=this.columns.length-1;i>=0;i--){var n=this.columns[i];n.gridMinWidth&&delete n.gridMinWidth,n.field==arguments[t]&&n.hidden!==!1&&(n.hidden=!1,e++)}return this.refresh(),e},hideColumn:function(){for(var e=0,t=0;t<arguments.length;t++)for(var i=this.columns.length-1;i>=0;i--){var n=this.columns[i];n.field==arguments[t]&&n.hidden!==!0&&(n.hidden=!0,e++)}return this.refresh(),e},addSearch:function(e,t){var i=0;1==arguments.length?(t=e,e=this.searches.length):("string"==typeof e&&(e=this.getSearch(e,!0)),null===e&&(e=this.searches.length)),$.isArray(t)||(t=[t]);for(var n in t)this.searches.splice(e,0,t[n]),e++,i++;return this.searchClose(),i},removeSearch:function(){for(var e=0,t=0;t<arguments.length;t++)for(var i=this.searches.length-1;i>=0;i--)this.searches[i].field==arguments[t]&&(this.searches.splice(i,1),e++);return this.searchClose(),e},getSearch:function(e,t){for(var i=0;i<this.searches.length;i++)if(this.searches[i].field==e)return t===!0?i:this.searches[i];return null},toggleSearch:function(){for(var e=0,t=0;t<arguments.length;t++)for(var i=this.searches.length-1;i>=0;i--)this.searches[i].field==arguments[t]&&(this.searches[i].hidden=!this.searches[i].hidden,e++);return this.searchClose(),e},showSearch:function(){for(var e=0,t=0;t<arguments.length;t++)for(var i=this.searches.length-1;i>=0;i--)this.searches[i].field==arguments[t]&&this.searches[i].hidden!==!1&&(this.searches[i].hidden=!1,e++);return this.searchClose(),e},hideSearch:function(){for(var e=0,t=0;t<arguments.length;t++)for(var i=this.searches.length-1;i>=0;i--)this.searches[i].field==arguments[t]&&this.searches[i].hidden!==!0&&(this.searches[i].hidden=!0,e++);return this.searchClose(),e},getSearchData:function(e){for(var t in this.searchData)if(this.searchData[t].field==e)return this.searchData[t];return null},localSort:function(e){var t="object"!=typeof this.url?this.url:this.url.get;if(t)return void console.log("ERROR: grid.localSort can only be used on local data source, grid.url should be empty.");if(!$.isEmptyObject(this.sortData)){var i=(new Date).getTime(),n=this;n.prepareData();for(var r in this.sortData){var s=this.getColumn(this.sortData[r].field);if(!s)return;"string"==typeof s.render&&(-1!=["date","age"].indexOf(s.render.split(":")[0])&&(this.sortData[r].field_=s.field+"_"),-1!=["time"].indexOf(s.render.split(":")[0])&&(this.sortData[r].field_=s.field+"_"))}return this.records.sort(function(e,t){var i=0;for(var r in n.sortData){var s=n.sortData[r].field;n.sortData[r].field_&&(s=n.sortData[r].field_);var o=e[s],a=t[s];if(-1!=String(s).indexOf(".")&&(o=n.parseField(e,s),a=n.parseField(t,s)),"string"==typeof o&&(o=$.trim(o.toLowerCase())),"string"==typeof a&&(a=$.trim(a.toLowerCase())),o>a&&(i="asc"==n.sortData[r].direction?1:-1),a>o&&(i="asc"==n.sortData[r].direction?-1:1),"object"!=typeof o&&"object"==typeof a&&(i=-1),"object"!=typeof a&&"object"==typeof o&&(i=1),null==o&&null!=a&&(i=1),null!=o&&null==a&&(i=-1),0!=i)break}return i}),i=(new Date).getTime()-i,e!==!0&&setTimeout(function(){n.status(w2utils.lang("Sorting took")+" "+i/1e3+" "+w2utils.lang("sec"))},10),i}},localSearch:function(e){var t="object"!=typeof this.url?this.url:this.url.get;if(t)return void console.log("ERROR: grid.localSearch can only be used on local data source, grid.url should be empty.");var i=(new Date).getTime(),n=this;if(this.total=this.records.length,this.last.searchIds=[],this.prepareData(),this.searchData.length>0&&!t){this.total=0;for(var r in this.records){var s=this.records[r],o=0;for(var a in this.searchData){var l=this.searchData[a],d=this.getSearch(l.field);if(null!=l){null==d&&(d={field:l.field,type:l.type});var u=String(n.parseField(s,d.field)).toLowerCase();if("undefined"!=typeof l.value)if($.isArray(l.value))var c=l.value[0],h=l.value[1];else var c=String(l.value).toLowerCase();switch(l.operator){case"is":if(s[d.field]==l.value&&o++,"date"==d.type){var u=w2utils.formatDate(s[d.field+"_"],"yyyy-mm-dd"),c=w2utils.formatDate(c,"yyyy-mm-dd");u==c&&o++}if("time"==d.type){var u=w2utils.formatTime(s[d.field+"_"],"h24:mi"),c=w2utils.formatTime(c,"h24:mi");u==c&&o++}break;case"between":if(-1!=["int","float","money","currency","percent"].indexOf(d.type)&&parseFloat(s[d.field])>=parseFloat(c)&&parseFloat(s[d.field])<=parseFloat(h)&&o++,"date"==d.type){var u=s[d.field+"_"],c=w2utils.isDate(c,w2utils.settings.date_format,!0),h=w2utils.isDate(h,w2utils.settings.date_format,!0);null!=h&&(h=new Date(h.getTime()+864e5)),u>=c&&h>u&&o++}if("time"==d.type){var u=s[d.field+"_"],c=w2utils.isTime(c,!0),h=w2utils.isTime(h,!0);c=(new Date).setHours(c.hours,c.minutes,c.seconds?c.seconds:0,0),h=(new Date).setHours(h.hours,h.minutes,h.seconds?h.seconds:0,0),u>=c&&h>u&&o++}break;case"in":var p=l.value;l.svalue&&(p=l.svalue),-1!==p.indexOf(u)&&o++;break;case"not in":var p=l.value;l.svalue&&(p=l.svalue),-1==p.indexOf(u)&&o++;break;case"begins":case"begins with":0==u.indexOf(c)&&o++;break;case"contains":u.indexOf(c)>=0&&o++;break;case"ends":case"ends with":u.indexOf(c)>=0&&u.indexOf(c)==u.length-c.length&&o++}}}("OR"==this.last.logic&&0!=o||"AND"==this.last.logic&&o==this.searchData.length)&&this.last.searchIds.push(parseInt(r))}this.total=this.last.searchIds.length}return i=(new Date).getTime()-i,e!==!0&&setTimeout(function(){n.status(w2utils.lang("Search took")+" "+i/1e3+" "+w2utils.lang("sec"))},10),i},getRangeData:function(e,t){var i=this.get(e[0].recid,!0),n=this.get(e[1].recid,!0),r=e[0].column,s=e[1].column,o=[];if(r==s)for(var a=i;n>=a;a++){var l=this.records[a],d=l[this.columns[r].field]||null;o.push(t!==!0?d:{data:d,column:r,index:a,record:l})}else if(i==n)for(var l=this.records[i],u=r;s>=u;u++){var d=l[this.columns[u].field]||null;o.push(t!==!0?d:{data:d,column:u,index:i,record:l})}else for(var a=i;n>=a;a++){var l=this.records[a];o.push([]);for(var u=r;s>=u;u++){var d=l[this.columns[u].field];o[o.length-1].push(t!==!0?d:{data:d,column:u,index:a,record:l})}}return o},addRange:function(e){var t=0;if("row"==this.selectType)return t;$.isArray(e)||(e=[e]);for(var i in e){if("object"!=typeof e[i]&&(e[i]={name:"selection"}),"selection"==e[i].name){if(this.show.selectionBorder===!1)continue;var n=this.getSelection();if(0==n.length){this.removeRange(e[i].name);continue}var r=n[0],s=n[n.length-1];$("#grid_"+this.name+"_rec_"+r.recid+" td[col="+r.column+"]"),$("#grid_"+this.name+"_rec_"+s.recid+" td[col="+s.column+"]")}else{var r=e[i].range[0],s=e[i].range[1];$("#grid_"+this.name+"_rec_"+r.recid+" td[col="+r.column+"]"),$("#grid_"+this.name+"_rec_"+s.recid+" td[col="+s.column+"]")}if(r){var o={name:e[i].name,range:[{recid:r.recid,column:r.column},{recid:s.recid,column:s.column}],style:e[i].style||""},a=!1;for(var l in this.ranges)if(this.ranges[l].name==e[i].name){a=i;break}a!==!1?this.ranges[a]=o:this.ranges.push(o),t++}}return this.refreshRanges(),t},removeRange:function(){for(var e=0,t=0;t<arguments.length;t++){var i=arguments[t];$("#grid_"+this.name+"_"+i).remove();for(var n=this.ranges.length-1;n>=0;n--)this.ranges[n].name==i&&(this.ranges.splice(n,1),e++)}return e},refreshRanges:function(){function e(e){var r=n.getSelection();n.last.move={type:"expand",x:e.screenX,y:e.screenY,divX:0,divY:0,recid:r[0].recid,column:r[0].column,originalRange:[{recid:r[0].recid,column:r[0].column},{recid:r[r.length-1].recid,column:r[r.length-1].column}],newRange:[{recid:r[0].recid,column:r[0].column},{recid:r[r.length-1].recid,column:r[r.length-1].column}]},$(document).off("mousemove",t).on("mousemove",t),$(document).off("mouseup",i).on("mouseup",i)}function t(e){var t=n.last.move;if(t&&"expand"==t.type){t.divX=e.screenX-t.x,t.divY=e.screenY-t.y;var i,r,s=e.originalEvent.target;if("TD"!=s.tagName&&(s=$(s).parents("td")[0]),"undefined"!=typeof $(s).attr("col")&&(r=parseInt($(s).attr("col"))),s=$(s).parents("tr")[0],i=$(s).attr("recid"),t.newRange[1].recid!=i||t.newRange[1].column!=r){var o=$.extend({},t.newRange);return t.newRange=[{recid:t.recid,column:t.column},{recid:i,column:r}],h=n.trigger($.extend(h,{originalRange:t.originalRange,newRange:t.newRange})),h.isCancelled===!0?(t.newRange=o,void(h.newRange=o)):(n.removeRange("grid-selection-expand"),void n.addRange({name:"grid-selection-expand",range:h.newRange,style:"background-color: rgba(100,100,100,0.1); border: 2px dotted rgba(100,100,100,0.5);"}))}}}function i(){n.removeRange("grid-selection-expand"),delete n.last.move,$(document).off("mousemove",t),$(document).off("mouseup",i),n.trigger($.extend(h,{phase:"after"}))}var n=this,r=(new Date).getTime(),s=$("#grid_"+this.name+"_records");for(var o in this.ranges){var a=this.ranges[o],l=a.range[0],d=a.range[1],u=$("#grid_"+this.name+"_rec_"+l.recid+" td[col="+l.column+"]"),c=$("#grid_"+this.name+"_rec_"+d.recid+" td[col="+d.column+"]");0==$("#grid_"+this.name+"_"+a.name).length?s.append('<div id="grid_'+this.name+"_"+a.name+'" class="w2ui-selection" style="'+a.style+'">'+("selection"==a.name?'<div id="grid_'+this.name+'_resizer" class="w2ui-selection-resizer"></div>':"")+"</div>"):$("#grid_"+this.name+"_"+a.name).attr("style",a.style),u.length>0&&c.length>0&&$("#grid_"+this.name+"_"+a.name).css({left:u.position().left-1+s.scrollLeft()+"px",top:u.position().top-1+s.scrollTop()+"px",width:c.position().left-u.position().left+c.width()+3+"px",height:c.position().top-u.position().top+c.height()+3+"px"})}$(this.box).find("#grid_"+this.name+"_resizer").off("mousedown").on("mousedown",e);var h={phase:"before",type:"selectionExtend",target:n.name,originalRange:null,newRange:null};return(new Date).getTime()-r},select:function(){var e=0,t=this.last.selection;this.multiSelect||this.selectNone();for(var i=0;i<arguments.length;i++){var n="object"==typeof arguments[i]?arguments[i].recid:arguments[i],r=this.get(n);if(null!=r){var s=this.get(n,!0),o=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(n));if("row"==this.selectType){if(t.indexes.indexOf(s)>=0)continue;var a=this.trigger({phase:"before",type:"select",target:this.name,recid:n,index:s});if(a.isCancelled===!0)continue;t.indexes.push(s),t.indexes.sort(function(e,t){return e-t}),o.addClass("w2ui-selected").data("selected","yes"),o.find(".w2ui-grid-select-check").prop("checked",!0),e++}else{var l=arguments[i].column;if(!w2utils.isInt(l)){var d=[];for(var u in this.columns)this.columns[u].hidden||d.push({recid:n,column:parseInt(u)});return this.multiSelect||(d=d.splice(0,1)),this.select.apply(this,d)}var c=t.columns[s]||[];if($.isArray(c)&&-1!=c.indexOf(l))continue;var a=this.trigger({phase:"before",type:"select",target:this.name,recid:n,index:s,column:l});if(a.isCancelled===!0)continue;-1==t.indexes.indexOf(s)&&(t.indexes.push(s),t.indexes.sort(function(e,t){return e-t})),c.push(l),c.sort(function(e,t){return e-t}),o.find(" > td[col="+l+"]").addClass("w2ui-selected"),e++,o.data("selected","yes"),o.find(".w2ui-grid-select-check").prop("checked",!0),t.columns[s]=c}this.trigger($.extend(a,{phase:"after"}))}}return t.indexes.length==this.records.length||0!==this.searchData.length&&t.indexes.length==this.last.searchIds.length?$("#grid_"+this.name+"_check_all").prop("checked",!0):$("#grid_"+this.name+"_check_all").prop("checked",!1),this.status(),this.addRange("selection"),e},unselect:function(){for(var e=0,t=this.last.selection,i=0;i<arguments.length;i++){var n="object"==typeof arguments[i]?arguments[i].recid:arguments[i],r=this.get(n);if(null!=r){var s=this.get(r.recid,!0),o=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(n));if("row"==this.selectType){if(-1==t.indexes.indexOf(s))continue;var a=this.trigger({phase:"before",type:"unselect",target:this.name,recid:n,index:s});if(a.isCancelled===!0)continue;t.indexes.splice(t.indexes.indexOf(s),1),o.removeClass("w2ui-selected").removeData("selected"),0!=o.length&&(o[0].style.cssText="height: "+this.recordHeight+"px; "+o.attr("custom_style")),o.find(".w2ui-grid-select-check").prop("checked",!1),e++}else{var l=arguments[i].column;if(!w2utils.isInt(l)){var d=[];for(var u in this.columns)this.columns[u].hidden||d.push({recid:n,column:parseInt(u)});return this.unselect.apply(this,d)}var c=t.columns[s];if(!$.isArray(c)||-1==c.indexOf(l))continue;var a=this.trigger({phase:"before",type:"unselect",target:this.name,recid:n,column:l});if(a.isCancelled===!0)continue;c.splice(c.indexOf(l),1),$("#grid_"+this.name+"_rec_"+w2utils.escapeId(n)+" > td[col="+l+"]").removeClass("w2ui-selected"),e++,0==c.length&&(delete t.columns[s],t.indexes.splice(t.indexes.indexOf(s),1),o.removeData("selected"),o.find(".w2ui-grid-select-check").prop("checked",!1))}this.trigger($.extend(a,{phase:"after"}))}}return t.indexes.length==this.records.length||0!==this.searchData.length&&t.indexes.length==this.last.searchIds.length?$("#grid_"+this.name+"_check_all").prop("checked",!0):$("#grid_"+this.name+"_check_all").prop("checked",!1),this.status(),this.addRange("selection"),e},selectAll:function(){if(this.multiSelect!==!1){var e=this.trigger({phase:"before",type:"select",target:this.name,all:!0});if(e.isCancelled!==!0){var t="object"!=typeof this.url?this.url:this.url.get,i=this.last.selection,n=[];for(var r in this.columns)n.push(parseInt(r));if(i.indexes=[],t||0===this.searchData.length){var s=this.records.length;0!=this.searchData.length&&t&&(s=this.last.searchIds.length);for(var o=0;s>o;o++)i.indexes.push(o),"row"!=this.selectType&&(i.columns[o]=n.slice())}else for(var o=0;o<this.last.searchIds.length;o++)i.indexes.push(this.last.searchIds[o]),"row"!=this.selectType&&(i.columns[this.last.searchIds[o]]=n.slice());this.refresh();var i=this.getSelection();1==i.length?this.toolbar.enable("w2ui-edit"):this.toolbar.disable("w2ui-edit"),i.length>=1?this.toolbar.enable("w2ui-delete"):this.toolbar.disable("w2ui-delete"),this.addRange("selection"),this.trigger($.extend(e,{phase:"after"}))}}},selectNone:function(){var e=this.trigger({phase:"before",type:"unselect",target:this.name,all:!0});if(e.isCancelled!==!0){var t=this.last.selection;for(var i in t.indexes){var n=t.indexes[i],r=this.records[n],s=r?r.recid:null,o=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(s));if(o.removeClass("w2ui-selected").removeData("selected"),o.find(".w2ui-grid-select-check").prop("checked",!1),"row"!=this.selectType){var a=t.columns[n];for(var l in a)o.find(" > td[col="+a[l]+"]").removeClass("w2ui-selected")}}t.indexes=[],t.columns={},this.toolbar.disable("w2ui-edit","w2ui-delete"),this.removeRange("selection"),$("#grid_"+this.name+"_check_all").prop("checked",!1),this.trigger($.extend(e,{phase:"after"}))}},getSelection:function(e){var t=[],i=this.last.selection;if("row"==this.selectType){for(var n in i.indexes)this.records[i.indexes[n]]&&t.push(e===!0?i.indexes[n]:this.records[i.indexes[n]].recid);return t}for(var n in i.indexes){var r=i.columns[i.indexes[n]];if(this.records[i.indexes[n]])for(var s in r)t.push({recid:this.records[i.indexes[n]].recid,index:parseInt(i.indexes[n]),column:r[s]})}return t},search:function(e,t){var i="object"!=typeof this.url?this.url:this.url.get,n=[],r=this.last.multi,s=this.last.logic,o=this.last.field,a=this.last.search;if(0==arguments.length){a="";for(var l in this.searches){var d=this.searches[l],u=$("#grid_"+this.name+"_operator_"+l).val(),c=$("#grid_"+this.name+"_field_"+l),h=$("#grid_"+this.name+"_field2_"+l),p=c.val(),f=h.val(),g=null;if(-1!=["int","float","money","currency","percent"].indexOf(d.type)){var m=c.data("w2field"),v=h.data("w2field");m&&(p=m.clean(p)),v&&(f=v.clean(f))}if(-1!=["list","enum"].indexOf(d.type))if(p=c.data("selected")||{},$.isArray(p)){g=[];for(var y in p)g.push(w2utils.isFloat(p[y].id)?parseFloat(p[y].id):String(p[y].id).toLowerCase()),delete p[y].hidden}else p=p.id||"";if(""!=p&&null!=p||"undefined"!=typeof f&&""!=f){var w={field:d.field,type:d.type,operator:u};"between"==u?$.extend(w,{value:[p,f]}):"in"==u&&"string"==typeof p?$.extend(w,{value:p.split(",")}):"not in"==u&&"string"==typeof p?$.extend(w,{value:p.split(",")}):$.extend(w,{value:p}),g&&$.extend(w,{svalue:g});try{"date"==d.type&&"between"==u&&(w.value[0]=p,w.value[1]=f),"date"==d.type&&"is"==u&&(w.value=p)}catch(e){}n.push(w)}}n.length>0&&!i?(r=!0,s="AND"):(r=!0,s="AND")}if("string"==typeof e&&(o=e,a=t,r=!1,s="OR","undefined"!=typeof t))if("all"==e.toLowerCase())if(this.searches.length>0)for(var l in this.searches){var d=this.searches[l];if("text"==d.type||"alphanumeric"==d.type&&w2utils.isAlphaNumeric(t)||"int"==d.type&&w2utils.isInt(t)||"float"==d.type&&w2utils.isFloat(t)||"percent"==d.type&&w2utils.isFloat(t)||"hex"==d.type&&w2utils.isHex(t)||"currency"==d.type&&w2utils.isMoney(t)||"money"==d.type&&w2utils.isMoney(t)||"date"==d.type&&w2utils.isDate(t)){var w={field:d.field,type:d.type,operator:"text"==d.type?"contains":"is",value:t};n.push(w)}if(-1!=["int","float","money","currency","percent"].indexOf(d.type)&&-1!=String(t).indexOf("-")){var b=String(t).split("-"),w={field:d.field,type:d.type,operator:"between",value:[b[0],b[1]]};n.push(w)}}else for(var x in this.columns){var w={field:this.columns[x].field,type:"text",operator:"contains",value:t};n.push(w)}else{var _=$("#grid_"+this.name+"_search_all"),d=this.getSearch(e);if(null==d&&(d={field:e,type:"text"}),d.field==e&&(this.last.caption=d.caption),"list"==d.type){var w=_.data("selected");w&&!$.isEmptyObject(w)&&(t=w.id)}if(""!=t){var k="contains",C=t;if(-1!=["date","time","list"].indexOf(d.type)&&(k="is"),"int"==d.type&&""!=t){if(k="is",-1!=String(t).indexOf("-")){var w=t.split("-");2==w.length&&(k="between",C=[parseInt(w[0]),parseInt(w[1])])}if(-1!=String(t).indexOf(",")){var w=t.split(",");k="in",C=[];for(var b in w)C.push(w[b])}}var w={field:d.field,type:d.type,operator:k,value:C};n.push(w)}}if($.isArray(e)){var T="AND";"string"==typeof t&&(T=t.toUpperCase(),"OR"!=T&&"AND"!=T&&(T="AND")),a="",r=!0,s=T;for(var S in e){var D=e[S],d=this.getSearch(D.field);null==d&&(d={type:"text",operator:"contains"}),n.push($.extend(!0,{},d,D))}}var R=this.trigger({phase:"before",type:"search",target:this.name,searchData:n,searchField:e?e:"multi",searchValue:t?t:"multi"});R.isCancelled!==!0&&(this.searchData=R.searchData,this.last.field=o,this.last.search=a,this.last.multi=r,this.last.logic=s,this.last.scrollTop=0,this.last.scrollLeft=0,this.last.selection.indexes=[],this.last.selection.columns={},this.searchClose(),this.set({expanded:!1},!0),i?(this.last.xhr_offset=0,this.reload()):(this.localSearch(),this.refresh()),this.trigger($.extend(R,{phase:"after"})))},searchOpen:function(){if(this.box&&0!=this.searches.length){var e=this;$("#tb_"+this.name+"_toolbar_item_w2ui-search-advanced").w2overlay(this.getSearchesHTML(),{name:"searches-"+this.name,left:-10,class:"w2ui-grid-searches",onShow:function(){"OR"==e.last.logic&&(e.searchData=[]),e.initSearches(),$("#w2ui-overlay-searches-"+this.name+" .w2ui-grid-searches").data("grid-name",e.name);var t=$("#w2ui-overlay-searches-"+this.name+" .w2ui-grid-searches *[rel=search]");t.length>0&&t[0].focus()}})}},searchClose:function(){this.box&&0!=this.searches.length&&(this.toolbar&&this.toolbar.uncheck("w2ui-search-advanced"),$("#w2ui-overlay-searches-"+this.name+" .w2ui-grid-searches").length>0&&$().w2overlay("",{name:"searches-"+this.name}))},searchShowFields:function(){for(var e=$("#grid_"+this.name+"_search_all"),t='<div class="w2ui-select-field"><table>',i=-1;i<this.searches.length;i++){var n=this.searches[i];if(-1==i){if(!this.multiSearch)continue;n={field:"all",caption:w2utils.lang("All Fields")}}else if(this.searches[i].hidden===!0)continue;t+="<tr "+(w2utils.isIOS?"onTouchStart":"onClick")+"=\"w2ui['"+this.name+"'].initAllField('"+n.field+'\')">    <td><input type="radio" tabIndex="-1" '+(n.field==this.last.field?"checked":"")+"></td>    <td>"+n.caption+"</td></tr>"}t+="</table></div>",setTimeout(function(){$(e).w2overlay(t,{left:-10})},1)},initAllField:function(e,t){var i=$("#grid_"+this.name+"_search_all"),n=this.getSearch(e);if("all"==e)n={field:"all",caption:w2utils.lang("All Fields")},i.w2field("clear"),i.change().focus();else{var r=n.type;-1!=["enum","select"].indexOf(r)&&(r="list"),i.w2field(r,$.extend({},n.options,{suffix:"",autoFormat:!1,selected:t})),-1!=["list","enum"].indexOf(n.type)&&(this.last.search="",this.last.item="",i.val("")),setTimeout(function(){i.focus()},1)}""!=this.last.search?this.search(n.field,this.last.search):(this.last.field=n.field,this.last.caption=n.caption),i.attr("placeholder",n.caption),$().w2overlay()},searchReset:function(e){var t=this.trigger({phase:"before",type:"search",target:this.name,searchData:[]});t.isCancelled!==!0&&(this.searchData=[],this.last.search="",this.last.logic="OR",this.last.multi=!1,this.last.xhr_offset=0,this.last.scrollTop=0,this.last.scrollLeft=0,this.last.selection.indexes=[],this.last.selection.columns={},this.searchClose(),$("#grid_"+this.name+"_search_all").val(""),e||this.reload(),this.trigger($.extend(t,{phase:"after"})))},clear:function(e){this.records=[],this.summary=[],this.last.scrollTop=0,this.last.scrollLeft=0,this.last.selection.indexes=[],this.last.selection.columns={},this.last.range_start=null,this.last.range_end=null,this.last.xhr_offset=0,e||this.refresh()},reset:function(e){this.offset=0,this.total=0,this.last.scrollTop=0,this.last.scrollLeft=0,this.last.selection.indexes=[],this.last.selection.columns={},this.last.range_start=null,this.last.range_end=null,this.last.xhr_offset=0,this.searchReset(e),null!=this.last.sortData&&(this.sortData=this.last.sortData),this.set({expanded:!1},!0),e||this.refresh()},skip:function(e){var t="object"!=typeof this.url?this.url:this.url.get;t?(this.offset=parseInt(e),this.offset>this.total&&(this.offset=this.total-this.limit),(this.offset<0||!w2utils.isInt(this.offset))&&(this.offset=0),this.records=[],this.last.xhr_offset=0,this.last.pull_more=!0,this.last.scrollTop=0,this.last.scrollLeft=0,$("#grid_"+this.name+"_records").prop("scrollTop",0),this.reload()):console.log("ERROR: grid.skip() can only be called when you have remote data source.")},load:function(e,t){return"undefined"==typeof e?void console.log('ERROR: You need to provide url argument when calling .load() method of "'+this.name+'" object.'):void this.request("get-records",{},e,t)},reload:function(e){var t="object"!=typeof this.url?this.url:this.url.get;t?(this.clear(!0),this.request("get-records",{},null,e)):(this.last.scrollTop=0,this.last.scrollLeft=0,this.last.range_start=null,this.last.range_end=null,this.localSearch(),this.refresh(),"function"==typeof e&&e({status:"success"}))},request:function(e,t,i,n){if("undefined"==typeof t&&(t={}),(""==i||null==i)&&(i=this.url),""!=i&&null!=i){var r={};if(w2utils.isInt(this.offset)||(this.offset=0),w2utils.isInt(this.last.xhr_offset)||(this.last.xhr_offset=0),r.cmd=e,r.selected=this.getSelection(),r.limit=this.limit,r.offset=parseInt(this.offset)+this.last.xhr_offset,r.search=this.searchData,r.searchLogic=this.last.logic,r.sort=this.sortData,0==this.searchData.length&&(delete r.search,delete r.searchLogic),0==this.sortData.length&&delete r.sort,$.extend(r,this.postData),$.extend(r,t),"get-records"==e){var s=this.trigger({phase:"before",type:"request",target:this.name,url:i,postData:r});if(s.isCancelled===!0)return void("function"==typeof n&&n({status:"error",message:"Request aborted."}))}else var s={url:i,postData:r};var o=this;if(0==this.last.xhr_offset)this.lock(this.msgRefresh,!0);else{var a=$("#grid_"+this.name+"_rec_more");this.autoLoad===!0?a.show().find("td").html('<div><div style="width: 20px; height: 20px;" class="w2ui-spinner"></div></div>'):a.find("td").html("<div>"+w2utils.lang("Load")+" "+o.limit+" "+w2utils.lang("More")+"...</div>")}if(this.last.xhr)try{this.last.xhr.abort()}catch(e){}if(i="object"!=typeof s.url?s.url:s.url.get,"save-records"==r.cmd&&"object"==typeof s.url&&(i=s.url.save),"delete-records"==r.cmd&&"object"==typeof s.url&&(i=s.url.remove),!$.isEmptyObject(o.routeData)){var l=w2utils.parseRoute(i);if(l.keys.length>0)for(var d=0;d<l.keys.length;d++)null!=o.routeData[l.keys[d].name]&&(i=i.replace(new RegExp(":"+l.keys[d].name,"g"),o.routeData[l.keys[d].name]))}var u={type:"POST",url:i,data:s.postData,dataType:"text"};"HTTP"==w2utils.settings.dataType&&(u.data="object"==typeof u.data?String($.param(u.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]"):u.data),"RESTFULL"==w2utils.settings.dataType&&(u.type="GET","save-records"==r.cmd&&(u.type="PUT"),"delete-records"==r.cmd&&(u.type="DELETE"),u.data="object"==typeof u.data?String($.param(u.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]"):u.data),"JSON"==w2utils.settings.dataType&&(u.type="POST",u.data=JSON.stringify(u.data),u.contentType="application/json"),this.method&&(u.type=this.method),this.last.xhr_cmd=r.cmd,this.last.xhr_start=(new Date).getTime(),this.last.xhr=$.ajax(u).done(function(t,i){o.requestComplete(i,e,n)}).fail(function(t,i,r){var s={status:i,error:r,rawResponseText:t.responseText},a=o.trigger({phase:"before",type:"error",error:s,xhr:t});if(a.isCancelled!==!0){if("abort"!=i){var l;try{l=$.parseJSON(t.responseText)}catch(e){}console.log("ERROR: Server communication failed.","\n   EXPECTED:",{status:"success",total:5,records:[{recid:1,field:"value"}]},"\n         OR:",{status:"error",message:"error message"},"\n   RECEIVED:","object"==typeof l?l:t.responseText),o.requestComplete("error",e,n)}o.trigger($.extend(a,{phase:"after"}))}}),"get-records"==e&&this.trigger($.extend(s,{phase:"after"}))}},requestComplete:function(status,cmd,callBack){var obj=this;this.unlock(),setTimeout(function(){obj.status(w2utils.lang("Server Response")+" "+((new Date).getTime()-obj.last.xhr_start)/1e3+" "+w2utils.lang("sec"))},10),this.last.pull_more=!1,this.last.pull_refresh=!0;var event_name="load";"save-records"==this.last.xhr_cmd&&(event_name="save"),"delete-records"==this.last.xhr_cmd&&(event_name="deleted");var eventData=this.trigger({phase:"before",target:this.name,type:event_name,xhr:this.last.xhr,status:status});if(eventData.isCancelled===!0)return void("function"==typeof callBack&&callBack({status:"error",message:"Request aborted."}));var data,responseText=this.last.xhr.responseText;if("error"!=status){if("undefined"!=typeof responseText&&""!=responseText){if("object"==typeof responseText)data=responseText;else if("function"==typeof obj.parser)data=obj.parser(responseText),"object"!=typeof data&&console.log("ERROR: Your parser did not return proper object");else try{eval("data = "+responseText)}catch(e){}if(obj.recid)for(var r in data.records)data.records[r].recid=data.records[r][obj.recid];if("undefined"==typeof data&&(data={status:"error",message:this.msgNotJSON,responseText:responseText}),"error"==data.status)obj.error(data.message);else{if("get-records"==cmd)if(0==this.last.xhr_offset)this.records=[],this.summary=[],delete data.status,$.extend(!0,this,data);else{var records=data.records;delete data.records,delete data.status,$.extend(!0,this,data);for(var r in records)this.records.push(records[r])}if("delete-records"==cmd)return void this.reset()}}}else data={status:"error",message:this.msgAJAXerror,responseText:responseText},obj.error(this.msgAJAXerror);var url="object"!=typeof this.url?this.url:this.url.get;url||(this.localSort(),this.localSearch()),this.total=parseInt(this.total),this.trigger($.extend(eventData,{phase:"after"})),0==this.last.xhr_offset?this.refresh():this.scroll(),"function"==typeof callBack&&callBack(data)},error:function(e){var t=this.trigger({target:this.name,type:"error",message:e,xhr:this.last.xhr});return t.isCancelled===!0?void("function"==typeof callBack&&callBack({status:"error",message:"Request aborted."})):(w2alert(e,"Error"),void this.trigger($.extend(t,{phase:"after"})))},getChanges:function(){var e=[];for(var t in this.records){var i=this.records[t];"undefined"!=typeof i.changes&&e.push($.extend(!0,{recid:i.recid},i.changes))}return e},mergeChanges:function(){var changes=this.getChanges();for(var c in changes){var record=this.get(changes[c].recid);for(var s in changes[c])if("recid"!=s){try{eval("record."+s+" = changes[c][s]")}catch(e){}delete record.changes}}this.refresh()},save:function(){var e=this,t=this.getChanges(),i=this.trigger({phase:"before",target:this.name,type:"submit",changes:t});if(i.isCancelled!==!0){var n="object"!=typeof this.url?this.url:this.url.save;n?this.request("save-records",{changes:i.changes},null,function(t){"error"!==t.status&&e.mergeChanges(),e.trigger($.extend(i,{phase:"after"}))}):(this.mergeChanges(),this.trigger($.extend(i,{phase:"after"})))}},editField:function(e,t,i,n){var r=this,s=r.get(e,!0),o=r.records[s],a=r.columns[t],l=a?a.editable:null;if(o&&a&&l&&o.editable!==!1){if(-1!=["enum","file"].indexOf(l.type))return void console.log('ERROR: input types "enum" and "file" are not supported in inline editing.');var d=r.trigger({phase:"before",type:"editField",target:r.name,recid:e,column:t,value:i,index:s,originalEvent:n});if(d.isCancelled!==!0&&(i=d.value,this.selectNone(),this.select({recid:e,column:t}),this.last.edit_col=t,-1==["checkbox","check"].indexOf(l.type))){var u=$("#grid_"+r.name+"_rec_"+w2utils.escapeId(e)),c=u.find("[col="+t+"] > div");"undefined"==typeof l.inTag&&(l.inTag=""),"undefined"==typeof l.outTag&&(l.outTag=""),"undefined"==typeof l.style&&(l.style=""),"undefined"==typeof l.items&&(l.items=[]);var h=w2utils.stripTags(o.changes&&"undefined"!=typeof o.changes[a.field]?o.changes[a.field]:o[a.field]);(null==h||"undefined"==typeof h)&&(h=""),"undefined"!=typeof i&&null!=i&&(h=i);var p="undefined"!=typeof a.style?a.style+";":"";if("string"==typeof a.render&&-1!=["number","int","float","money","percent"].indexOf(a.render.split(":")[0])&&(p+="text-align: right;"),l.items.length>0&&!$.isPlainObject(l.items[0])&&(l.items=w2obj.field.prototype.normMenu(l.items)),"select"==l.type){var f="";for(var g in l.items)f+='<option value="'+l.items[g].id+'" '+(l.items[g].id==h?"selected":"")+">"+l.items[g].text+"</option>";c.addClass("w2ui-editable").html('<select id="grid_'+r.name+"_edit_"+e+"_"+t+'" column="'+t+'"     style="width: 100%; '+p+l.style+'" field="'+a.field+'" recid="'+e+'"     '+l.inTag+">"+f+"</select>"+l.outTag),c.find("select").focus().on("change",function(){delete r.last.move}).on("blur",function(e){r.editChange.call(r,this,s,t,e)})}else{c.addClass("w2ui-editable").html('<input id="grid_'+r.name+"_edit_"+e+"_"+t+'"     type="text" style="font-family: inherit; font-size: inherit; outline: none; '+p+l.style+'" field="'+a.field+'" recid="'+e+'"     column="'+t+'" '+l.inTag+">"+l.outTag),
null==i&&c.find("input").val("object"!=h?h:"");var m=c.find("input").get(0);$(m).w2field(l.type,$.extend(l,{selected:h})),setTimeout(function(){var e=m;"list"==l.type&&(e=$($(m).data("w2field").helpers.focus).find("input"),"object"!=typeof h&&""!=h&&e.val(h).css({opacity:1}).prev().css({opacity:1})),$(e).on("blur",function(e){r.editChange.call(r,m,s,t,e)})},10),null!=i&&$(m).val("object"!=h?h:"")}setTimeout(function(){c.find("input, select").on("click",function(e){e.stopPropagation()}).on("keydown",function(i){var n=!1;switch(i.keyCode){case 9:n=!0;var l=e,d=i.shiftKey?r.prevCell(t,!0):r.nextCell(t,!0);if(null==d){var u=i.shiftKey?r.prevRow(s):r.nextRow(s);if(null!=u&&u!=s){l=r.records[u].recid;for(var c in r.columns){var u=r.columns[c].editable;if("undefined"!=typeof u&&-1==["checkbox","check"].indexOf(u.type)&&(d=parseInt(c),!i.shiftKey))break}}}l===!1&&(l=e),null==d&&(d=t),this.blur(),setTimeout(function(){"row"!=r.selectType?(r.selectNone(),r.select({recid:l,column:d})):r.editField(l,d,null,i)},1);break;case 13:this.blur();var h=i.shiftKey?r.prevRow(s):r.nextRow(s);null!=h&&h!=s&&setTimeout(function(){"row"!=r.selectType?(r.selectNone(),r.select({recid:r.records[h].recid,column:t})):r.editField(r.records[h].recid,t,null,i)},100);break;case 38:if(!i.shiftKey)break;n=!0;var h=r.prevRow(s);h!=s&&(this.blur(),setTimeout(function(){"row"!=r.selectType?(r.selectNone(),r.select({recid:r.records[h].recid,column:t})):r.editField(r.records[h].recid,t,null,i)},1));break;case 40:if(!i.shiftKey)break;n=!0;var h=r.nextRow(s);null!=h&&h!=s&&(this.blur(),setTimeout(function(){"row"!=r.selectType?(r.selectNone(),r.select({recid:r.records[h].recid,column:t})):r.editField(r.records[h].recid,t,null,i)},1));break;case 27:var p=r.parseField(o,a.field);o.changes&&"undefined"!=typeof o.changes[a.field]&&(p=o.changes[a.field]),this.value="undefined"!=typeof p?p:"",this.blur(),setTimeout(function(){r.select({recid:e,column:t})},1)}n&&i.preventDefault&&i.preventDefault()});var n=c.find("input").focus();null!=i?n[0].setSelectionRange(n.val().length,n.val().length):n.select()},1),r.trigger($.extend(d,{phase:"after"}))}}},editChange:function(e,t,i){var n=0>t;t=0>t?-t-1:t;var r=n?this.summary:this.records,s=r[t],o=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(s.recid)),a=this.columns[i],l=e.value,d=this.parseField(s,a.field),u=$(e).data("w2field");u&&(l=u.clean(l),"list"==u.type&&""!=l&&(l=$(e).data("selected"))),"checkbox"==e.type&&(s.editable===!1&&(e.checked=!e.checked),l=e.checked);for(var c={phase:"before",type:"change",target:this.name,input_id:e.id,recid:s.recid,index:t,column:i,value_new:l,value_previous:s.changes&&s.changes.hasOwnProperty(a.field)?s.changes[a.field]:d,value_original:d};;){if(l=c.value_new,"object"!=typeof l&&String(d)!=String(l)||"object"==typeof l&&("object"!=typeof d||l.id!=d.id)){if(c=this.trigger($.extend(c,{type:"change",phase:"before"})),c.isCancelled!==!0){if(l!==c.value_new)continue;s.changes=s.changes||{},s.changes[a.field]=c.value_new,this.trigger($.extend(c,{phase:"after"}))}}else if(c=this.trigger($.extend(c,{type:"restore",phase:"before"})),c.isCancelled!==!0){if(l!==c.value_new)continue;s.changes&&delete s.changes[a.field],$.isEmptyObject(s.changes)&&delete s.changes,this.trigger($.extend(c,{phase:"after"}))}break}var h=this.getCellHTML(t,i,n);n||(s.changes&&"undefined"!=typeof s.changes[a.field]?$(o).find("[col="+i+"]").addClass("w2ui-changed").html(h):$(o).find("[col="+i+"]").removeClass("w2ui-changed").html(h))},delete:function(e){var t=this,i=this.trigger({phase:"before",target:this.name,type:"delete",force:e});if(i.isCancelled!==!0){e=i.force;var n=this.getSelection();if(0!=n.length){if(""!=this.msgDelete&&!e)return void w2confirm({title:w2utils.lang("Delete Confirmation"),msg:t.msgDelete,btn_yes:{class:"w2ui-btn-red"},callBack:function(e){"Yes"==e&&w2ui[t.name].delete(!0)}});var r="object"!=typeof this.url?this.url:this.url.remove;if(r)this.request("delete-records");else if(this.selectNone(),"object"!=typeof n[0])this.remove.apply(this,n);else{for(var s in n){var o=this.columns[n[s].column].field,a=this.get(n[s].recid,!0);null!=a&&"recid"!=o&&(this.records[a][o]="",this.records[a].changes&&delete this.records[a].changes[o])}this.refresh()}this.trigger($.extend(i,{phase:"after"}))}}},click:function(e,t){var i=(new Date).getTime(),n=null;if(!(1==this.last.cancelClick||t&&t.altKey)){if("object"==typeof e&&(n=e.column,e=e.recid),"undefined"==typeof t&&(t={}),i-parseInt(this.last.click_time)<350&&this.last.click_recid==e&&"click"==t.type)return void this.dblClick(e,t);if(this.last.click_time=i,this.last.click_recid=e,null==n&&t.target){var r=t.target;"TD"!=r.tagName&&(r=$(r).parents("td")[0]),"undefined"!=typeof $(r).attr("col")&&(n=parseInt($(r).attr("col")))}var s=this.trigger({phase:"before",target:this.name,type:"click",recid:e,column:n,originalEvent:t});if(s.isCancelled!==!0){var o=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(e)).parents("tr");if(o.length>0&&-1!=String(o.attr("id")).indexOf("expanded_row")){var a=o.parents(".w2ui-grid").attr("name");w2ui[a].selectNone(),o.parents(".w2ui-grid").find(".w2ui-expanded-row .w2ui-grid").each(function(e,t){var i=$(t).attr("name");w2ui[i]&&w2ui[i].selectNone()})}$(this.box).find(".w2ui-expanded-row .w2ui-grid").each(function(e,t){var i=$(t).attr("name");w2ui[i]&&w2ui[i].selectNone()});var l=this,d=this.getSelection();$("#grid_"+this.name+"_check_all").prop("checked",!1);var u=this.get(e,!0),c=(this.records[u],[]);if(l.last.sel_ind=u,l.last.sel_col=n,l.last.sel_recid=e,l.last.sel_type="click",t.shiftKey&&d.length>0&&l.multiSelect){if(d[0].recid){var h=this.get(d[0].recid,!0),p=this.get(e,!0);if(n>d[0].column)var f=d[0].column,g=n;else var f=n,g=d[0].column;for(var m=f;g>=m;m++)c.push(m)}else var h=this.get(d[0],!0),p=this.get(e,!0);var v=[];if(h>p){var r=h;h=p,p=r}for(var y="object"!=typeof this.url?this.url:this.url.get,w=h;p>=w;w++)if(!(this.searchData.length>0)||y||-1!=$.inArray(w,this.last.searchIds))if("row"==this.selectType)v.push(this.records[w].recid);else for(var b in c)v.push({recid:this.records[w].recid,column:c[b]});this.select.apply(this,v)}else{var x=this.last.selection,_=-1!=x.indexes.indexOf(u);(t.ctrlKey||t.shiftKey||t.metaKey)&&this.multiSelect||this.showSelectColumn?("row"!=this.selectType&&-1==$.inArray(n,x.columns[u])&&(_=!1),_===!0?this.unselect({recid:e,column:n}):this.select({recid:e,column:n})):("row"!=this.selectType&&-1==$.inArray(n,x.columns[u])&&(_=!1),d.length>300?this.selectNone():this.unselect.apply(this,d),_===!0?this.unselect({recid:e,column:n}):this.select({recid:e,column:n}))}this.status(),l.initResize(),this.trigger($.extend(s,{phase:"after"}))}}},columnClick:function(e,t){var i=this.trigger({phase:"before",type:"columnClick",target:this.name,field:e,originalEvent:t});if(i.isCancelled!==!0){var n=this.getColumn(e);n&&n.sortable&&this.sort(e,null,!(!t||!t.ctrlKey&&!t.metaKey)),this.trigger($.extend(i,{phase:"after"}))}},keydown:function(e){function t(){$("#_tmp_copy_data").remove(),$(document).off("keyup",t)}function i(){var e=Math.floor((a[0].scrollTop+a.height()/2.1)/r.recordHeight);r.records[e]||(e=0),r.select({recid:r.records[e].recid,column:0})}function n(){if("click"!=r.last.sel_type)return!1;if("row"!=r.selectType){if(r.last.sel_type="key",l.length>1){for(var e in l)if(l[e].recid==r.last.sel_recid&&l[e].column==r.last.sel_col){l.splice(e,1);break}return r.unselect.apply(r,l),!0}return!1}return r.last.sel_type="key",l.length>1&&(l.splice(l.indexOf(r.records[r.last.sel_ind].recid),1),r.unselect.apply(r,l),!0)}var r=this;if(r.keyboard===!0){var s=r.trigger({phase:"before",type:"keydown",target:r.name,originalEvent:e});if(s.isCancelled!==!0){var o=!1,a=$("#grid_"+r.name+"_records"),l=r.getSelection();0==l.length&&(o=!0);var d=l[0]||null,u=[],c=l[l.length-1];if("object"==typeof d&&null!=d){d=l[0].recid,u=[];for(var h=0;l[h]&&l[h].recid==d;)u.push(l[h].column),h++;c=l[l.length-1].recid}var p=r.get(d,!0),f=r.get(c,!0),g=r.get(d),m=$("#grid_"+r.name+"_rec_"+(null!==p?w2utils.escapeId(r.records[p].recid):"none")),v=!1,y=e.keyCode,w=e.shiftKey;switch(9==y&&(y=e.shiftKey?37:39,w=!1,v=!0),y){case 8:case 46:this.show.toolbarDelete&&r.delete(),v=!0,e.stopPropagation();break;case 27:r.selectNone(),l.length>0&&"object"==typeof l[0]&&r.select({recid:l[0].recid,column:l[0].column}),v=!0;break;case 65:if(!e.metaKey&&!e.ctrlKey)break;r.selectAll(),v=!0;break;case 70:if(!e.metaKey&&!e.ctrlKey)break;$("#grid_"+r.name+"_search_all").focus(),v=!0;break;case 13:if("row"==this.selectType&&r.show.expandColumn===!0){if(m.length<=0)break;r.toggle(d,e),v=!0}else{for(var b in this.columns)if(this.columns[b].editable){u.push(parseInt(b));break}"row"==this.selectType&&this.last.edit_col&&(u=[this.last.edit_col]),u.length>0&&(r.editField(d,u[0],null,e),v=!0)}break;case 37:if(o)break;var x=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(r.records[p].recid)).parents("tr");if(x.length>0&&-1!=String(x.attr("id")).indexOf("expanded_row")){var d=x.prev().attr("recid"),_=x.parents(".w2ui-grid").attr("name");r.selectNone(),w2utils.keyboard.active(_),w2ui[_].set(d,{expanded:!1}),w2ui[_].collapse(d),w2ui[_].click(d),v=!0;break}if("row"==this.selectType){if(m.length<=0||g.expanded!==!0)break;r.set(d,{expanded:!1},!0),r.collapse(d,e)}else{var k=r.prevCell(u[0]);if(null!=k)if(w&&r.multiSelect){if(n())return;var C=[],T=[],S=[];if(0==u.indexOf(this.last.sel_col)&&u.length>1)for(var D in l)-1==C.indexOf(l[D].recid)&&C.push(l[D].recid),S.push({recid:l[D].recid,column:u[u.length-1]});else for(var D in l)-1==C.indexOf(l[D].recid)&&C.push(l[D].recid),T.push({recid:l[D].recid,column:k});r.unselect.apply(r,S),r.select.apply(r,T)}else e.shiftKey=!1,r.click({recid:d,column:k},e);else if(!w)for(var R=1;R<l.length;R++)r.unselect(l[R])}v=!0;break;case 39:if(o)break;if("row"==this.selectType){if(m.length<=0||g.expanded===!0||r.show.expandColumn!==!0)break;r.expand(d,e)}else{var z=r.nextCell(u[u.length-1]);if(null!==z)if(w&&39==y&&r.multiSelect){if(n())return;var C=[],T=[],S=[];if(u.indexOf(this.last.sel_col)==u.length-1&&u.length>1)for(var D in l)-1==C.indexOf(l[D].recid)&&C.push(l[D].recid),S.push({recid:l[D].recid,column:u[0]});else for(var D in l)-1==C.indexOf(l[D].recid)&&C.push(l[D].recid),T.push({recid:l[D].recid,column:z});r.unselect.apply(r,S),r.select.apply(r,T)}else r.click({recid:d,column:z},e);else if(!w)for(var R=0;R<l.length-1;R++)r.unselect(l[R])}v=!0;break;case 38:if(o&&i(),m.length<=0)break;var k=r.prevRow(p);if(null!=k){if(r.records[k].expanded){var j=$("#grid_"+r.name+"_rec_"+w2utils.escapeId(r.records[k].recid)+"_expanded_row").find(".w2ui-grid");if(j.length>0&&w2ui[j.attr("name")]){r.selectNone();var _=j.attr("name"),E=w2ui[_].records;w2utils.keyboard.active(_),w2ui[_].click(E[E.length-1].recid),v=!0;break}}if(w&&r.multiSelect){if(n())return;if("row"==r.selectType)r.last.sel_ind>k&&r.last.sel_ind!=f?r.unselect(r.records[f].recid):r.select(r.records[k].recid);else if(r.last.sel_ind>k&&r.last.sel_ind!=f){k=f;var C=[];for(var b in u)C.push({recid:r.records[k].recid,column:u[b]});r.unselect.apply(r,C)}else{var C=[];for(var b in u)C.push({recid:r.records[k].recid,column:u[b]});r.select.apply(r,C)}}else l.length>300?this.selectNone():this.unselect.apply(this,l),r.click({recid:r.records[k].recid,column:u[0]},e);r.scrollIntoView(k),e.preventDefault&&e.preventDefault()}else{if(!w)for(var R=1;R<l.length;R++)r.unselect(l[R]);var x=$("#grid_"+r.name+"_rec_"+w2utils.escapeId(r.records[p].recid)).parents("tr");if(x.length>0&&-1!=String(x.attr("id")).indexOf("expanded_row")){var d=x.prev().attr("recid"),_=x.parents(".w2ui-grid").attr("name");r.selectNone(),w2utils.keyboard.active(_),w2ui[_].click(d),v=!0;break}}break;case 40:if(o&&i(),m.length<=0)break;if(r.records[f].expanded){var j=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(r.records[f].recid)+"_expanded_row").find(".w2ui-grid");if(j.length>0&&w2ui[j.attr("name")]){r.selectNone();var _=j.attr("name"),E=w2ui[_].records;w2utils.keyboard.active(_),w2ui[_].click(E[0].recid),v=!0;break}}var z=r.nextRow(f);if(null!=z){if(w&&r.multiSelect){if(n())return;if("row"==r.selectType)this.last.sel_ind<z&&this.last.sel_ind!=p?r.unselect(r.records[p].recid):r.select(r.records[z].recid);else if(this.last.sel_ind<z&&this.last.sel_ind!=p){z=p;var C=[];for(var b in u)C.push({recid:r.records[z].recid,column:u[b]});r.unselect.apply(r,C)}else{var C=[];for(var b in u)C.push({recid:r.records[z].recid,column:u[b]});r.select.apply(r,C)}}else l.length>300?this.selectNone():this.unselect.apply(this,l),r.click({recid:r.records[z].recid,column:u[0]},e);r.scrollIntoView(z),v=!0}else{if(!w)for(var R=0;R<l.length-1;R++)r.unselect(l[R]);var x=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(r.records[f].recid)).parents("tr");if(x.length>0&&-1!=String(x.attr("id")).indexOf("expanded_row")){var d=x.next().attr("recid"),_=x.parents(".w2ui-grid").attr("name");r.selectNone(),w2utils.keyboard.active(_),w2ui[_].click(d),v=!0;break}}break;case 17:case 91:if(o)break;var O=r.copy();$("body").append('<textarea id="_tmp_copy_data"    onpaste="var obj = this; setTimeout(function () { w2ui[\''+r.name+"'].paste(obj.value); }, 1);\"    onkeydown=\"w2ui['"+r.name+'\'].keydown(event)"   style="position: absolute; top: -100px; height: 1px; width: 1px">'+O+"</textarea>"),$("#_tmp_copy_data").focus().select(),$(document).on("keyup",t);break;case 88:if(o)break;(e.ctrlKey||e.metaKey)&&setTimeout(function(){r.delete(!0)},100)}for(var C=[187,189,32],D=48;90>=D;D++)C.push(D);if(-1!=C.indexOf(y)&&!e.ctrlKey&&!e.metaKey&&!v){0==u.length&&u.push(0);var C=String.fromCharCode(y);187==y&&(C="="),189==y&&(C="-"),w||(C=C.toLowerCase()),r.editField(d,u[0],C,e),v=!0}v&&e.preventDefault&&e.preventDefault(),r.trigger($.extend(s,{phase:"after"}))}}},scrollIntoView:function(e){var t=this.records.length,i="object"!=typeof this.url?this.url:this.url.get;if(0==this.searchData.length||i||(t=this.last.searchIds.length),"undefined"==typeof e){var n=this.getSelection();if(0==n.length)return;e=this.get(n[0],!0)}var r=$("#grid_"+this.name+"_records");if(0!=t){var s=this.last.searchIds.length;if(!(r.height()>this.recordHeight*(s>0?s:t))){s>0&&(e=this.last.searchIds.indexOf(e));var o=Math.floor(r[0].scrollTop/this.recordHeight),a=o+Math.floor(r.height()/this.recordHeight);e==o&&r.animate({scrollTop:r.scrollTop()-r.height()/1.3},250,"linear"),e==a&&r.animate({scrollTop:r.scrollTop()+r.height()/1.3},250,"linear"),(o>e||e>a)&&r.animate({scrollTop:(e-1)*this.recordHeight})}}},dblClick:function(e,t){var i=null;if("object"==typeof e&&(i=e.column,e=e.recid),"undefined"==typeof t&&(t={}),null==i&&t.target){var n=t.target;"TD"!=n.tagName&&(n=$(n).parents("td")[0]),i=parseInt($(n).attr("col"))}var r=this.trigger({phase:"before",target:this.name,type:"dblClick",recid:e,column:i,originalEvent:t});if(r.isCancelled!==!0){this.selectNone();var s=this.columns[i];s&&$.isPlainObject(s.editable)?this.editField(e,i,null,t):this.select({recid:e,column:i}),this.trigger($.extend(r,{phase:"after"}))}},contextMenu:function(e,t){var i=this;"text"!=i.last.userSelect&&("undefined"==typeof t&&(t={offsetX:0,offsetY:0,target:$("#grid_"+i.name+"_rec_"+e)[0]}),"undefined"==typeof t.offsetX&&(t.offsetX=t.layerX-t.target.offsetLeft,t.offsetY=t.layerY-t.target.offsetTop),w2utils.isFloat(e)&&(e=parseFloat(e)),-1==this.getSelection().indexOf(e)&&i.click(e),setTimeout(function(){var n=i.trigger({phase:"before",type:"contextMenu",target:i.name,originalEvent:t,recid:e});n.isCancelled!==!0&&(i.menu.length>0&&$(i.box).find(t.target).w2menu(i.menu,{left:t.offsetX,onSelect:function(t){i.menuClick(e,parseInt(t.index),t.originalEvent)}}),i.trigger($.extend(n,{phase:"after"})))},150),t.preventDefault&&t.preventDefault())},menuClick:function(e,t,i){var n=this,r=n.trigger({phase:"before",type:"menuClick",target:n.name,originalEvent:i,recid:e,menuIndex:t,menuItem:n.menu[t]});r.isCancelled!==!0&&n.trigger($.extend(r,{phase:"after"}))},toggle:function(e){var t=this.get(e);return t.expanded===!0?this.collapse(e):this.expand(e)},expand:function(e){function t(){var t=$("#grid_"+n.name+"_rec_"+r+"_expanded"),i=$("#grid_"+n.name+"_rec_"+r+"_expanded_row .w2ui-expanded1 > div");t.height()<5||(t.css("opacity",1),i.show().css("opacity",1),$("#grid_"+n.name+"_cell_"+n.get(e,!0)+"_expand div").html("-"))}var i=this.get(e),n=this,r=w2utils.escapeId(e);if($("#grid_"+this.name+"_rec_"+r+"_expanded_row").length>0)return!1;if("none"==i.expanded)return!1;var s=1+(this.show.selectColumn?1:0),o="";$("#grid_"+this.name+"_rec_"+r).after('<tr id="grid_'+this.name+"_rec_"+e+'_expanded_row" class="w2ui-expanded-row '+o+'">'+(this.show.lineNumbers?'<td class="w2ui-col-number"></td>':"")+'    <td class="w2ui-grid-data w2ui-expanded1" colspan="'+s+'"><div style="display: none"></div></td>    <td colspan="100" class="w2ui-expanded2">        <div id="grid_'+this.name+"_rec_"+e+'_expanded" style="opacity: 0"></div>    </td></tr>');var a=this.trigger({phase:"before",type:"expand",target:this.name,recid:e,box_id:"grid_"+this.name+"_rec_"+e+"_expanded",ready:t});return a.isCancelled===!0?void $("#grid_"+this.name+"_rec_"+r+"_expanded_row").remove():($("#grid_"+this.name+"_rec_"+r).attr("expanded","yes").addClass("w2ui-expanded"),$("#grid_"+this.name+"_rec_"+r+"_expanded_row").show(),$("#grid_"+this.name+"_cell_"+this.get(e,!0)+"_expand div").html('<div class="w2ui-spinner" style="width: 16px; height: 16px; margin: -2px 2px;"></div>'),i.expanded=!0,setTimeout(t,300),this.trigger($.extend(a,{phase:"after"})),this.resizeRecords(),!0)},collapse:function(e){var t=this.get(e),i=this,n=w2utils.escapeId(e);if(0==$("#grid_"+this.name+"_rec_"+n+"_expanded_row").length)return!1;var r=this.trigger({phase:"before",type:"collapse",target:this.name,recid:e,box_id:"grid_"+this.name+"_rec_"+n+"_expanded"});return r.isCancelled!==!0?($("#grid_"+this.name+"_rec_"+n).removeAttr("expanded").removeClass("w2ui-expanded"),$("#grid_"+this.name+"_rec_"+n+"_expanded").css("opacity",0),$("#grid_"+this.name+"_cell_"+this.get(e,!0)+"_expand div").html("+"),setTimeout(function(){$("#grid_"+i.name+"_rec_"+n+"_expanded").height("0px"),setTimeout(function(){$("#grid_"+i.name+"_rec_"+n+"_expanded_row").remove(),delete t.expanded,i.trigger($.extend(r,{phase:"after"})),i.resizeRecords()},300)},200),!0):void 0},sort:function(e,t,i){var n=this.trigger({phase:"before",type:"sort",target:this.name,field:e,direction:t,multiField:i});if(n.isCancelled!==!0){if("undefined"!=typeof e){var r=this.sortData.length;for(var s in this.sortData)if(this.sortData[s].field==e){r=s;break}if("undefined"==typeof t||null==t)if("undefined"==typeof this.sortData[r])t="asc";else switch(String(this.sortData[r].direction)){case"asc":t="desc";break;case"desc":t="asc";break;default:t="asc"}this.multiSort===!1&&(this.sortData=[],r=0),1!=i&&(this.sortData=[],r=0),"undefined"==typeof this.sortData[r]&&(this.sortData[r]={}),this.sortData[r].field=e,this.sortData[r].direction=t}else this.sortData=[];this.selectNone();var o="object"!=typeof this.url?this.url:this.url.get;o?(this.trigger($.extend(n,{phase:"after"})),this.last.xhr_offset=0,this.reload()):(this.localSort(),this.searchData.length>0&&this.localSearch(!0),this.trigger($.extend(n,{phase:"after"})),this.refresh())}},copy:function(){var e=this.getSelection();if(0==e.length)return"";var t="";if("object"==typeof e[0]){var i=e[0].column,n=e[0].column,r=[];for(var s in e)e[s].column<i&&(i=e[s].column),e[s].column>n&&(n=e[s].column),-1==r.indexOf(e[s].index)&&r.push(e[s].index);for(var o in r){for(var a=r[o],l=i;n>=l;l++){var d=this.columns[l];d.hidden!==!0&&(t+=w2utils.stripTags(this.getCellHTML(a,l))+"\t")}t=t.substr(0,t.length-1),t+="\n"}}else{for(var l in this.columns){var d=this.columns[l];d.hidden!==!0&&(t+='"'+w2utils.stripTags(d.caption?d.caption:d.field)+'"\t')}t=t.substr(0,t.length-1),t+="\n";for(var s in e){var a=this.get(e[s],!0);for(var l in this.columns){var d=this.columns[l];d.hidden!==!0&&(t+='"'+w2utils.stripTags(this.getCellHTML(a,l))+'"\t')}t=t.substr(0,t.length-1),t+="\n"}}t=t.substr(0,t.length-1);var u=this.trigger({phase:"before",type:"copy",target:this.name,text:t});return u.isCancelled===!0?"":(t=u.text,this.trigger($.extend(u,{phase:"after"})),t)},paste:function(e){var t=this.getSelection(),i=this.get(t[0].recid,!0),n=t[0].column,r=this.trigger({phase:"before",type:"paste",target:this.name,text:e,index:i,column:n});if(r.isCancelled!==!0){if(e=r.text,"row"==this.selectType||0==t.length)return console.log("ERROR: You can paste only if grid.selectType = 'cell' and when at least one cell selected."),void this.trigger($.extend(r,{phase:"after"}));var s=[],e=e.split("\n");for(var o in e){var a=e[o].split("\t"),l=0,d=this.records[i],u=[];for(var c in a)if(this.columns[n+l]){var h=this.columns[n+l].field;d.changes=d.changes||{},d.changes[h]=a[c],u.push(n+l),l++}for(var p in u)s.push({recid:d.recid,column:u[p]});i++}this.selectNone(),this.select.apply(this,s),this.refresh(),this.trigger($.extend(r,{phase:"after"}))}},resize:function(){var e=this,t=(new Date).getTime();if(this.box&&$(this.box).attr("name")==this.name){$(this.box).find("> div").css("width",$(this.box).width()).css("height",$(this.box).height());var i=this.trigger({phase:"before",type:"resize",target:this.name});if(i.isCancelled!==!0)return e.resizeBoxes(),e.resizeRecords(),this.trigger($.extend(i,{phase:"after"})),(new Date).getTime()-t}},refreshCell:function(e,t){var i=this.get(e,!0),n=!this.records[i]||this.records[i].recid!=e,r=this.getColumn(t,!0),s=n?this.summary[i]:this.records[i],o=this.columns[r],a=$("#grid_"+this.name+"_rec_"+e+" [col="+r+"]");a.html(this.getCellHTML(i,r,n)),s.changes&&"undefined"!=typeof s.changes[o.field]?a.addClass("w2ui-changed"):a.removeClass("w2ui-changed")},refreshRow:function(e){var t=$("#grid_"+this.name+"_rec_"+w2utils.escapeId(e));if(0!=t.length){var i=this.get(e,!0),n=t.attr("line"),r=!this.records[i]||this.records[i].recid!=e,s="object"!=typeof this.url?this.url:this.url.get;if(this.searchData.length>0&&!s)for(var o in this.last.searchIds)this.last.searchIds[o]==i&&(i=o);$(t).replaceWith(this.getRecordHTML(i,n,r)),r&&this.resize()}},refresh:function(){var e=this,t=(new Date).getTime(),i="object"!=typeof this.url?this.url:this.url.get;if(this.total<=0&&!i&&0==this.searchData.length&&(this.total=this.records.length),this.toolbar.disable("w2ui-edit","w2ui-delete"),this.box){var n=this.trigger({phase:"before",target:this.name,type:"refresh"});if(n.isCancelled!==!0){if(this.show.header?$("#grid_"+this.name+"_header").html(this.header+"&nbsp;").show():$("#grid_"+this.name+"_header").hide(),this.show.toolbar){if(this.toolbar&&this.toolbar.get("w2ui-column-on-off")&&this.toolbar.get("w2ui-column-on-off").checked);else if($("#grid_"+this.name+"_toolbar").show(),"object"==typeof this.toolbar){var r=this.toolbar.items;for(var s in r)"w2ui-search"!=r[s].id&&"break"!=r[s].type&&this.toolbar.refresh(r[s].id)}}else $("#grid_"+this.name+"_toolbar").hide();this.searchClose();var o=$("#grid_"+e.name+"_search_all");!this.multiSearch&&"all"==this.last.field&&this.searches.length>0&&(this.last.field=this.searches[0].field,this.last.caption=this.searches[0].caption);for(var a in this.searches)this.searches[a].field==this.last.field&&(this.last.caption=this.searches[a].caption);if(this.last.multi?o.attr("placeholder","["+w2utils.lang("Multiple Fields")+"]"):o.attr("placeholder",this.last.caption),o.val()!=this.last.search){var l=this.last.search,r=o.data("w2field");r&&(l=r.format(l)),o.val(l)}var r=this.find({summary:!0},!0);if(r.length>0){for(var s in r)this.summary.push(this.records[r[s]]);for(var s=r.length-1;s>=0;s--)this.records.splice(r[s],1);this.total=this.total-r.length}var d=e.find({expanded:!0},!0);for(var u in d)e.records[d[u]].expanded=!1;var c="";c+='<div id="grid_'+this.name+'_records" class="w2ui-grid-records"    onscroll="var obj = w2ui[\''+this.name+"'];         obj.last.scrollTop = this.scrollTop;         obj.last.scrollLeft = this.scrollLeft;         $('#grid_"+this.name+"_columns')[0].scrollLeft = this.scrollLeft;        $('#grid_"+this.name+"_summary')[0].scrollLeft = this.scrollLeft;        obj.scroll(event);\">"+this.getRecordsHTML()+'</div><div id="grid_'+this.name+'_columns" class="w2ui-grid-columns">    <table>'+this.getColumnsHTML()+"</table></div>",$("#grid_"+this.name+"_body").html(c),this.summary.length>0?$("#grid_"+this.name+"_summary").html(this.getSummaryHTML()).show():$("#grid_"+this.name+"_summary").hide(),this.show.footer?$("#grid_"+this.name+"_footer").html(this.getFooterHTML()).show():$("#grid_"+this.name+"_footer").hide(),this.searchData.length>0?$("#grid_"+this.name+"_searchClear").show():$("#grid_"+this.name+"_searchClear").hide();var h=this.last.selection;return h.indexes.length==this.records.length||0!==this.searchData.length&&h.indexes.length==this.last.searchIds.length?$("#grid_"+this.name+"_check_all").prop("checked",!0):$("#grid_"+this.name+"_check_all").prop("checked",!1),this.status(),setTimeout(function(){var t=$.trim($("#grid_"+e.name+"_search_all").val());""!=t&&$(e.box).find(".w2ui-grid-data > div").w2marker(t)},50),this.trigger($.extend(n,{phase:"after"})),e.resize(),e.addRange("selection"),setTimeout(function(){e.resize(),e.scroll()},1),e.reorderColumns&&!e.last.columnDrag?e.last.columnDrag=e.initColumnDrag():!e.reorderColumns&&e.last.columnDrag&&e.last.columnDrag.remove(),(new Date).getTime()-t}}},render:function(e){function t(e){if(1==e.which&&("text"==r.last.userSelect&&(delete r.last.userSelect,$(r.box).find(".w2ui-grid-body").css("user-select","none").css("-webkit-user-select","none").css("-moz-user-select","none").css("-ms-user-select","none"),$(this.box).on("selectstart",function(){return!1})),!($(e.target).parents().hasClass("w2ui-head")||$(e.target).hasClass("w2ui-head")||r.last.move&&"expand"==r.last.move.type))){if(e.altKey)$(r.box).off("selectstart"),$(r.box).find(".w2ui-grid-body").css("user-select","text").css("-webkit-user-select","text").css("-moz-user-select","text").css("-ms-user-select","text"),r.selectNone(),r.last.move={type:"text-select"},r.last.userSelect="text";else{if(!r.multiSelect)return;r.last.move={x:e.screenX,y:e.screenY,divX:0,divY:0,recid:$(e.target).parents("tr").attr("recid"),column:"TD"==e.target.tagName?$(e.target).attr("col"):$(e.target).parents("td").attr("col"),type:"select",ghost:!1,start:!0}}$(document).on("mousemove",i),$(document).on("mouseup",n)}}function i(e){var t=r.last.move;if(t&&"select"==t.type&&(t.divX=e.screenX-t.x,t.divY=e.screenY-t.y,!(Math.abs(t.divX)<=1&&Math.abs(t.divY)<=1))){if(r.last.cancelClick=!0,1==r.reorderRows){if(!t.ghost){var i=$("#grid_"+r.name+"_rec_"+t.recid),n=i.parents("table").find("tr:first-child").clone();t.offsetY=e.offsetY,t.from=t.recid,t.pos=i.position(),t.ghost=$(i).clone(!0),t.ghost.removeAttr("id"),i.find("td:first-child").replaceWith('<td colspan="1000" style="height: '+r.recordHeight+'px; background-color: #ddd"></td>');var s=$(r.box).find(".w2ui-grid-records");s.append('<table id="grid_'+r.name+'_ghost" style="position: absolute; z-index: 999999; opacity: 0.8; border-bottom: 2px dashed #aaa; border-top: 2px dashed #aaa; pointer-events: none;"></table>'),$("#grid_"+r.name+"_ghost").append(n).append(t.ghost)}var o=$(e.target).parents("tr").attr("recid");if(o!=t.from){var a=$("#grid_"+r.name+"_rec_"+t.recid),l=$("#grid_"+r.name+"_rec_"+o);e.screenY-t.lastY<0?a.after(l):l.after(a),t.lastY=e.screenY,t.to=o}var d=$("#grid_"+r.name+"_ghost"),s=$(r.box).find(".w2ui-grid-records");return void d.css({top:t.pos.top+t.divY+s.scrollTop(),left:t.pos.left})}t.start&&t.recid&&(r.selectNone(),t.start=!1);var u=[],o="TR"==e.target.tagName?$(e.target).attr("recid"):$(e.target).parents("tr").attr("recid");if("undefined"!=typeof o){var c=r.get(t.recid,!0);if(null!==c){var h=r.get(o,!0);if(null!==h){var p=parseInt(t.column),f=parseInt("TD"==e.target.tagName?$(e.target).attr("col"):$(e.target).parents("td").attr("col"));if(c>h){var n=c;c=h,h=n}var n="ind1:"+c+",ind2;"+h+",col1:"+p+",col2:"+f;if(t.range!=n){t.range=n;for(var g=c;h>=g;g++)if(!(r.last.searchIds.length>0&&-1==r.last.searchIds.indexOf(g)))if("row"!=r.selectType){if(p>f){var n=p;p=f,f=n}for(var n=[],m=p;f>=m;m++)r.columns[m].hidden||u.push({recid:r.records[g].recid,column:parseInt(m)})}else u.push(r.records[g].recid);if("row"!=r.selectType){var v=r.getSelection(),n=[];for(var y in u){var w=!1;for(var b in v)u[y].recid==v[b].recid&&u[y].column==v[b].column&&(w=!0);w||n.push({recid:u[y].recid,column:u[y].column})}r.select.apply(r,n);var n=[];for(var b in v){var w=!1;for(var y in u)u[y].recid==v[b].recid&&u[y].column==v[b].column&&(w=!0);w||n.push({recid:v[b].recid,column:v[b].column})}r.unselect.apply(r,n)}else if(r.multiSelect){var v=r.getSelection();for(var y in u)-1==v.indexOf(u[y])&&r.select(u[y]);for(var b in v)-1==u.indexOf(v[b])&&r.unselect(v[b])}}}}}}}function n(e){var t=r.last.move;if(setTimeout(function(){delete r.last.cancelClick},1),!$(e.target).parents().hasClass(".w2ui-head")&&!$(e.target).hasClass(".w2ui-head")){if(t&&"select"==t.type&&1==r.reorderRows){var s=r.get(t.from,!0),o=r.records[s];r.records.splice(s,1);var a=r.get(t.to,!0);s>a?r.records.splice(a,0,o):r.records.splice(a+1,0,o),$("#grid_"+r.name+"_ghost").remove(),r.refresh()}delete r.last.move,$(document).off("mousemove",i),$(document).off("mouseup",n)}}var r=this,s=(new Date).getTime();if("undefined"!=typeof e&&null!=e&&($(this.box).find("#grid_"+this.name+"_body").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-grid").html(""),this.box=e),this.box){null==this.last.sortData&&(this.last.sortData=this.sortData);var o="object"!=typeof this.url?this.url:this.url.get,a=this.trigger({phase:"before",target:this.name,type:"render",box:e});if(a.isCancelled!==!0){if($(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-grid").html('<div>    <div id="grid_'+this.name+'_header" class="w2ui-grid-header"></div>    <div id="grid_'+this.name+'_toolbar" class="w2ui-grid-toolbar"></div>    <div id="grid_'+this.name+'_body" class="w2ui-grid-body"></div>    <div id="grid_'+this.name+'_summary" class="w2ui-grid-body w2ui-grid-summary"></div>    <div id="grid_'+this.name+'_footer" class="w2ui-grid-footer"></div></div>'),"row"!=this.selectType&&$(this.box).addClass("w2ui-ss"),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style),this.initToolbar(),null!=this.toolbar&&this.toolbar.render($("#grid_"+this.name+"_toolbar")[0]),this.last.field&&"all"!=this.last.field){var l=this.searchData;this.initAllField(this.last.field,1==l.length?l[0].value:null)}return $("#grid_"+this.name+"_footer").html(this.getFooterHTML()),this.last.state||(this.last.state=this.stateSave(!0)),this.stateRestore(),o&&this.refresh(),this.reload(),$(this.box).on("mousedown",t),$(this.box).on("selectstart",function(){return!1}),this.trigger($.extend(a,{phase:"after"})),0==$(".w2ui-layout").length&&(this.tmp_resize=function(){w2ui[r.name].resize()},$(window).off("resize",this.tmp_resize).on("resize",this.tmp_resize)),(new Date).getTime()-s}}},destroy:function(){var e=this.trigger({phase:"before",target:this.name,type:"destroy"});e.isCancelled!==!0&&($(window).off("resize",this.tmp_resize),"object"==typeof this.toolbar&&this.toolbar.destroy&&this.toolbar.destroy(),$(this.box).find("#grid_"+this.name+"_body").length>0&&$(this.box).removeAttr("name").off("selectstart").removeClass("w2ui-reset w2ui-grid").html(""),delete w2ui[this.name],this.trigger($.extend(e,{phase:"after"})))},initColumnOnOff:function(){if(this.show.toolbarColumns){var e=this,t='<div class="w2ui-col-on-off"><table><tr><td style="width: 30px">    <input id="grid_'+this.name+'_column_ln_check" type="checkbox" tabIndex="-1" '+(e.show.lineNumbers?"checked":"")+"        onclick=\"w2ui['"+e.name+"'].columnOnOff(this, event, 'line-numbers');\"></td><td onclick=\"w2ui['"+e.name+"'].columnOnOff(this, event, 'line-numbers'); $('#w2ui-overlay')[0].hide();\">    <label for=\"grid_"+this.name+'_column_ln_check">'+w2utils.lang("Line #")+"</label></td></tr>";for(var i in this.columns){var n=this.columns[i],r=this.columns[i].caption;
n.hideable!==!1&&(!r&&this.columns[i].hint&&(r=this.columns[i].hint),r||(r="- column "+(parseInt(i)+1)+" -"),t+='<tr><td style="width: 30px">    <input id="grid_'+this.name+"_column_"+i+'_check" type="checkbox" tabIndex="-1" '+(n.hidden?"":"checked")+"        onclick=\"w2ui['"+e.name+"'].columnOnOff(this, event, '"+n.field+'\');"></td><td>    <label for="grid_'+this.name+"_column_"+i+'_check">'+r+"</label></td></tr>")}t+='<tr><td colspan="2"><div style="border-top: 1px solid #ddd;"></div></td></tr>';var s="object"!=typeof this.url?this.url:this.url.get;s&&e.show.skipRecords&&(t+='<tr><td colspan="2" style="padding: 0px">    <div style="cursor: pointer; padding: 2px 8px; cursor: default">'+w2utils.lang("Skip")+'        <input type="text" style="width: 45px" value="'+this.offset+'"             onkeypress="if (event.keyCode == 13) {                w2ui[\''+e.name+"'].skip(this.value);                $('#w2ui-overlay')[0].hide();             }\"> "+w2utils.lang("Records")+"    </div></td></tr>"),t+='<tr><td colspan="2" onclick="w2ui[\''+e.name+"'].stateSave(); $('#w2ui-overlay')[0].hide();\">    <div style=\"cursor: pointer; padding: 4px 8px; cursor: default\">"+w2utils.lang("Save Grid State")+'</div></td></tr><tr><td colspan="2" onclick="w2ui[\''+e.name+"'].stateReset(); $('#w2ui-overlay')[0].hide();\">    <div style=\"cursor: pointer; padding: 4px 8px; cursor: default\">"+w2utils.lang("Restore Default State")+"</div></td></tr>",t+="</table></div>",this.toolbar.get("w2ui-column-on-off").html=t}},initColumnDrag:function(){function e(){l.pressed=!1,clearTimeout(l.timeout)}function t(e){l.timeout&&clearTimeout(l.timeout);var t=this;l.pressed=!0,l.timeout=setTimeout(function(){if(l.pressed){var r,s,o,d,u,c=["w2ui-col-number","w2ui-col-expand","w2ui-col-select"],h=["w2ui-head-last"],p=c.concat(h),f=".w2ui-col-number, .w2ui-col-expand, .w2ui-col-select",g=".w2ui-head.w2ui-col-number, .w2ui-head.w2ui-col-expand, .w2ui-head.w2ui-col-select";if($(e.originalEvent.target).parents().hasClass("w2ui-head")){for(var m=0,v=p.length;v>m;m++)if($(e.originalEvent.target).parents().hasClass(p[m]))return;if(l.numberPreColumnsPresent=$(a.box).find(g).length,l.columnHead=d=$(e.originalEvent.target).parents(".w2ui-head"),u=parseInt(d.attr("col"),10),r=a.trigger({type:"columnDragStart",phase:"before",originalEvent:e,origColumnNumber:u,target:d[0]}),r.isCancelled===!0)return!1;s=l.columns=$(a.box).find(".w2ui-head:not(.w2ui-head-last)"),$(document).on("mouseup",n),$(document).on("mousemove",i),l.originalPos=parseInt($(e.originalEvent.target).parent(".w2ui-head").attr("col"),10),l.ghost=$(t).clone(!0),$(l.ghost).find('[col]:not([col="'+l.originalPos+'"]), .w2ui-toolbar, .w2ui-grid-header').remove(),$(l.ghost).find(f).remove(),$(l.ghost).find(".w2ui-grid-body").css({top:0}),o=$(l.ghost).find('[col="'+l.originalPos+'"]'),$(document.body).append(l.ghost),$(l.ghost).css({width:0,height:0,margin:0,position:"fixed",zIndex:999999,opacity:0}).addClass(".w2ui-grid-ghost").animate({width:o.width(),height:$(a.box).find(".w2ui-grid-body:first").height(),left:e.pageX,top:e.pageY,opacity:.8},0),l.offsets=[];for(var m=0,v=s.length;v>m;m++)l.offsets.push($(s[m]).offset().left);a.trigger($.extend(r,{phase:"after"}))}}},150)}function i(e){if(l.pressed){var t=e.originalEvent.pageX,i=e.originalEvent.pageY,n=l.offsets,a=$(".w2ui-head:not(.w2ui-head-last)").width();l.targetInt=Math.max(l.numberPreColumnsPresent,s(t,n,a)),r(l.targetInt),o(t,i)}}function n(e){l.pressed=!1;var t,r,s,o,d,u=$(".w2ui-grid-ghost");return t=a.trigger({type:"columnDragEnd",phase:"before",originalEvent:e,target:l.columnHead[0]}),t.isCancelled!==!0&&(s=a.columns[l.originalPos],o=a.columns,d=$(l.columns[Math.min(l.lastInt,l.columns.length-1)]),r=l.lastInt<l.columns.length?parseInt(d.attr("col")):o.length,r!==l.originalPos+1&&r!==l.originalPos&&d&&d.length?($(l.ghost).animate({top:$(a.box).offset().top,left:d.offset().left,width:0,height:0,opacity:.2},300,function(){$(this).remove(),u.remove()}),o.splice(r,0,$.extend({},s)),o.splice(o.indexOf(s),1)):($(l.ghost).remove(),u.remove()),$(document).off("mouseup",n),$(document).off("mousemove",i),l.marker&&l.marker.remove(),l={},a.refresh(),void a.trigger($.extend(t,{phase:"after",targetColumnNumber:r-1})))}function r(e){l.marker||l.markerLeft||(l.marker=$('<div class="col-intersection-marker"><div class="top-marker"></div><div class="bottom-marker"></div></div>'),l.markerLeft=$('<div class="col-intersection-marker"><div class="top-marker"></div><div class="bottom-marker"></div></div>')),l.lastInt&&l.lastInt===e||(l.lastInt=e,l.marker.remove(),l.markerLeft.remove(),$(".w2ui-head").removeClass("w2ui-col-intersection"),e>=l.columns.length?($(l.columns[l.columns.length-1]).children("div:last").append(l.marker.addClass("right").removeClass("left")),$(l.columns[l.columns.length-1]).addClass("w2ui-col-intersection")):e<=l.numberPreColumnsPresent?($(l.columns[l.numberPreColumnsPresent]).prepend(l.marker.addClass("left").removeClass("right")).css({position:"relative"}),$(l.columns[l.numberPreColumnsPresent]).prev().addClass("w2ui-col-intersection")):($(l.columns[e]).children("div:last").prepend(l.marker.addClass("left").removeClass("right")),$(l.columns[e]).prev().children("div:last").append(l.markerLeft.addClass("right").removeClass("left")).css({position:"relative"}),$(l.columns[e-1]).addClass("w2ui-col-intersection")))}function s(e,t,i){if(e<=t[0])return 0;if(e>=t[t.length-1]+i)return t.length;for(var n=0,r=t.length;r>n;n++){var s=t[n],o=t[n+1]||t[n]+i,a=(o-t[n])/2+t[n];if(e>s&&a>=e)return n;if(e>a&&o>=e)return n+1}return intersection}function o(e,t){$(l.ghost).css({left:e-10,top:t-10})}if(this.columnGroups&&this.columnGroups.length)throw"Draggable columns are not currently supported with column groups.";var a=this,l={};return l.lastInt=null,l.pressed=!1,l.timeout=null,l.columnHead=null,$(a.box).on("mousedown",t),$(a.box).on("mouseup",e),{remove:function(){$(a.box).off("mousedown",t),$(a.box).off("mouseup",e),$(a.box).find(".w2ui-head").removeAttr("draggable"),a.last.columnDrag=!1}}},columnOnOff:function(e,t,i){var n=this.trigger({phase:"before",target:this.name,type:"columnOnOff",checkbox:e,field:i,originalEvent:t});if(n.isCancelled!==!0){var r=this;for(var s in this.records)this.records[s].expanded===!0&&(this.records[s].expanded=!1);var o=!0;if("line-numbers"==i)this.show.lineNumbers=!this.show.lineNumbers,this.refresh();else{var a=this.getColumn(i);a.hidden?($(e).prop("checked",!0),this.showColumn(a.field)):($(e).prop("checked",!1),this.hideColumn(a.field)),o=!1}o&&setTimeout(function(){$().w2overlay("",{name:"searches-"+this.name}),r.toolbar.uncheck("column-on-off")},100),this.trigger($.extend(n,{phase:"after"}))}},initToolbar:function(){if("undefined"==typeof this.toolbar.render){var e=this.toolbar.items;if(this.toolbar.items=[],this.toolbar=$().w2toolbar($.extend(!0,{},this.toolbar,{name:this.name+"_toolbar",owner:this})),this.show.toolbarReload&&this.toolbar.items.push($.extend(!0,{},this.buttons.reload)),this.show.toolbarColumns&&this.toolbar.items.push($.extend(!0,{},this.buttons.columns)),(this.show.toolbarReload||this.show.toolbarColumn)&&this.toolbar.items.push({type:"break",id:"w2ui-break0"}),this.show.toolbarSearch){var t='<div class="w2ui-toolbar-search"><table cellpadding="0" cellspacing="0"><tr>    <td>'+this.buttons.search.html+'</td>    <td>        <input id="grid_'+this.name+'_search_all" class="w2ui-search-all"             placeholder="'+this.last.caption+'" value="'+this.last.search+"\"            onkeydown=\"if (event.keyCode == 13 && w2utils.isIE) this.onchange();\"            onchange=\"                var val = this.value;                 var fld = $(this).data('w2field');                 var dat = $(this).data('selected');                 if (fld) val = fld.clean(val);                if (dat != null && $.isPlainObject(dat)) val = dat.id;                w2ui['"+this.name+"'].search(w2ui['"+this.name+'\'].last.field, val);             ">    </td>    <td>        <div title="'+w2utils.lang("Clear Search")+'" class="w2ui-search-clear" id="grid_'+this.name+'_searchClear"               onclick="var obj = w2ui[\''+this.name+"']; obj.searchReset();\"         >&nbsp;&nbsp;</div>    </td></tr></table></div>";this.toolbar.items.push({type:"html",id:"w2ui-search",html:t}),this.multiSearch&&this.searches.length>0&&this.toolbar.items.push($.extend(!0,{},this.buttons["search-go"]))}this.show.toolbarSearch&&(this.show.toolbarAdd||this.show.toolbarEdit||this.show.toolbarDelete||this.show.toolbarSave)&&this.toolbar.items.push({type:"break",id:"w2ui-break1"}),this.show.toolbarAdd&&this.toolbar.items.push($.extend(!0,{},this.buttons.add)),this.show.toolbarEdit&&this.toolbar.items.push($.extend(!0,{},this.buttons.edit)),this.show.toolbarDelete&&this.toolbar.items.push($.extend(!0,{},this.buttons.delete)),this.show.toolbarSave&&((this.show.toolbarAdd||this.show.toolbarDelete||this.show.toolbarEdit)&&this.toolbar.items.push({type:"break",id:"w2ui-break2"}),this.toolbar.items.push($.extend(!0,{},this.buttons.save)));for(var i in e)this.toolbar.items.push(e[i]);var n=this;this.toolbar.on("click",function(e){function t(){$("#w2ui-overlay-searches-"+n.name).data("keepOpen")!==!0&&(o.uncheck(r),$(document).off("click","body",t))}var i=n.trigger({phase:"before",type:"toolbar",target:e.target,originalEvent:e});if(i.isCancelled!==!0){var r=e.target;switch(r){case"w2ui-reload":var s=n.trigger({phase:"before",type:"reload",target:n.name});if(s.isCancelled===!0)return!1;n.reload(),n.trigger($.extend(s,{phase:"after"}));break;case"w2ui-column-on-off":n.initColumnOnOff(),n.initResize(),n.resize();break;case"w2ui-search-advanced":var o=this,a=this.get(r);a.checked?(n.searchClose(),setTimeout(function(){o.uncheck(r)},1)):(n.searchOpen(),e.originalEvent.stopPropagation(),$(document).on("click","body",t));break;case"w2ui-add":var i=n.trigger({phase:"before",target:n.name,type:"add",recid:null});n.trigger($.extend(i,{phase:"after"}));break;case"w2ui-edit":var l=n.getSelection(),d=null;1==l.length&&(d=l[0]);var i=n.trigger({phase:"before",target:n.name,type:"edit",recid:d});n.trigger($.extend(i,{phase:"after"}));break;case"w2ui-delete":n.delete();break;case"w2ui-save":n.save()}n.trigger($.extend(i,{phase:"after"}))}})}},initResize:function(){var e=this;$(this.box).find(".w2ui-resizer").off("click").on("click",function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault&&e.preventDefault()}).off("mousedown").on("mousedown",function(t){t||(t=window.event),window.addEventListener||window.document.attachEvent("onselectstart",function(){return!1}),e.resizing=!0,e.last.tmp={x:t.screenX,y:t.screenY,gx:t.screenX,gy:t.screenY,col:parseInt($(this).attr("name"))},t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault&&t.preventDefault();for(var i in e.columns)e.columns[i].hidden||("undefined"==typeof e.columns[i].sizeOriginal&&(e.columns[i].sizeOriginal=e.columns[i].size),e.columns[i].size=e.columns[i].sizeCalculated);var n={phase:"before",type:"columnResize",target:e.name,column:e.last.tmp.col,field:e.columns[e.last.tmp.col].field};n=e.trigger($.extend(n,{resizeBy:0,originalEvent:t}));var r=function(t){if(1==e.resizing){if(t||(t=window.event),n=e.trigger($.extend(n,{resizeBy:t.screenX-e.last.tmp.gx,originalEvent:t})),n.isCancelled===!0)return void(n.isCancelled=!1);e.last.tmp.x=t.screenX-e.last.tmp.x,e.last.tmp.y=t.screenY-e.last.tmp.y,e.columns[e.last.tmp.col].size=parseInt(e.columns[e.last.tmp.col].size)+e.last.tmp.x+"px",e.resizeRecords(),e.last.tmp.x=t.screenX,e.last.tmp.y=t.screenY}},s=function(t){delete e.resizing,$(document).off("mousemove","body"),$(document).off("mouseup","body"),e.resizeRecords(),e.trigger($.extend(n,{phase:"after",originalEvent:t}))};$(document).on("mousemove","body",r),$(document).on("mouseup","body",s)}).each(function(e,t){var i=$(t).parent();$(t).css({height:"25px","margin-left":i.width()-3+"px"})})},resizeBoxes:function(){var e=($(this.box).find("> div"),$("#grid_"+this.name+"_header")),t=$("#grid_"+this.name+"_toolbar"),i=$("#grid_"+this.name+"_summary"),n=$("#grid_"+this.name+"_footer"),r=$("#grid_"+this.name+"_body");$("#grid_"+this.name+"_columns"),$("#grid_"+this.name+"_records"),this.show.header&&e.css({top:"0px",left:"0px",right:"0px"}),this.show.toolbar&&t.css({top:0+(this.show.header?w2utils.getSize(e,"height"):0)+"px",left:"0px",right:"0px"}),this.show.footer&&n.css({bottom:"0px",left:"0px",right:"0px"}),this.summary.length>0&&i.css({bottom:0+(this.show.footer?w2utils.getSize(n,"height"):0)+"px",left:"0px",right:"0px"}),r.css({top:0+(this.show.header?w2utils.getSize(e,"height"):0)+(this.show.toolbar?w2utils.getSize(t,"height"):0)+"px",bottom:0+(this.show.footer?w2utils.getSize(n,"height"):0)+(this.summary.length>0?w2utils.getSize(i,"height"):0)+"px",left:"0px",right:"0px"})},resizeRecords:function(){var e=this;$(this.box).find(".w2ui-empty-record").remove();var t=$(this.box),i=$(this.box).find("> div"),n=$("#grid_"+this.name+"_header"),r=$("#grid_"+this.name+"_toolbar"),s=$("#grid_"+this.name+"_summary"),o=$("#grid_"+this.name+"_footer"),a=$("#grid_"+this.name+"_body"),l=$("#grid_"+this.name+"_columns"),d=$("#grid_"+this.name+"_records");if(this.fixedBody){var u=i.height()-(this.show.header?w2utils.getSize(n,"height"):0)-(this.show.toolbar?w2utils.getSize(r,"height"):0)-("none"!=s.css("display")?w2utils.getSize(s,"height"):0)-(this.show.footer?w2utils.getSize(o,"height"):0);a.css("height",u)}else{var u=w2utils.getSize(l,"height")+w2utils.getSize($("#grid_"+e.name+"_records table"),"height");e.height=u+w2utils.getSize(i,"+height")+(e.show.header?w2utils.getSize(n,"height"):0)+(e.show.toolbar?w2utils.getSize(r,"height"):0)+("none"!=s.css("display")?w2utils.getSize(s,"height"):0)+(e.show.footer?w2utils.getSize(o,"height"):0),i.css("height",e.height),a.css("height",u),t.css("height",w2utils.getSize(i,"height")+w2utils.getSize(t,"+height"))}var c=this.records.length,h="object"!=typeof this.url?this.url:this.url.get;0==this.searchData.length||h||(c=this.last.searchIds.length);var p=!1,f=!1;if(a.width()<$(d).find(">table").width()&&(p=!0),a.height()-l.height()<$(d).find(">table").height()+(p?w2utils.scrollBarSize():0)&&(f=!0),this.fixedBody||(f=!1),p||f?(l.find("> table > tbody > tr:nth-child(1) td.w2ui-head-last").css("width",w2utils.scrollBarSize()).show(),d.css({top:(this.columnGroups.length>0&&this.show.columns?1:0)+w2utils.getSize(l,"height")+"px","-webkit-overflow-scrolling":"touch","overflow-x":p?"auto":"hidden","overflow-y":f?"auto":"hidden"})):(l.find("> table > tbody > tr:nth-child(1) td.w2ui-head-last").hide(),d.css({top:(this.columnGroups.length>0&&this.show.columns?1:0)+w2utils.getSize(l,"height")+"px",overflow:"hidden"}),d.length>0&&(this.last.scrollTop=0,this.last.scrollLeft=0)),this.show.emptyRecords&&!f){var g=Math.floor(d.height()/this.recordHeight)+1;if(this.fixedBody)for(var m=c;g>=m;m++){var v="";v+='<tr class="'+(m%2?"w2ui-even":"w2ui-odd")+' w2ui-empty-record" style="height: '+this.recordHeight+'px">',this.show.lineNumbers&&(v+='<td class="w2ui-col-number"></td>'),this.show.selectColumn&&(v+='<td class="w2ui-grid-data w2ui-col-select"></td>'),this.show.expandColumn&&(v+='<td class="w2ui-grid-data w2ui-col-expand"></td>');for(var y=0;this.columns.length>0;){var w=this.columns[y];if(w.hidden){if(y++,"undefined"==typeof this.columns[y])break}else if(v+='<td class="w2ui-grid-data" '+("undefined"!=typeof w.attr?w.attr:"")+' col="'+y+'"></td>',y++,"undefined"==typeof this.columns[y])break}v+='<td class="w2ui-grid-data-last"></td>',v+="</tr>",$("#grid_"+this.name+"_records > table").append(v)}}if(a.length>0){for(var b=parseInt(a.width())-(f?w2utils.scrollBarSize():0)-(this.show.lineNumbers?34:0)-(this.show.selectColumn?26:0)-(this.show.expandColumn?26:0),x=b,_=0,k=!1,C=0;C<this.columns.length;C++){var w=this.columns[C];w.gridMinWidth>0&&(w.gridMinWidth>x&&w.hidden!==!0&&(w.hidden=!0,k=!0),w.gridMinWidth<x&&w.hidden===!0&&(w.hidden=!1,k=!0))}if(k===!0)return void this.refresh();for(var C=0;C<this.columns.length;C++){var w=this.columns[C];w.hidden||("px"==String(w.size).substr(String(w.size).length-2).toLowerCase()?(b-=parseFloat(w.size),this.columns[C].sizeCalculated=w.size,this.columns[C].sizeType="px"):(_+=parseFloat(w.size),this.columns[C].sizeType="%",delete w.sizeCorrected))}if(100!=_&&_>0)for(var C=0;C<this.columns.length;C++){var w=this.columns[C];w.hidden||"%"==w.sizeType&&(w.sizeCorrected=Math.round(100*parseFloat(w.size)*100/_)/100+"%")}for(var C=0;C<this.columns.length;C++){var w=this.columns[C];w.hidden||"%"==w.sizeType&&(this.columns[C].sizeCalculated="undefined"!=typeof this.columns[C].sizeCorrected?Math.floor(b*parseFloat(w.sizeCorrected)/100)-1+"px":Math.floor(b*parseFloat(w.size)/100)-1+"px")}}for(var T=0,C=0;C<this.columns.length;C++){var w=this.columns[C];w.hidden||("undefined"==typeof w.min&&(w.min=20),parseInt(w.sizeCalculated)<parseInt(w.min)&&(w.sizeCalculated=w.min+"px"),parseInt(w.sizeCalculated)>parseInt(w.max)&&(w.sizeCalculated=w.max+"px"),T+=parseInt(w.sizeCalculated))}var S=parseInt(x)-parseInt(T);if(S>0&&_>0)for(var C=0;;){var w=this.columns[C];if("undefined"!=typeof w)if(w.hidden||"px"==w.sizeType)C++;else{if(w.sizeCalculated=parseInt(w.sizeCalculated)+1+"px",S--,0==S)break;C++}else C=0}else S>0&&l.find("> table > tbody > tr:nth-child(1) td.w2ui-head-last").css("width",w2utils.scrollBarSize()).show();l.find("> table > tbody > tr:nth-child(1) td").each(function(t,i){var n=$(i).attr("col");"undefined"!=typeof n&&e.columns[n]&&$(i).css("width",e.columns[n].sizeCalculated),$(i).hasClass("w2ui-head-last")&&$(i).css("width",w2utils.scrollBarSize()+(S>0&&0==_?S:0)+"px")}),3==l.find("> table > tbody > tr").length&&l.find("> table > tbody > tr:nth-child(1) td").html("").css({height:"0px",border:"0px",padding:"0px",margin:"0px"}),d.find("> table > tbody > tr:nth-child(1) td").each(function(t,i){var n=$(i).attr("col");"undefined"!=typeof n&&e.columns[n]&&$(i).css("width",e.columns[n].sizeCalculated),$(i).hasClass("w2ui-grid-data-last")&&$(i).css("width",(S>0&&0==_?S:0)+"px")}),s.find("> table > tbody > tr:nth-child(1) td").each(function(t,i){var n=$(i).attr("col");"undefined"!=typeof n&&e.columns[n]&&$(i).css("width",e.columns[n].sizeCalculated),$(i).hasClass("w2ui-grid-data-last")&&$(i).css("width",w2utils.scrollBarSize()+(S>0&&0==_?S:0)+"px")}),this.initResize(),this.refreshRanges(),(this.last.scrollTop||this.last.scrollLeft)&&d.length>0&&(l.prop("scrollLeft",this.last.scrollLeft),d.prop("scrollTop",this.last.scrollTop),d.prop("scrollLeft",this.last.scrollLeft))},getSearchesHTML:function(){for(var e='<table cellspacing="0">',t=!1,i=0;i<this.searches.length;i++){var n=this.searches[i];if(n.type=String(n.type).toLowerCase(),!n.hidden){var r="";if(0==t&&(r='<button class="w2ui-btn close-btn" onclick="obj = w2ui[\''+this.name+"']; if (obj) { obj.searchClose(); }\">X</button",t=!0),"undefined"==typeof n.inTag&&(n.inTag=""),"undefined"==typeof n.outTag&&(n.outTag=""),"undefined"==typeof n.type&&(n.type="text"),-1!=["text","alphanumeric","combo"].indexOf(n.type))var s='<select id="grid_'+this.name+"_operator_"+i+'" onclick="event.stopPropagation();">    <option value="is">'+w2utils.lang("is")+'</option>    <option value="begins">'+w2utils.lang("begins")+'</option>    <option value="contains">'+w2utils.lang("contains")+'</option>    <option value="ends">'+w2utils.lang("ends")+"</option></select>";if(-1!=["int","float","money","currency","percent","date","time"].indexOf(n.type))var s='<select id="grid_'+this.name+"_operator_"+i+'"         onchange="w2ui[\''+this.name+"'].initOperator(this, "+i+');" onclick="event.stopPropagation();">    <option value="is">'+w2utils.lang("is")+"</option>"+(-1!=["int"].indexOf(n.type)?'<option value="in">'+w2utils.lang("in")+"</option>":"")+(-1!=["int"].indexOf(n.type)?'<option value="not in">'+w2utils.lang("not in")+"</option>":"")+'<option value="between">'+w2utils.lang("between")+"</option></select>";if(-1!=["select","list","hex"].indexOf(n.type))var s='<select id="grid_'+this.name+"_operator_"+i+'" onclick="event.stopPropagation();">    <option value="is">'+w2utils.lang("is")+"</option></select>";if(-1!=["enum"].indexOf(n.type))var s='<select id="grid_'+this.name+"_operator_"+i+'" onclick="event.stopPropagation();">    <option value="in">'+w2utils.lang("in")+'</option>    <option value="not in">'+w2utils.lang("not in")+"</option></select>";switch(e+='<tr>    <td class="close-btn">'+r+'</td>    <td class="caption">'+n.caption+'</td>    <td class="operator">'+s+'</td>    <td class="value">',n.type){case"text":case"alphanumeric":case"hex":case"list":case"combo":case"enum":e+='<input rel="search" type="text" style="width: 300px;" id="grid_'+this.name+"_field_"+i+'" name="'+n.field+'" '+n.inTag+">";break;case"int":case"float":case"money":case"currency":case"percent":case"date":case"time":e+='<input rel="search" type="text" size="12" id="grid_'+this.name+"_field_"+i+'" name="'+n.field+'" '+n.inTag+'><span id="grid_'+this.name+"_range_"+i+'" style="display: none">&nbsp;-&nbsp;&nbsp;<input rel="search" type="text" style="width: 90px" id="grid_'+this.name+"_field2_"+i+'" name="'+n.field+'" '+n.inTag+"></span>";break;case"select":e+='<select rel="search" id="grid_'+this.name+"_field_"+i+'" name="'+n.field+'" '+n.inTag+'  onclick="event.stopPropagation();"></select>'}e+=n.outTag+"    </td></tr>"}}return e+='<tr>    <td colspan="4" class="actions">        <div>        <button class="w2ui-btn" onclick="obj = w2ui[\''+this.name+"']; if (obj) { obj.searchReset(); }\">"+w2utils.lang("Reset")+'</button>        <button class="w2ui-btn w2ui-btn-blue" onclick="obj = w2ui[\''+this.name+"']; if (obj) { obj.search(); }\">"+w2utils.lang("Search")+"</button>        </div>    </td></tr></table>"},initOperator:function(e,t){var i=this,n=i.searches[t],r=$("#grid_"+i.name+"_range_"+t),s=$("#grid_"+i.name+"_field_"+t),o=s.parent().find("span input");s.w2field("in"==$(e).val()||"not in"==$(e).val()?"clear":n.type),"between"==$(e).val()?(r.show(),o.w2field(n.type)):r.hide()},initSearches:function(){var e=this;for(var t in this.searches){var i=this.searches[t],n=this.getSearchData(i.field);switch(i.type=String(i.type).toLowerCase(),"object"!=typeof i.options&&(i.options={}),i.type){case"text":case"alphanumeric":$("#grid_"+this.name+"_operator_"+t).val("begins"),-1!=["alphanumeric","hex"].indexOf(i.type)&&$("#grid_"+this.name+"_field_"+t).w2field(i.type,i.options);break;case"int":case"float":case"money":case"currency":case"percent":case"date":case"time":if(n&&"int"==n.type&&-1!=["in","not in"].indexOf(n.operator))break;$("#grid_"+this.name+"_field_"+t).w2field(i.type,i.options),$("#grid_"+this.name+"_field2_"+t).w2field(i.type,i.options),setTimeout(function(){$("#grid_"+e.name+"_field_"+t).keydown(),$("#grid_"+e.name+"_field2_"+t).keydown()},1);break;case"hex":break;case"list":case"combo":case"enum":var r=i.options;"list"==i.type&&(r.selected={}),"enum"==i.type&&(r.selected=[]),n&&(r.selected=n.value),$("#grid_"+this.name+"_field_"+t).w2field(i.type,r),"combo"==i.type&&$("#grid_"+this.name+"_operator_"+t).val("begins");break;case"select":var r='<option value="">--</option>';for(var s in i.options.items){var o=i.options.items[s];if($.isPlainObject(i.options.items[s])){var a=o.id,l=o.text;"undefined"==typeof a&&"undefined"!=typeof o.value&&(a=o.value),"undefined"==typeof l&&"undefined"!=typeof o.caption&&(l=o.caption),null==a&&(a=""),r+='<option value="'+a+'">'+l+"</option>"}else r+='<option value="'+o+'">'+o+"</option>"}$("#grid_"+this.name+"_field_"+t).html(r)}null!=n&&("int"==n.type&&-1!=["in","not in"].indexOf(n.operator)&&$("#grid_"+this.name+"_field_"+t).w2field("clear").val(n.value),$("#grid_"+this.name+"_operator_"+t).val(n.operator).trigger("change"),$.isArray(n.value)?-1!=["in","not in"].indexOf(n.operator)?$("#grid_"+this.name+"_field_"+t).val(n.value).trigger("change"):($("#grid_"+this.name+"_field_"+t).val(n.value[0]).trigger("change"),$("#grid_"+this.name+"_field2_"+t).val(n.value[1]).trigger("change")):"udefined"!=typeof n.value&&$("#grid_"+this.name+"_field_"+t).val(n.value).trigger("change"))}$("#w2ui-overlay-searches-"+this.name+" .w2ui-grid-searches *[rel=search]").on("keypress",function(t){13==t.keyCode&&(e.search(),$().w2overlay())})},getColumnsHTML:function(){function e(){var e="<tr>";""!=i.columnGroups[i.columnGroups.length-1].caption&&i.columnGroups.push({caption:""}),i.show.lineNumbers&&(e+='<td class="w2ui-head w2ui-col-number">    <div>&nbsp;</div></td>'),i.show.selectColumn&&(e+='<td class="w2ui-head w2ui-col-select">    <div>&nbsp;</div></td>'),i.show.expandColumn&&(e+='<td class="w2ui-head w2ui-col-expand">    <div>&nbsp;</div></td>');for(var t=0,n=0;n<i.columnGroups.length;n++){var r=i.columnGroups[n],s=i.columns[t];if(("undefined"==typeof r.span||r.span!=parseInt(r.span))&&(r.span=1),"undefined"!=typeof r.colspan&&(r.span=r.colspan),r.master===!0){var o="";for(var a in i.sortData)i.sortData[a].field==s.field&&(RegExp("asc","i").test(i.sortData[a].direction)&&(o="w2ui-sort-up"),RegExp("desc","i").test(i.sortData[a].direction)&&(o="w2ui-sort-down"));var l="";s.resizable!==!1&&(l='<div class="w2ui-resizer" name="'+t+'"></div>'),e+='<td class="w2ui-head '+o+'" col="'+t+'" rowspan="2" colspan="'+(r.span+(n==i.columnGroups.length-1?1:0))+'"     onclick="w2ui[\''+i.name+"'].columnClick('"+s.field+"', event);\">"+l+'    <div class="w2ui-col-group w2ui-col-header '+(o?"w2ui-col-sorted":"")+'">        <div class="'+o+'"></div>'+(s.caption?s.caption:"&nbsp;")+"    </div></td>"}else e+='<td class="w2ui-head" col="'+t+'"         colspan="'+(r.span+(n==i.columnGroups.length-1?1:0))+'">    <div class="w2ui-col-group">'+(r.caption?r.caption:"&nbsp;")+"    </div></td>";t+=r.span}return e+="</tr>"}function t(e){var t="<tr>",n=!i.reorderColumns||i.columnGroups&&i.columnGroups.length?"":" w2ui-reorder-cols-head ";i.show.lineNumbers&&(t+='<td class="w2ui-head w2ui-col-number" onclick="w2ui[\''+i.name+"'].columnClick('line-number', event);\">    <div>#</div></td>"),i.show.selectColumn&&(t+='<td class="w2ui-head w2ui-col-select"         onclick="if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;">    <div>        <input type="checkbox" id="grid_'+i.name+'_check_all" tabIndex="-1"            style="'+(0==i.multiSelect?"display: none;":"")+'"            onclick="if (this.checked) w2ui[\''+i.name+"'].selectAll();                      else w2ui['"+i.name+"'].selectNone();                      if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;                      this.blur();\">    </div></td>"),i.show.expandColumn&&(t+='<td class="w2ui-head w2ui-col-expand">    <div>&nbsp;</div></td>');for(var r=0,s=0,o=0;o<i.columns.length;o++){var a=i.columns[o],l={};if(o==s&&(s+="undefined"!=typeof i.columnGroups[r]?parseInt(i.columnGroups[r].span):0,r++),"undefined"!=typeof i.columnGroups[r-1])var l=i.columnGroups[r-1];if(!a.hidden){var d="";for(var u in i.sortData)i.sortData[u].field==a.field&&(RegExp("asc","i").test(i.sortData[u].direction)&&(d="w2ui-sort-up"),RegExp("desc","i").test(i.sortData[u].direction)&&(d="w2ui-sort-down"));if(l.master!==!0||e){var c="";a.resizable!==!1&&(c='<div class="w2ui-resizer" name="'+o+'"></div>'),t+='<td col="'+o+'" class="w2ui-head '+d+n+'"     onclick="w2ui[\''+i.name+"'].columnClick('"+a.field+"', event);\">"+c+'    <div class="w2ui-col-header '+(d?"w2ui-col-sorted":"")+'">        <div class="'+d+'"></div>'+(a.caption?a.caption:"&nbsp;")+"    </div></td>"}}}return t+='<td class="w2ui-head w2ui-head-last"><div>&nbsp;</div></td>',t+="</tr>"}var i=this,n="";return this.show.columnHeaders&&(n=this.columnGroups.length>0?t(!0)+e()+t(!1):t(!0)),n},getRecordsHTML:function(){var e="object"!=typeof this.url?this.url:this.url.get,t=this.records.length;0==this.searchData.length||e||(t=this.last.searchIds.length),this.show_extra=t>300?30:300;var i=$("#grid_"+this.name+"_records"),n=Math.floor(i.height()/this.recordHeight)+this.show_extra+1;(!this.fixedBody||n>t)&&(n=t);var r="<table>"+this.getRecordHTML(-1,0);r+='<tr id="grid_'+this.name+'_rec_top" line="top" style="height: 0px">    <td colspan="200"></td></tr>';for(var s=0;n>s;s++)r+=this.getRecordHTML(s,s+1);return r+='<tr id="grid_'+this.name+'_rec_bottom" line="bottom" style="height: '+(t-n)*this.recordHeight+'px">    <td colspan="200"></td></tr><tr id="grid_'+this.name+'_rec_more" style="display: none">    <td colspan="200" class="w2ui-load-more"></td></tr></table>',this.last.range_start=0,this.last.range_end=n,r},getSummaryHTML:function(){if(0!=this.summary.length){for(var e="<table>",t=0;t<this.summary.length;t++)e+=this.getRecordHTML(t,t+1,!0);return e+="</table>"}},scroll:function(){function e(){t.markSearch!==!1&&(clearTimeout(t.last.marker_timer),t.last.marker_timer=setTimeout(function(){var e=[];for(var i in t.searchData){var n=t.searchData[i];-1==$.inArray(n.value,e)&&e.push(n.value)}e.length>0&&$(t.box).find(".w2ui-grid-data > div").w2marker(e)},50))}var t=((new Date).getTime(),this),i="object"!=typeof this.url?this.url:this.url.get,n=$("#grid_"+this.name+"_records"),r=this.records.length;if(0==this.searchData.length||i||(r=this.last.searchIds.length),0!=r&&0!=n.length&&0!=n.height()){if(this.show_extra=r>300?30:300,n.height()<r*this.recordHeight&&"hidden"==n.css("overflow-y"))return void(this.total>0&&this.refresh());var s=Math.round(n[0].scrollTop/this.recordHeight+1),o=s+(Math.round(n.height()/this.recordHeight)-1);if(s>r&&(s=r),o>r&&(o=r),$("#grid_"+this.name+"_footer .w2ui-footer-right").html(w2utils.formatNumber(this.offset+s)+"-"+w2utils.formatNumber(this.offset+o)+" "+w2utils.lang("of")+" "+w2utils.formatNumber(this.total)+(i?" ("+w2utils.lang("buffered")+" "+w2utils.formatNumber(r)+(this.offset>0?", skip "+w2utils.formatNumber(this.offset):"")+")":"")),i||this.fixedBody&&!(this.total<=300)){var a=Math.floor(n[0].scrollTop/this.recordHeight)-this.show_extra,l=a+Math.floor(n.height()/this.recordHeight)+2*this.show_extra+1;1>a&&(a=1),l>this.total&&(l=this.total);var d=n.find("#grid_"+this.name+"_rec_top"),u=n.find("#grid_"+this.name+"_rec_bottom");-1!=String(d.next().prop("id")).indexOf("_expanded_row")&&d.next().remove(),this.total>l&&-1!=String(u.prev().prop("id")).indexOf("_expanded_row")&&u.prev().remove();var c=parseInt(d.next().attr("line")),h=parseInt(u.prev().attr("line"));if(a>c||1==c||this.last.pull_refresh){if(l<=h+this.show_extra-2&&l!=this.total)return;for(this.last.pull_refresh=!1;;){var p=n.find("#grid_"+this.name+"_rec_top").next();if("bottom"==p.attr("line"))break;if(!(parseInt(p.attr("line"))<a))break;p.remove()}var p=n.find("#grid_"+this.name+"_rec_bottom").prev(),f=p.attr("line");"top"==f&&(f=a);for(var g=parseInt(f)+1;l>=g;g++)this.records[g-1]&&(this.records[g-1].expanded===!0&&(this.records[g-1].expanded=!1),u.before(this.getRecordHTML(g-1,g)));e(),setTimeout(function(){t.refreshRanges()},0)}else{if(a>=c-this.show_extra+2&&a>1)return;for(;;){var p=n.find("#grid_"+this.name+"_rec_bottom").prev();if("top"==p.attr("line"))break;if(!(parseInt(p.attr("line"))>l))break;p.remove()}var p=n.find("#grid_"+this.name+"_rec_top").next(),f=p.attr("line");"bottom"==f&&(f=l);for(var g=parseInt(f)-1;g>=a;g--)this.records[g-1]&&(this.records[g-1].expanded===!0&&(this.records[g-1].expanded=!1),d.after(this.getRecordHTML(g-1,g)));e(),setTimeout(function(){t.refreshRanges()},0)}var m=(a-1)*t.recordHeight,v=(r-l)*t.recordHeight;0>v&&(v=0),d.css("height",m+"px"),u.css("height",v+"px"),t.last.range_start=a,t.last.range_end=l;var y=Math.floor(n[0].scrollTop/this.recordHeight),w=y+Math.floor(n.height()/this.recordHeight);if(w+10>r&&this.last.pull_more!==!0&&r<this.total-this.offset)if(this.autoLoad===!0)this.last.pull_more=!0,this.last.xhr_offset+=this.limit,this.request("get-records");else{var b=$("#grid_"+this.name+"_rec_more");"none"==b.css("display")&&b.show().on("click",function(){t.last.pull_more=!0,t.last.xhr_offset+=t.limit,t.request("get-records"),$(this).find("td").html('<div><div style="width: 20px; height: 20px;" class="w2ui-spinner"></div></div>');
}),-1==b.find("td").text().indexOf("Load")&&b.find("td").html("<div>"+w2utils.lang("Load")+" "+t.limit+" "+w2utils.lang("More")+"...</div>")}r>=this.total-this.offset&&$("#grid_"+this.name+"_rec_more").hide()}}},getRecordHTML:function(e,t,i){var n,r="",s=this.last.selection;if(-1==e){r+='<tr line="0">',this.show.lineNumbers&&(r+='<td class="w2ui-col-number" style="height: 0px;"></td>'),this.show.selectColumn&&(r+='<td class="w2ui-col-select" style="height: 0px;"></td>'),this.show.expandColumn&&(r+='<td class="w2ui-col-expand" style="height: 0px;"></td>');for(var o in this.columns)this.columns[o].hidden||(r+='<td class="w2ui-grid-data" col="'+o+'" style="height: 0px;"></td>');return r+='<td class="w2ui-grid-data-last" style="height: 0px;"></td>',r+="</tr>"}var a="object"!=typeof this.url?this.url:this.url.get;if(i!==!0)if(this.searchData.length>0&&!a){if(e>=this.last.searchIds.length)return"";e=this.last.searchIds[e],n=this.records[e]}else{if(e>=this.records.length)return"";n=this.records[e]}else{if(e>=this.summary.length)return"";n=this.summary[e]}if(!n)return"";var l=(w2utils.escapeId(n.recid),!1);if(-1!=s.indexes.indexOf(e)&&(l=!0),r+='<tr id="grid_'+this.name+"_rec_"+n.recid+'" recid="'+n.recid+'" line="'+t+'"  class="'+(t%2==0?"w2ui-even":"w2ui-odd")+(l&&"row"==this.selectType?" w2ui-selected":"")+(n.editable===!1?" w2ui-no-edit":"")+(n.expanded===!0?" w2ui-expanded":"")+'" '+(i!==!0?w2utils.isIOS?"    onclick  = \"w2ui['"+this.name+"'].dblClick('"+n.recid+"', event);\"":"    onclick  = \"w2ui['"+this.name+"'].click('"+n.recid+"', event);\"    oncontextmenu = \"w2ui['"+this.name+"'].contextMenu('"+n.recid+"', event);\"":"")+' style="height: '+this.recordHeight+"px; "+(l||"string"!=typeof n.style?"":n.style)+'" '+("string"==typeof n.style?'custom_style="'+n.style+'"':"")+">",this.show.lineNumbers&&(r+='<td id="grid_'+this.name+"_cell_"+e+"_number"+(i?"_s":"")+'" class="w2ui-col-number">'+(i!==!0?"<div>"+t+"</div>":"")+"</td>"),this.show.selectColumn&&(r+='<td id="grid_'+this.name+"_cell_"+e+"_select"+(i?"_s":"")+'" class="w2ui-grid-data w2ui-col-select"         onclick="if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;">'+(i!==!0?'    <div>        <input class="w2ui-grid-select-check" type="checkbox" tabIndex="-1"            '+(l?'checked="checked"':"")+"            onclick=\"var obj = w2ui['"+this.name+"'];                 if (!obj.multiSelect) { obj.selectNone(); }                if (this.checked) obj.select('"+n.recid+"'); else obj.unselect('"+n.recid+"');                 if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;                this. blur()\">    </div>":"")+"</td>"),this.show.expandColumn){var d="";d=n.expanded===!0?"-":"+","none"==n.expanded&&(d=""),"spinner"==n.expanded&&(d='<div class="w2ui-spinner" style="width: 16px; margin: -2px 2px;"></div>'),r+='<td id="grid_'+this.name+"_cell_"+e+"_expand"+(i?"_s":"")+'" class="w2ui-grid-data w2ui-col-expand">'+(i!==!0?'    <div ondblclick="if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;"             onclick="w2ui[\''+this.name+"'].toggle('"+n.recid+"', event);                 if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\">        "+d+" </div>":"")+"</td>"}for(var u=0;;){var c=this.columns[u];if(c.hidden){if(u++,"undefined"==typeof this.columns[u])break}else{var h=!i&&n.changes&&"undefined"!=typeof n.changes[c.field],p=this.getCellHTML(e,u,i),f="";if("string"==typeof c.render){var g=c.render.toLowerCase().split(":");-1!=["number","int","float","money","currency","percent"].indexOf(g[0])&&(f+="text-align: right;")}"object"==typeof n.style&&"string"==typeof n.style[u]&&(f+=n.style[u]+";");var m=!1;if(l&&-1!=$.inArray(u,s.columns[e])&&(m=!0),r+='<td class="w2ui-grid-data'+(m?" w2ui-selected":"")+(h?" w2ui-changed":"")+'" col="'+u+'"     style="'+f+("undefined"!=typeof c.style?c.style:"")+'" '+("undefined"!=typeof c.attr?c.attr:"")+">"+p+"</td>",u++,"undefined"==typeof this.columns[u])break}}return r+='<td class="w2ui-grid-data-last"></td>',r+="</tr>"},getCellHTML:function(e,t,i){var n=this.columns[t],r=i!==!0?this.records[e]:this.summary[e],s=this.getCellValue(e,t,i),o=n.editable;if(null!=n.render){if("function"==typeof n.render&&(s=$.trim(n.render.call(this,r,e,t)),(s.length<4||"<div"!=s.substr(0,4).toLowerCase())&&(s="<div>"+s+"</div>")),"object"==typeof n.render&&(s="<div>"+(n.render[s]||"")+"</div>"),"string"==typeof n.render){var a=n.render.toLowerCase().split(":"),l="",d="";-1!=["number","int","float","money","currency","percent"].indexOf(a[0])&&("undefined"!=typeof a[1]&&w2utils.isInt(a[1])||(a[1]=0),a[1]>20&&(a[1]=20),a[1]<0&&(a[1]=0),-1!=["money","currency"].indexOf(a[0])&&(a[1]=w2utils.settings.currencyPrecision,l=w2utils.settings.currencyPrefix,d=w2utils.settings.currencySuffix),"percent"==a[0]&&(d="%","0"!==a[1]&&(a[1]=1)),"int"==a[0]&&(a[1]=0),s="<div>"+(""!==s?l+w2utils.formatNumber(Number(s).toFixed(a[1]))+d:"")+"</div>"),"time"==a[0]&&(("undefined"==typeof a[1]||""==a[1])&&(a[1]=w2utils.settings.time_format),s="<div>"+l+w2utils.formatTime(s,"h12"==a[1]?"hh:mi pm":"h24:mi")+d+"</div>"),"date"==a[0]&&(("undefined"==typeof a[1]||""==a[1])&&(a[1]=w2utils.settings.date_display),s="<div>"+l+w2utils.formatDate(s,a[1])+d+"</div>"),"age"==a[0]&&(s="<div>"+l+w2utils.age(s)+d+"</div>"),"toggle"==a[0]&&(s="<div>"+l+(s?"Yes":"")+d+"</div>")}}else{var u="";if(o&&-1!=["checkbox","check"].indexOf(o.type)){var c=i?-(e+1):e;u="text-align: center",s='<input type="checkbox" '+(s?"checked":"")+" onclick=\"    var obj = w2ui['"+this.name+"'];     obj.editChange.call(obj, this, "+c+", "+t+', event); ">'}if(this.show.recordTitles){var h=String(s).replace(/"/g,"''");"undefined"!=typeof n.title&&("function"==typeof n.title&&(h=n.title.call(this,r,e,t)),"string"==typeof n.title&&(h=n.title));var s='<div title="'+w2utils.stripTags(h)+'" style="'+u+'">'+s+"</div>"}else var s='<div style="'+u+'">'+s+"</div>"}return(null==s||"undefined"==typeof s)&&(s=""),s},getCellValue:function(e,t,i){var n=this.columns[t],r=i!==!0?this.records[e]:this.summary[e],s=this.parseField(r,n.field);return r.changes&&"undefined"!=typeof r.changes[n.field]&&(s=r.changes[n.field]),(null==s||"undefined"==typeof s)&&(s=""),s},getFooterHTML:function(){return'<div>    <div class="w2ui-footer-left"></div>    <div class="w2ui-footer-right"></div>    <div class="w2ui-footer-center"></div></div>'},status:function(e){if("undefined"!=typeof e)$("#grid_"+this.name+"_footer").find(".w2ui-footer-left").html(e);else{var t="",i=this.getSelection();if(i.length>0){t=String(i.length).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")+" "+w2utils.lang("selected");var n=i[0];"object"==typeof n&&(n=n.recid+", "+w2utils.lang("Column")+": "+n.column),1==i.length&&(t=w2utils.lang("Record ID")+": "+n+" ")}$("#grid_"+this.name+"_footer .w2ui-footer-left").html(t),1==i.length?this.toolbar.enable("w2ui-edit"):this.toolbar.disable("w2ui-edit"),i.length>=1?this.toolbar.enable("w2ui-delete"):this.toolbar.disable("w2ui-delete")}},lock:function(){var e=$(this.box).find("> div:first-child"),t=Array.prototype.slice.call(arguments,0);t.unshift(e),setTimeout(function(){w2utils.lock.apply(window,t)},10)},unlock:function(){var e=this.box;setTimeout(function(){w2utils.unlock(e)},25)},stateSave:function(e){if(!localStorage)return null;var t={columns:[],show:$.extend({},this.show),last:{search:this.last.search,multi:this.last.multi,logic:this.last.logic,caption:this.last.caption,field:this.last.field,scrollTop:this.last.scrollTop,scrollLeft:this.last.scrollLeft},sortData:[],searchData:[]};for(var i in this.columns){var n=this.columns[i];t.columns.push({field:n.field,hidden:n.hidden,size:n.size,sizeCalculated:n.sizeCalculated,sizeOriginal:n.sizeOriginal,sizeType:n.sizeType})}for(var i in this.sortData)t.sortData.push($.extend({},this.sortData[i]));for(var i in this.searchData)t.searchData.push($.extend({},this.searchData[i]));if(e!==!0){var r=this.trigger({phase:"before",type:"stateSave",target:this.name,state:t});if(r.isCancelled===!0)return void("function"==typeof callBack&&callBack({status:"error",message:"Request aborted."}));try{var s=$.parseJSON(localStorage.w2ui||"{}");s||(s={}),s.states||(s.states={}),s.states[this.name]=t,localStorage.w2ui=JSON.stringify(s)}catch(e){return delete localStorage.w2ui,null}this.trigger($.extend(r,{phase:"after"}))}return t},stateRestore:function(e){var t=this;if(!e)try{if(!localStorage)return!1;var i=$.parseJSON(localStorage.w2ui||"{}");i||(i={}),i.states||(i.states={}),e=i.states[this.name]}catch(e){return delete localStorage.w2ui,null}var n=this.trigger({phase:"before",type:"stateRestore",target:this.name,state:e});if(n.isCancelled===!0)return void("function"==typeof callBack&&callBack({status:"error",message:"Request aborted."}));if($.isPlainObject(e)){$.extend(this.show,e.show),$.extend(this.last,e.last);var r=this.last.scrollTop,s=this.last.scrollLeft;for(var o in e.columns){var i=e.columns[o],a=this.getColumn(i.field);a&&$.extend(a,i)}this.sortData.splice(0,this.sortData.length);for(var o in e.sortData)this.sortData.push(e.sortData[o]);this.searchData.splice(0,this.searchData.length);for(var o in e.searchData)this.searchData.push(e.searchData[o]);setTimeout(function(){t.sortData.length>0&&t.localSort(),t.searchData.length>0&&t.localSearch(),t.last.scrollTop=r,t.last.scrollLeft=s,t.refresh()},1)}return this.trigger($.extend(n,{phase:"after"})),!0},stateReset:function(){if(this.stateRestore(this.last.state),localStorage)try{var e=$.parseJSON(localStorage.w2ui||"{}");e.states&&e.states[this.name]&&delete e.states[this.name],localStorage.w2ui=JSON.stringify(e)}catch(e){return delete localStorage.w2ui,null}},parseField:function(e,t){var i="";try{i=e;var n=String(t).split(".");for(var r in n)i=i[n[r]]}catch(e){i=""}return i},prepareData:function(){for(var e in this.records){var t=this.records[e];for(var i in this.columns){var n=this.columns[i];if(null!=t[n.field]&&"string"==typeof n.render){if(-1!=["number","int","float","money","currency","percent"].indexOf(n.render.split(":")[0])&&"number"!=typeof t[n.field]&&(t[n.field]=parseFloat(t[n.field])),-1!=["date","age"].indexOf(n.render.split(":")[0])&&!t[n.field+"_"]){var r=t[n.field];w2utils.isInt(r)&&(r=parseInt(r)),t[n.field+"_"]=new Date(r)}if(-1!=["time"].indexOf(n.render))if(w2utils.isTime(t[n.field])){var s=w2utils.isTime(t[n.field],!0),r=new Date;r.setHours(s.hours,s.minutes,s.seconds?s.seconds:0,0),t[n.field+"_"]||(t[n.field+"_"]=r)}else{var s=t[n.field];w2utils.isInt(s)&&(s=parseInt(s));var s=null!=s?new Date(s):new Date,r=new Date;r.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),0),t[n.field+"_"]||(t[n.field+"_"]=r)}}}}},nextCell:function(e,t){var i=e+1;if(this.columns.length==i)return null;if(t===!0){var n=this.columns[i].editable;if(this.columns[i].hidden||"undefined"==typeof n||n&&-1!=["checkbox","check"].indexOf(n.type))return this.nextCell(i,t)}return i},prevCell:function(e,t){var i=e-1;if(0>i)return null;if(t===!0){var n=this.columns[i].editable;if(this.columns[i].hidden||"undefined"==typeof n||n&&-1!=["checkbox","check"].indexOf(n.type))return this.prevCell(i,t)}return i},nextRow:function(e){if(e+1<this.records.length&&0==this.last.searchIds.length||this.last.searchIds.length>0&&e<this.last.searchIds[this.last.searchIds.length-1]){if(e++,this.last.searchIds.length>0)for(;!(-1!=$.inArray(e,this.last.searchIds)||e>this.records.length);)e++;return e}return null},prevRow:function(e){if(e>0&&0==this.last.searchIds.length||this.last.searchIds.length>0&&e>this.last.searchIds[0]){if(e--,this.last.searchIds.length>0)for(;!(-1!=$.inArray(e,this.last.searchIds)||0>e);)e--;return e}return null}},$.extend(w2grid.prototype,w2utils.event),w2obj.grid=w2grid}(),function(){var e=function(e){this.box=null,this.name=null,this.panels=[],this.tmp={},this.padding=1,this.resizer=4,this.style="",this.onShow=null,this.onHide=null,this.onResizing=null,this.onResizerClick=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,$.extend(!0,this,w2obj.layout,e)},t=["top","left","main","preview","right","bottom"];$.fn.w2layout=function(i){function n(e,t,i){var n=e.get(t);return null!==n&&"undefined"==typeof i&&(i=n.tabs),null!==n&&null!==i&&($.isArray(i)&&(i={tabs:i}),$().w2destroy(e.name+"_"+t+"_tabs"),n.tabs=$().w2tabs($.extend({},i,{owner:e,name:e.name+"_"+t+"_tabs"})),n.show.tabs=!0,!0)}function r(e,t,i){var n=e.get(t);return null!==n&&"undefined"==typeof i&&(i=n.toolbar),null!==n&&null!==i&&($.isArray(i)&&(i={items:i}),$().w2destroy(e.name+"_"+t+"_toolbar"),n.toolbar=$().w2toolbar($.extend({},i,{owner:e,name:e.name+"_"+t+"_toolbar"})),n.show.toolbar=!0,!0)}if("object"==typeof i||!i){if(!w2utils.checkName(i,"w2layout"))return;var s=i.panels||[],o=new e(i);$.extend(o,{handlers:[],panels:[]});for(var a=0,l=s.length;l>a;a++)o.panels[a]=$.extend(!0,{},e.prototype.panel,s[a]),($.isPlainObject(o.panels[a].tabs)||$.isArray(o.panels[a].tabs))&&n(o,s[a].type),($.isPlainObject(o.panels[a].toolbar)||$.isArray(o.panels[a].toolbar))&&r(o,s[a].type);for(var d in t)d=t[d],null===o.get(d)&&o.panels.push($.extend(!0,{},e.prototype.panel,{type:d,hidden:"main"!==d,size:50}));return $(this).length>0&&o.render($(this)[0]),w2ui[o.name]=o,o}if(w2ui[$(this).attr("name")]){var u=w2ui[$(this).attr("name")];return u[i].apply(u,Array.prototype.slice.call(arguments,1)),this}console.log("ERROR: Method "+i+" does not exist on jQuery.w2layout")},e.prototype={panel:{type:null,title:"",size:100,minSize:20,maxSize:!1,hidden:!1,resizable:!1,overflow:"auto",style:"",content:"",tabs:null,toolbar:null,width:null,height:null,show:{toolbar:!1,tabs:!1},onRefresh:null,onShow:null,onHide:null},html:function(e,t,i){return this.content(e,t,i)},content:function(e,t,i){var n=this,r=this.get(e);if("css"==e)return $("#layout_"+n.name+"_panel_css").html("<style>"+t+"</style>"),!0;if(null===r)return!1;if("undefined"==typeof t||null===t)return r.content;if(t instanceof jQuery)return console.log("ERROR: You can not pass jQuery object to w2layout.content() method"),!1;var s="#layout_"+this.name+"_panel_"+r.type,o=$(s+"> .w2ui-panel-content"),a=0;if(o.length>0&&($(s).scrollTop(0),a=$(o).position().top),""===r.content)r.content=t,this.refresh(e);else{if(r.content=t,!r.hidden&&null!==i&&""!==i&&"undefined"!=typeof i){var l=$(s+"> .w2ui-panel-content");l.after('<div class="w2ui-panel-content new-panel" style="'+l[0].style.cssText+'"></div>');var d=$(s+"> .w2ui-panel-content.new-panel");l.css("top",a),d.css("top",a),"object"==typeof t?(t.box=d[0],t.render()):d.html(t),w2utils.transition(l[0],d[0],i,function(){l.remove(),d.removeClass("new-panel"),d.css("overflow",r.overflow),n.resize(),-1!=window.navigator.userAgent.indexOf("MSIE")&&setTimeout(function(){n.resize()},100)})}this.refresh(e)}return n.resize(),-1!=window.navigator.userAgent.indexOf("MSIE")&&setTimeout(function(){n.resize()},100),!0},load:function(e,t,i,n){var r=this;return"css"==e?($.get(t,function(t,i,s){r.content(e,s.responseText),n&&n()}),!0):null!==this.get(e)&&($.get(t,function(t,s,o){r.content(e,o.responseText,i),n&&n(),r.resize(),-1!=window.navigator.userAgent.indexOf("MSIE")&&setTimeout(function(){r.resize()},100)}),!0)},sizeTo:function(e,t){var i=this,n=i.get(e);return null!==n&&($(i.box).find(" > div > .w2ui-panel").css({"-webkit-transition":".2s","-moz-transition":".2s","-ms-transition":".2s","-o-transition":".2s"}),setTimeout(function(){i.set(e,{size:t})},1),setTimeout(function(){$(i.box).find(" > div > .w2ui-panel").css({"-webkit-transition":"0s","-moz-transition":"0s","-ms-transition":"0s","-o-transition":"0s"}),i.resize()},500),!0)},show:function(e,t){var i=this,n=this.trigger({phase:"before",type:"show",target:e,object:this.get(e),immediate:t});if(n.isCancelled!==!0){var r=i.get(e);return null!==r&&(r.hidden=!1,t===!0?($("#layout_"+i.name+"_panel_"+e).css({opacity:"1"}),r.resizable&&$("#layout_"+i.name+"_resizer_"+e).show(),i.trigger($.extend(n,{phase:"after"})),i.resize()):(r.resizable&&$("#layout_"+i.name+"_resizer_"+e).show(),$("#layout_"+i.name+"_panel_"+e).css({opacity:"0"}),$(i.box).find(" > div > .w2ui-panel").css({"-webkit-transition":".2s","-moz-transition":".2s","-ms-transition":".2s","-o-transition":".2s"}),setTimeout(function(){i.resize()},1),setTimeout(function(){$("#layout_"+i.name+"_panel_"+e).css({opacity:"1"})},250),setTimeout(function(){$(i.box).find(" > div > .w2ui-panel").css({"-webkit-transition":"0s","-moz-transition":"0s","-ms-transition":"0s","-o-transition":"0s"}),i.trigger($.extend(n,{phase:"after"})),i.resize()},500)),!0)}},hide:function(e,t){var i=this,n=this.trigger({phase:"before",type:"hide",target:e,object:this.get(e),immediate:t});if(n.isCancelled!==!0){var r=i.get(e);return null!==r&&(r.hidden=!0,t===!0?($("#layout_"+i.name+"_panel_"+e).css({opacity:"0"}),$("#layout_"+i.name+"_resizer_"+e).hide(),i.trigger($.extend(n,{phase:"after"})),i.resize()):($("#layout_"+i.name+"_resizer_"+e).hide(),$(i.box).find(" > div > .w2ui-panel").css({"-webkit-transition":".2s","-moz-transition":".2s","-ms-transition":".2s","-o-transition":".2s"}),$("#layout_"+i.name+"_panel_"+e).css({opacity:"0"}),setTimeout(function(){i.resize()},1),setTimeout(function(){$(i.box).find(" > div > .w2ui-panel").css({"-webkit-transition":"0s","-moz-transition":"0s","-ms-transition":"0s","-o-transition":"0s"}),i.trigger($.extend(n,{phase:"after"})),i.resize()},500)),!0)}},toggle:function(e,t){var i=this.get(e);return null!==i&&(i.hidden?this.show(e,t):this.hide(e,t))},set:function(e,t){var i=this.get(e,!0);return null!==i&&($.extend(this.panels[i],t),"undefined"!=typeof t.content&&this.refresh(e),this.resize(),!0)},get:function(e,t){for(var i in this.panels)if(this.panels[i].type==e)return t===!0?i:this.panels[i];return null},el:function(e){var t=$("#layout_"+this.name+"_panel_"+e+"> .w2ui-panel-content");return 1!=t.length?null:t[0]},hideToolbar:function(e){var t=this.get(e);t&&(t.show.toolbar=!1,$("#layout_"+this.name+"_panel_"+e+"> .w2ui-panel-toolbar").hide(),this.resize())},showToolbar:function(e){var t=this.get(e);t&&(t.show.toolbar=!0,$("#layout_"+this.name+"_panel_"+e+"> .w2ui-panel-toolbar").show(),this.resize())},toggleToolbar:function(e){var t=this.get(e);t&&(t.show.toolbar?this.hideToolbar(e):this.showToolbar(e))},hideTabs:function(e){var t=this.get(e);t&&(t.show.tabs=!1,$("#layout_"+this.name+"_panel_"+e+"> .w2ui-panel-tabs").hide(),this.resize())},showTabs:function(e){var t=this.get(e);t&&(t.show.tabs=!0,$("#layout_"+this.name+"_panel_"+e+"> .w2ui-panel-tabs").show(),this.resize())},toggleTabs:function(e){var t=this.get(e);t&&(t.show.tabs?this.hideTabs(e):this.showTabs(e))},render:function(e){function i(){o.tmp.events={resize:function(){w2ui[o.name].resize()},resizeStart:n,mouseMove:s,mouseUp:r},$(window).on("resize",o.tmp.events.resize)}function n(e,i){if(o.box){i||(i=window.event),window.addEventListener||window.document.attachEvent("onselectstart",function(){return!1}),$(document).off("mousemove",o.tmp.events.mouseMove).on("mousemove",o.tmp.events.mouseMove),$(document).off("mouseup",o.tmp.events.mouseUp).on("mouseup",o.tmp.events.mouseUp),o.tmp.resize={type:e,x:i.screenX,y:i.screenY,diff_x:0,diff_y:0,value:0};for(var n in t)n=t[n],o.lock(n,{opacity:0});("left"==e||"right"==e)&&(o.tmp.resize.value=parseInt($("#layout_"+o.name+"_resizer_"+e)[0].style.left)),("top"==e||"preview"==e||"bottom"==e)&&(o.tmp.resize.value=parseInt($("#layout_"+o.name+"_resizer_"+e)[0].style.top))}}function r(e){if(o.box&&(e||(e=window.event),window.addEventListener||window.document.attachEvent("onselectstart",function(){return!1}),$(document).off("mousemove",o.tmp.events.mouseMove),$(document).off("mouseup",o.tmp.events.mouseUp),"undefined"!=typeof o.tmp.resize)){for(var i in t)o.unlock(t[i]);if(0!==o.tmp.diff_x||0!==o.tmp.resize.diff_y){var n,r,s=o.get("top"),a=o.get("bottom"),l=o.get(o.tmp.resize.type),d=parseInt($(o.box).height()),u=parseInt($(o.box).width()),c=String(l.size);switch(o.tmp.resize.type){case"top":n=parseInt(l.sizeCalculated)+o.tmp.resize.diff_y,r=0;break;case"bottom":n=parseInt(l.sizeCalculated)-o.tmp.resize.diff_y,r=0;break;case"preview":n=parseInt(l.sizeCalculated)-o.tmp.resize.diff_y,r=(s&&!s.hidden?s.sizeCalculated:0)+(a&&!a.hidden?a.sizeCalculated:0);break;case"left":n=parseInt(l.sizeCalculated)+o.tmp.resize.diff_x,r=0;break;case"right":n=parseInt(l.sizeCalculated)-o.tmp.resize.diff_x,r=0}l.size="%"==c.substr(c.length-1)?Math.floor(100*n/("left"==l.type||"right"==l.type?u:d-r)*100)/100+"%":n,o.resize()}$("#layout_"+o.name+"_resizer_"+o.tmp.resize.type).removeClass("active"),delete o.tmp.resize}}function s(e){if(o.box&&(e||(e=window.event),"undefined"!=typeof o.tmp.resize)){var t=o.get(o.tmp.resize.type),i=o.tmp.resize,n=o.trigger({phase:"before",type:"resizing",target:o.name,object:t,originalEvent:e,panel:i?i.type:"all",diff_x:i?i.diff_x:0,diff_y:i?i.diff_y:0});if(n.isCancelled!==!0){var r=$("#layout_"+o.name+"_resizer_"+i.type),s=e.screenX-i.x,a=e.screenY-i.y,l=o.get("main");switch(r.hasClass("active")||r.addClass("active"),i.type){case"left":t.minSize-s>t.width&&(s=t.minSize-t.width),t.maxSize&&t.width+s>t.maxSize&&(s=t.maxSize-t.width),l.minSize+s>l.width&&(s=l.width-l.minSize);break;case"right":t.minSize+s>t.width&&(s=t.width-t.minSize),t.maxSize&&t.width-s>t.maxSize&&(s=t.width-t.maxSize),l.minSize-s>l.width&&(s=l.minSize-l.width);break;case"top":t.minSize-a>t.height&&(a=t.minSize-t.height),t.maxSize&&t.height+a>t.maxSize&&(a=t.maxSize-t.height),l.minSize+a>l.height&&(a=l.height-l.minSize);break;case"preview":case"bottom":t.minSize+a>t.height&&(a=t.height-t.minSize),t.maxSize&&t.height-a>t.maxSize&&(a=t.height-t.maxSize),l.minSize-a>l.height&&(a=l.minSize-l.height)}switch(i.diff_x=s,i.diff_y=a,i.type){case"top":case"preview":case"bottom":i.diff_x=0,r.length>0&&(r[0].style.top=i.value+i.diff_y+"px");break;case"left":case"right":i.diff_y=0,r.length>0&&(r[0].style.left=i.value+i.diff_x+"px")}o.trigger($.extend(n,{phase:"after"}))}}}var o=this,a=(new Date).getTime(),l=o.trigger({phase:"before",type:"render",target:o.name,box:e});if(l.isCancelled!==!0){if("undefined"!=typeof e&&null!==e&&($(o.box).find("#layout_"+o.name+"_panel_main").length>0&&$(o.box).removeAttr("name").removeClass("w2ui-layout").html(""),o.box=e),!o.box)return!1;$(o.box).attr("name",o.name).addClass("w2ui-layout").html("<div></div>"),$(o.box).length>0&&($(o.box)[0].style.cssText+=o.style);for(var d in t){d=t[d];var u=(o.get(d),'<div id="layout_'+o.name+"_panel_"+d+'" class="w2ui-panel">    <div class="w2ui-panel-title"></div>    <div class="w2ui-panel-tabs"></div>    <div class="w2ui-panel-toolbar"></div>    <div class="w2ui-panel-content"></div></div><div id="layout_'+o.name+"_resizer_"+d+'" class="w2ui-resizer"></div>');$(o.box).find(" > div").append(u)}return $(o.box).find(" > div").append('<div id="layout_'+o.name+'_panel_css" style="position: absolute; top: 10000px;"></div'),o.refresh(),o.trigger($.extend(l,{phase:"after"})),setTimeout(function(){i(),o.resize()},0),(new Date).getTime()-a}},refresh:function(e){var t=this;"undefined"==typeof e&&(e=null);var i=(new Date).getTime(),n=t.trigger({phase:"before",type:"refresh",target:"undefined"!=typeof e?e:t.name,object:t.get(e)});if(n.isCancelled!==!0){if("string"==typeof e){var r=t.get(e);if(null===r)return;var s="#layout_"+t.name+"_panel_"+r.type,o="#layout_"+t.name+"_resizer_"+r.type;$(s).css({display:r.hidden?"none":"block"}),r.resizable?$(o).show():$(o).hide(),"object"==typeof r.content&&"function"==typeof r.content.render?(r.content.box=$(s+"> .w2ui-panel-content")[0],setTimeout(function(){$(s+"> .w2ui-panel-content").length>0&&($(s+"> .w2ui-panel-content").removeClass().removeAttr("name").off("selectstart").addClass("w2ui-panel-content").css("overflow",r.overflow)[0].style.cssText+=";"+r.style),r.content.render()},1)):$(s+"> .w2ui-panel-content").length>0&&($(s+"> .w2ui-panel-content").removeClass().removeAttr("name").off("selectstart").addClass("w2ui-panel-content").html(r.content).css("overflow",r.overflow)[0].style.cssText+=";"+r.style);var a=$(t.box).find(s+"> .w2ui-panel-tabs");r.show.tabs?0===a.find("[name="+r.tabs.name+"]").length&&null!==r.tabs?a.w2render(r.tabs):r.tabs.refresh():a.html("").removeClass("w2ui-tabs").hide(),a=$(t.box).find(s+"> .w2ui-panel-toolbar"),r.show.toolbar?0===a.find("[name="+r.toolbar.name+"]").length&&null!==r.toolbar?a.w2render(r.toolbar):r.toolbar.refresh():a.html("").removeClass("w2ui-toolbar").hide(),a=$(t.box).find(s+"> .w2ui-panel-title"),r.title?a.html(r.title).show():a.html("").hide()}else{if(0==$("#layout_"+t.name+"_panel_main").length)return void t.render();t.resize();for(var l in this.panels)t.refresh(this.panels[l].type)}return t.trigger($.extend(n,{phase:"after"})),(new Date).getTime()-i}},resize:function(){if(!this.box)return!1;var e=(new Date).getTime(),i=this.tmp.resize,n=this.trigger({phase:"before",type:"resize",target:this.name,panel:i?i.type:"all",diff_x:i?i.diff_x:0,diff_y:i?i.diff_y:0});if(n.isCancelled!==!0){this.padding<0&&(this.padding=0);var r=parseInt($(this.box).width()),s=parseInt($(this.box).height());$(this.box).find(" > div").css({width:r+"px",height:s+"px"});var o,a,l,d,u,c=this,h=this.get("main"),p=this.get("preview"),f=this.get("left"),g=this.get("right"),m=this.get("top"),v=this.get("bottom"),y=null!==p&&p.hidden!==!0,w=null!==f&&f.hidden!==!0,b=null!==g&&g.hidden!==!0,x=null!==m&&m.hidden!==!0,_=null!==v&&v.hidden!==!0;for(var k in t)if(k=t[k],"main"!==k){var i=this.get(k);if(i){var C=String(i.size||0);if("%"==C.substr(C.length-1)){var T=s;"preview"==i.type&&(T=T-(m&&!m.hidden?m.sizeCalculated:0)-(v&&!v.hidden?v.sizeCalculated:0)),i.sizeCalculated=parseInt(("left"==i.type||"right"==i.type?r:T)*parseFloat(i.size)/100)}else i.sizeCalculated=parseInt(i.size);i.sizeCalculated=Math.max(i.sizeCalculated,parseInt(i.minSize))}}null!==m&&m.hidden!==!0?(o=0,a=0,l=r,d=m.sizeCalculated,$("#layout_"+this.name+"_panel_top").css({display:"block",left:o+"px",top:a+"px",width:l+"px",height:d+"px"}).show(),m.width=l,m.height=d,m.resizable&&(a=m.sizeCalculated-(0===this.padding?this.resizer:0),d=this.resizer>this.padding?this.resizer:this.padding,$("#layout_"+this.name+"_resizer_top").show().css({display:"block",left:o+"px",top:a+"px",width:l+"px",height:d+"px",cursor:"ns-resize"}).off("mousedown").on("mousedown",function(e){var t=c.trigger({phase:"before",type:"resizerClick",target:"top",originalEvent:e});if(t.isCancelled!==!0)return w2ui[c.name].tmp.events.resizeStart("top",e),c.trigger($.extend(t,{phase:"after"})),!1}))):$("#layout_"+this.name+"_panel_top").hide(),null!==f&&f.hidden!==!0?(o=0,a=0+(x?m.sizeCalculated+this.padding:0),l=f.sizeCalculated,d=s-(x?m.sizeCalculated+this.padding:0)-(_?v.sizeCalculated+this.padding:0),u=$("#layout_"+this.name+"_panel_left"),-1!=window.navigator.userAgent.indexOf("MSIE")&&u.length>0&&u[0].clientHeight<u[0].scrollHeight&&(l+=17),u.css({display:"block",left:o+"px",top:a+"px",width:l+"px",height:d+"px"}).show(),f.width=l,f.height=d,f.resizable&&(o=f.sizeCalculated-(0===this.padding?this.resizer:0),l=this.resizer>this.padding?this.resizer:this.padding,$("#layout_"+this.name+"_resizer_left").show().css({display:"block",left:o+"px",top:a+"px",width:l+"px",height:d+"px",cursor:"ew-resize"}).off("mousedown").on("mousedown",function(e){var t=c.trigger({phase:"before",type:"resizerClick",target:"left",originalEvent:e});if(t.isCancelled!==!0)return w2ui[c.name].tmp.events.resizeStart("left",e),c.trigger($.extend(t,{phase:"after"})),!1}))):($("#layout_"+this.name+"_panel_left").hide(),$("#layout_"+this.name+"_resizer_left").hide()),null!==g&&g.hidden!==!0?(o=r-g.sizeCalculated,a=0+(x?m.sizeCalculated+this.padding:0),l=g.sizeCalculated,d=s-(x?m.sizeCalculated+this.padding:0)-(_?v.sizeCalculated+this.padding:0),$("#layout_"+this.name+"_panel_right").css({display:"block",left:o+"px",top:a+"px",width:l+"px",height:d+"px"}).show(),g.width=l,g.height=d,g.resizable&&(o-=this.padding,l=this.resizer>this.padding?this.resizer:this.padding,$("#layout_"+this.name+"_resizer_right").show().css({display:"block",left:o+"px",top:a+"px",width:l+"px",height:d+"px",cursor:"ew-resize"}).off("mousedown").on("mousedown",function(e){var t=c.trigger({phase:"before",type:"resizerClick",target:"right",originalEvent:e});if(t.isCancelled!==!0)return w2ui[c.name].tmp.events.resizeStart("right",e),c.trigger($.extend(t,{phase:"after"})),!1}))):$("#layout_"+this.name+"_panel_right").hide(),null!==v&&v.hidden!==!0?(o=0,a=s-v.sizeCalculated,l=r,d=v.sizeCalculated,$("#layout_"+this.name+"_panel_bottom").css({display:"block",left:o+"px",top:a+"px",width:l+"px",height:d+"px"}).show(),v.width=l,v.height=d,v.resizable&&(a-=0===this.padding?0:this.padding,d=this.resizer>this.padding?this.resizer:this.padding,$("#layout_"+this.name+"_resizer_bottom").show().css({display:"block",left:o+"px",top:a+"px",width:l+"px",height:d+"px",cursor:"ns-resize"}).off("mousedown").on("mousedown",function(e){var t=c.trigger({phase:"before",type:"resizerClick",target:"bottom",originalEvent:e});if(t.isCancelled!==!0)return w2ui[c.name].tmp.events.resizeStart("bottom",e),c.trigger($.extend(t,{phase:"after"})),!1}))):$("#layout_"+this.name+"_panel_bottom").hide(),o=0+(w?f.sizeCalculated+this.padding:0),a=0+(x?m.sizeCalculated+this.padding:0),l=r-(w?f.sizeCalculated+this.padding:0)-(b?g.sizeCalculated+this.padding:0),d=s-(x?m.sizeCalculated+this.padding:0)-(_?v.sizeCalculated+this.padding:0)-(y?p.sizeCalculated+this.padding:0),u=$("#layout_"+this.name+"_panel_main"),-1!=window.navigator.userAgent.indexOf("MSIE")&&u.length>0&&u[0].clientHeight<u[0].scrollHeight&&(l+=17),u.css({display:"block",left:o+"px",top:a+"px",width:l+"px",height:d+"px"}),h.width=l,h.height=d,null!==p&&p.hidden!==!0?(o=0+(w?f.sizeCalculated+this.padding:0),a=s-(_?v.sizeCalculated+this.padding:0)-p.sizeCalculated,l=r-(w?f.sizeCalculated+this.padding:0)-(b?g.sizeCalculated+this.padding:0),d=p.sizeCalculated,u=$("#layout_"+this.name+"_panel_preview"),-1!=window.navigator.userAgent.indexOf("MSIE")&&u.length>0&&u[0].clientHeight<u[0].scrollHeight&&(l+=17),u.css({display:"block",left:o+"px",top:a+"px",width:l+"px",height:d+"px"}).show(),p.width=l,p.height=d,p.resizable&&(a-=0===this.padding?0:this.padding,d=this.resizer>this.padding?this.resizer:this.padding,$("#layout_"+this.name+"_resizer_preview").show().css({display:"block",left:o+"px",top:a+"px",width:l+"px",height:d+"px",cursor:"ns-resize"}).off("mousedown").on("mousedown",function(e){var t=c.trigger({phase:"before",type:"resizerClick",target:"preview",originalEvent:e});if(t.isCancelled!==!0)return w2ui[c.name].tmp.events.resizeStart("preview",e),c.trigger($.extend(t,{phase:"after"})),!1}))):$("#layout_"+this.name+"_panel_preview").hide();for(var S in t){S=t[S];var D=this.get(S),R="#layout_"+this.name+"_panel_"+S+" > .w2ui-panel-",z=0;D&&(D.title&&(z+=w2utils.getSize($(R+"title").css({top:z+"px",display:"block"}),"height")),D.show.tabs&&(null!==D.tabs&&w2ui[this.name+"_"+S+"_tabs"]&&w2ui[this.name+"_"+S+"_tabs"].resize(),z+=w2utils.getSize($(R+"tabs").css({top:z+"px",display:"block"}),"height")),D.show.toolbar&&(null!==D.toolbar&&w2ui[this.name+"_"+S+"_toolbar"]&&w2ui[this.name+"_"+S+"_toolbar"].resize(),z+=w2utils.getSize($(R+"toolbar").css({top:z+"px",display:"block"}),"height"))),$(R+"content").css({display:"block"}).css({top:z+"px"})}return clearTimeout(this._resize_timer),this._resize_timer=setTimeout(function(){for(var e in w2ui)if("function"==typeof w2ui[e].resize){"undefined"==w2ui[e].panels&&w2ui[e].resize();var t=$(w2ui[e].box).parents(".w2ui-layout");t.length>0&&t.attr("name")==c.name&&w2ui[e].resize()}},100),this.trigger($.extend(n,{phase:"after"})),(new Date).getTime()-e}},destroy:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});if(e.isCancelled!==!0)return"undefined"!=typeof w2ui[this.name]&&($(this.box).find("#layout_"+this.name+"_panel_main").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-layout").html(""),delete w2ui[this.name],
this.trigger($.extend(e,{phase:"after"})),this.tmp.events&&this.tmp.events.resize&&$(window).off("resize",this.tmp.events.resize),!0)},lock:function(e){if(-1==t.indexOf(e))return void console.log("ERROR: First parameter needs to be the a valid panel name.");var i=Array.prototype.slice.call(arguments,0);i[0]="#layout_"+this.name+"_panel_"+e,w2utils.lock.apply(window,i)},unlock:function(e){if(-1==t.indexOf(e))return void console.log("ERROR: First parameter needs to be the a valid panel name.");var i="#layout_"+this.name+"_panel_"+e;w2utils.unlock(i)}},$.extend(e.prototype,w2utils.event),w2obj.layout=e}();var w2popup={};!function(){$.fn.w2popup=function(e,t){"undefined"==typeof e&&(t={},e="open"),$.isPlainObject(e)&&(t=e,e="open"),e=e.toLowerCase(),"load"===e&&"string"==typeof t&&(t=$.extend({url:t},arguments.length>2?arguments[2]:{})),"open"===e&&null!=t.url&&(e="load"),t=t||{};var i={};return $(this).length>0&&($(this).find("div[rel=title], div[rel=body], div[rel=buttons]").length>0?($(this).find("div[rel=title]").length>0&&(i.title=$(this).find("div[rel=title]").html()),$(this).find("div[rel=body]").length>0&&(i.body=$(this).find("div[rel=body]").html(),i.style=$(this).find("div[rel=body]")[0].style.cssText),$(this).find("div[rel=buttons]").length>0&&(i.buttons=$(this).find("div[rel=buttons]").html())):(i.title="&nbsp;",i.body=$(this).html()),0!=parseInt($(this).css("width"))&&(i.width=parseInt($(this).css("width"))),0!=parseInt($(this).css("height"))&&(i.height=parseInt($(this).css("height")))),w2popup[e]($.extend({},i,t))},w2popup={defaults:{title:"",body:"",buttons:"",style:"",color:"#000",opacity:.4,speed:.3,modal:!1,maximized:!1,keyboard:!0,width:500,height:300,showClose:!0,showMax:!1,transition:null},status:"closed",handlers:[],onOpen:null,onClose:null,onMax:null,onMin:null,onToggle:null,onKeydown:null,open:function(e){function t(e){return e||(e=window.event),window.addEventListener||window.document.attachEvent("onselectstart",function(){return!1}),w2popup.status="moving",m.resizing=!0,m.x=e.screenX,m.y=e.screenY,m.pos_x=$("#w2ui-popup").position().left,m.pos_y=$("#w2ui-popup").position().top,w2popup.lock({opacity:0}),$(document).on("mousemove",m.mvMove),$(document).on("mouseup",m.mvStop),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!!e.preventDefault&&void e.preventDefault()}function i(e){1==m.resizing&&(e||(e=window.event),m.div_x=e.screenX-m.x,m.div_y=e.screenY-m.y,$("#w2ui-popup").css({"-webkit-transition":"none","-webkit-transform":"translate3d("+m.div_x+"px, "+m.div_y+"px, 0px)","-moz-transition":"none","-moz-transform":"translate("+m.div_x+"px, "+m.div_y+"px)","-ms-transition":"none","-ms-transform":"translate("+m.div_x+"px, "+m.div_y+"px)","-o-transition":"none","-o-transform":"translate("+m.div_x+"px, "+m.div_y+"px)"}))}function n(e){1==m.resizing&&(e||(e=window.event),w2popup.status="open",m.div_x=e.screenX-m.x,m.div_y=e.screenY-m.y,$("#w2ui-popup").css({left:m.pos_x+m.div_x+"px",top:m.pos_y+m.div_y+"px","-webkit-transition":"none","-webkit-transform":"translate3d(0px, 0px, 0px)","-moz-transition":"none","-moz-transform":"translate(0px, 0px)","-ms-transition":"none","-ms-transform":"translate(0px, 0px)","-o-transition":"none","-o-transform":"translate(0px, 0px)"}),m.resizing=!1,$(document).off("mousemove",m.mvMove),$(document).off("mouseup",m.mvStop),w2popup.unlock())}var r=this;if("closing"==w2popup.status)return void setTimeout(function(){r.open.call(r,e)},100);var s=$("#w2ui-popup").data("options"),e=$.extend({},this.defaults,s,{title:"",body:"",buttons:""},e,{maximized:!1});if(setTimeout(function(){$("#w2ui-popup").data("options",e)},100),0==$("#w2ui-popup").length&&(w2popup.handlers=[],w2popup.onMax=null,w2popup.onMin=null,w2popup.onToggle=null,w2popup.onOpen=null,w2popup.onClose=null,w2popup.onKeydown=null),e.onOpen&&(w2popup.onOpen=e.onOpen),e.onClose&&(w2popup.onClose=e.onClose),e.onMax&&(w2popup.onMax=e.onMax),e.onMin&&(w2popup.onMin=e.onMin),e.onToggle&&(w2popup.onToggle=e.onToggle),e.onKeydown&&(w2popup.onKeydown=e.onKeydown),void 0==window.innerHeight){var o=document.documentElement.offsetWidth,a=document.documentElement.offsetHeight;"IE7"===w2utils.engine&&(o+=21,a+=4)}else var o=window.innerWidth,a=window.innerHeight;parseInt(o)-10<parseInt(e.width)&&(e.width=parseInt(o)-10),parseInt(a)-10<parseInt(e.height)&&(e.height=parseInt(a)-10);var l=parseInt((parseInt(a)-parseInt(e.height))/2*.6),d=parseInt((parseInt(o)-parseInt(e.width))/2);if(0==$("#w2ui-popup").length){var u=this.trigger({phase:"before",type:"open",target:"popup",options:e,present:!1});if(u.isCancelled===!0)return;w2popup.status="opening",w2popup.lockScreen(e);var c="";e.showClose&&(c+='<div class="w2ui-msg-button w2ui-msg-close" onmousedown="event.stopPropagation()" onclick="w2popup.close()">Close</div>'),e.showMax&&(c+='<div class="w2ui-msg-button w2ui-msg-max" onmousedown="event.stopPropagation()" onclick="w2popup.toggle()">Max</div>');var h='<div id="w2ui-popup" class="w2ui-popup" style="opacity: 0; left: '+d+"px; top: "+l+"px;     width: "+parseInt(e.width)+"px; height: "+parseInt(e.height)+'px;     -webkit-transform: scale(0.8); -moz-transform: scale(0.8); -ms-transform: scale(0.8); -o-transform: scale(0.8); ">   <div class="w2ui-msg-title" style="'+(""==e.title?"display: none":"")+'">'+c+e.title+'</div>   <div class="w2ui-box1" style="'+(""==e.title?"top: 0px !important;":"")+(""==e.buttons?"bottom: 0px !important;":"")+'">       <div class="w2ui-msg-body'+(""!=!e.title?" w2ui-msg-no-title":"")+(""!=!e.buttons?" w2ui-msg-no-buttons":"")+'" style="'+e.style+'">'+e.body+'</div>   </div>   <div class="w2ui-box2" style="'+(""==e.title?"top: 0px !important;":"")+(""==e.buttons?"bottom: 0px !important;":"")+'">       <div class="w2ui-msg-body'+(""!=!e.title?" w2ui-msg-no-title":"")+(""!=!e.buttons?" w2ui-msg-no-buttons":"")+'" style="'+e.style+'"></div>       </div>   <div class="w2ui-msg-buttons" style="'+(""==e.buttons?"display: none":"")+'">'+e.buttons+"</div></div>";$("body").append(h),setTimeout(function(){$("#w2ui-popup .w2ui-box2").hide(),$("#w2ui-popup").css({"-webkit-transition":e.speed+"s opacity, "+e.speed+"s -webkit-transform","-webkit-transform":"scale(1)","-moz-transition":e.speed+"s opacity, "+e.speed+"s -moz-transform","-moz-transform":"scale(1)","-ms-transition":e.speed+"s opacity, "+e.speed+"s -ms-transform","-ms-transform":"scale(1)","-o-transition":e.speed+"s opacity, "+e.speed+"s -o-transform","-o-transform":"scale(1)",opacity:"1"})},1),setTimeout(function(){$("#w2ui-popup").css({"-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":""}),w2popup.status="open",setTimeout(function(){r.trigger($.extend(u,{phase:"after"}))},100)},1e3*e.speed)}else{var u=this.trigger({phase:"before",type:"open",target:"popup",options:e,present:!0});if(u.isCancelled===!0)return;w2popup.status="opening",("undefined"==typeof s||s.width!=e.width||s.height!=e.height)&&w2popup.resize(e.width,e.height),"undefined"!=typeof s&&(e.prevSize=e.width+":"+e.height,e.maximized=s.maximized);var p=$("#w2ui-popup .w2ui-box2 > .w2ui-msg-body").html(e.body);p.length>0&&(p[0].style.cssText=e.style),""!=e.buttons?($("#w2ui-popup .w2ui-msg-buttons").show().html(e.buttons),$("#w2ui-popup .w2ui-msg-body").removeClass("w2ui-msg-no-buttons"),$("#w2ui-popup .w2ui-box1, #w2ui-popup .w2ui-box2").css("bottom","")):($("#w2ui-popup .w2ui-msg-buttons").hide().html(""),$("#w2ui-popup .w2ui-msg-body").addClass("w2ui-msg-no-buttons"),$("#w2ui-popup .w2ui-box1, #w2ui-popup .w2ui-box2").css("bottom","0px")),""!=e.title?($("#w2ui-popup .w2ui-msg-title").show().html((e.showClose?'<div class="w2ui-msg-button w2ui-msg-close" onmousedown="event.stopPropagation()" onclick="w2popup.close()">Close</div>':"")+(e.showMax?'<div class="w2ui-msg-button w2ui-msg-max" onmousedown="event.stopPropagation()" onclick="w2popup.toggle()">Max</div>':"")+e.title),$("#w2ui-popup .w2ui-msg-body").removeClass("w2ui-msg-no-title"),$("#w2ui-popup .w2ui-box1, #w2ui-popup .w2ui-box2").css("top","")):($("#w2ui-popup .w2ui-msg-title").hide().html(""),$("#w2ui-popup .w2ui-msg-body").addClass("w2ui-msg-no-title"),$("#w2ui-popup .w2ui-box1, #w2ui-popup .w2ui-box2").css("top","0px"));var f=$("#w2ui-popup .w2ui-box1")[0],g=$("#w2ui-popup .w2ui-box2")[0];w2utils.transition(f,g,e.transition),g.className="w2ui-box1",f.className="w2ui-box2",$(g).addClass("w2ui-current-box"),$("#w2ui-popup").data("prev-size",null),setTimeout(function(){w2popup.status="open",r.trigger($.extend(u,{phase:"after"}))},100)}e._last_w2ui_name=w2utils.keyboard.active(),w2utils.keyboard.active(null),e.keyboard&&$(document).on("keydown",this.keydown);var m={resizing:!1,mvMove:i,mvStop:n};return $("#w2ui-popup .w2ui-msg-title").on("mousedown",function(e){t(e)}),this},keydown:function(e){var t=$("#w2ui-popup").data("options");if(t&&t.keyboard){var i=w2popup.trigger({phase:"before",type:"keydown",target:"popup",options:t,originalEvent:e});if(i.isCancelled!==!0){switch(e.keyCode){case 27:e.preventDefault(),$("#w2ui-popup .w2ui-popup-message").length>0?w2popup.message():w2popup.close()}w2popup.trigger($.extend(i,{phase:"after"}))}}},close:function(e){var t=this,e=$.extend({},$("#w2ui-popup").data("options"),e);if(0!=$("#w2ui-popup").length){var i=this.trigger({phase:"before",type:"close",target:"popup",options:e});i.isCancelled!==!0&&(w2popup.status="closing",$("#w2ui-popup").css({"-webkit-transition":e.speed+"s opacity, "+e.speed+"s -webkit-transform","-webkit-transform":"scale(0.9)","-moz-transition":e.speed+"s opacity, "+e.speed+"s -moz-transform","-moz-transform":"scale(0.9)","-ms-transition":e.speed+"s opacity, "+e.speed+"s -ms-transform","-ms-transform":"scale(0.9)","-o-transition":e.speed+"s opacity, "+e.speed+"s -o-transform","-o-transform":"scale(0.9)",opacity:"0"}),w2popup.unlockScreen(e),setTimeout(function(){$("#w2ui-popup").remove(),w2popup.status="closed",t.trigger($.extend(i,{phase:"after"}))},1e3*e.speed),w2utils.keyboard.active(e._last_w2ui_name),e.keyboard&&$(document).off("keydown",this.keydown))}},toggle:function(){var e=this,t=$("#w2ui-popup").data("options"),i=this.trigger({phase:"before",type:"toggle",target:"popup",options:t});i.isCancelled!==!0&&(t.maximized===!0?w2popup.min():w2popup.max(),setTimeout(function(){e.trigger($.extend(i,{phase:"after"}))},1e3*t.speed+50))},max:function(){var e=this,t=$("#w2ui-popup").data("options");if(t.maximized!==!0){var i=this.trigger({phase:"before",type:"max",target:"popup",options:t});i.isCancelled!==!0&&(w2popup.status="resizing",t.prevSize=$("#w2ui-popup").css("width")+":"+$("#w2ui-popup").css("height"),w2popup.resize(1e4,1e4,function(){w2popup.status="open",t.maximized=!0,e.trigger($.extend(i,{phase:"after"}))}))}},min:function(){var e=this,t=$("#w2ui-popup").data("options");if(t.maximized===!0){var i=t.prevSize.split(":"),n=this.trigger({phase:"before",type:"min",target:"popup",options:t});n.isCancelled!==!0&&(w2popup.status="resizing",w2popup.resize(i[0],i[1],function(){w2popup.status="open",t.maximized=!1,t.prevSize=null,e.trigger($.extend(n,{phase:"after"}))}))}},get:function(){return $("#w2ui-popup").data("options")},set:function(e){w2popup.open(e)},clear:function(){$("#w2ui-popup .w2ui-msg-title").html(""),$("#w2ui-popup .w2ui-msg-body").html(""),$("#w2ui-popup .w2ui-msg-buttons").html("")},reset:function(){w2popup.open(w2popup.defaults)},load:function(e){function t(t,i){if(delete e.url,$("body").append('<div id="w2ui-tmp" style="display: none">'+t+"</div>"),"undefined"!=typeof i&&$("#w2ui-tmp #"+i).length>0?$("#w2ui-tmp #"+i).w2popup(e):$("#w2ui-tmp > div").w2popup(e),$("#w2ui-tmp > style").length>0){var n=$("<div>").append($("#w2ui-tmp > style").clone()).html();0==$("#w2ui-popup #div-style").length&&$("#w2ui-popup").append('<div id="div-style" style="position: absolute; left: -100; width: 1px"></div>'),$("#w2ui-popup #div-style").html(n)}$("#w2ui-tmp").remove()}if(w2popup.status="loading","undefined"==String(e.url))return void console.log("ERROR: The url parameter is empty.");var i=String(e.url).split("#"),n=i[0],r=i[1];"undefined"==String(e)&&(e={});var s=$("#w2ui-popup").data(n);"undefined"!=typeof s&&null!=s?t(s,r):$.get(n,function(e,i,s){t(s.responseText,r),$("#w2ui-popup").data(n,s.responseText)})},message:function(e){$().w2tag(),e||(e={width:200,height:100}),parseInt(e.width)<10&&(e.width=10),parseInt(e.height)<10&&(e.height=10),"undefined"==typeof e.hideOnClick&&(e.hideOnClick=!1);var t=$("#w2ui-popup").data("options")||{};("undefined"==typeof e.width||e.width>t.width-10)&&(e.width=t.width-10),("undefined"==typeof e.height||e.height>t.height-40)&&(e.height=t.height-40);var i=$("#w2ui-popup .w2ui-msg-title"),n=parseInt($("#w2ui-popup").width()),r=$("#w2ui-popup .w2ui-popup-message").length;if(""==$.trim(e.html)){$("#w2ui-popup #w2ui-message"+(r-1)).css("z-Index",250);var e=$("#w2ui-popup #w2ui-message"+(r-1)).data("options")||{};$("#w2ui-popup #w2ui-message"+(r-1)).remove(),"function"==typeof e.onClose&&e.onClose(),1==r?w2popup.unlock():$("#w2ui-popup #w2ui-message"+(r-2)).show()}else{$("#w2ui-popup .w2ui-popup-message").hide(),$("#w2ui-popup .w2ui-box1").before('<div id="w2ui-message'+r+'" class="w2ui-popup-message" style="display: none; '+(0==i.length?"top: 0px;":"top: "+w2utils.getSize(i,"height")+"px;")+("undefined"!=typeof e.width?"width: "+e.width+"px; left: "+(n-e.width)/2+"px;":"left: 10px; right: 10px;")+("undefined"!=typeof e.height?"height: "+e.height+"px;":"bottom: 6px;")+'-webkit-transition: .3s; -moz-transition: .3s; -ms-transition: .3s; -o-transition: .3s;"'+(e.hideOnClick===!0?'onclick="w2popup.message();"':"")+"></div>"),$("#w2ui-popup #w2ui-message"+r).data("options",e);var s=$("#w2ui-popup #w2ui-message"+r).css("display");$("#w2ui-popup #w2ui-message"+r).css({"-webkit-transform":"none"==s?"translateY(-"+e.height+"px)":"translateY(0px)","-moz-transform":"none"==s?"translateY(-"+e.height+"px)":"translateY(0px)","-ms-transform":"none"==s?"translateY(-"+e.height+"px)":"translateY(0px)","-o-transform":"none"==s?"translateY(-"+e.height+"px)":"translateY(0px)"}),"none"==s&&($("#w2ui-popup #w2ui-message"+r).show().html(e.html),setTimeout(function(){$("#w2ui-popup #w2ui-message"+r).css({"-webkit-transform":"none"==s?"translateY(0px)":"translateY(-"+e.height+"px)","-moz-transform":"none"==s?"translateY(0px)":"translateY(-"+e.height+"px)","-ms-transform":"none"==s?"translateY(0px)":"translateY(-"+e.height+"px)","-o-transform":"none"==s?"translateY(0px)":"translateY(-"+e.height+"px)"})},1),setTimeout(function(){$("#w2ui-popup #w2ui-message"+r).css({"-webkit-transition":"0s","-moz-transition":"0s","-ms-transition":"0s","-o-transition":"0s","z-Index":1500}),0==r&&w2popup.lock(),"function"==typeof e.onOpen&&e.onOpen()},300))}},lock:function(){var e=Array.prototype.slice.call(arguments,0);e.unshift($("#w2ui-popup")),w2utils.lock.apply(window,e)},unlock:function(){w2utils.unlock($("#w2ui-popup"))},lockScreen:function(e){return!($("#w2ui-lock").length>0)&&("undefined"==typeof e&&(e=$("#w2ui-popup").data("options")),"undefined"==typeof e&&(e={}),e=$.extend({},w2popup.defaults,e),$("body").append('<div id="w2ui-lock"     onmousewheel="if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true; if (event.preventDefault) event.preventDefault(); else return false;"    style="position: '+("IE5"==w2utils.engine?"absolute":"fixed")+"; z-Index: 1199; left: 0px; top: 0px;            padding: 0px; margin: 0px; background-color: "+e.color+'; width: 100%; height: 100%; opacity: 0;"></div>'),setTimeout(function(){$("#w2ui-lock").css({"-webkit-transition":e.speed+"s opacity","-moz-transition":e.speed+"s opacity","-ms-transition":e.speed+"s opacity","-o-transition":e.speed+"s opacity",opacity:e.opacity})},1),1==e.modal?($("#w2ui-lock").on("mousedown",function(){$("#w2ui-lock").css({"-webkit-transition":".1s","-moz-transition":".1s","-ms-transition":".1s","-o-transition":".1s",opacity:"0.6"})}),$("#w2ui-lock").on("mouseup",function(){setTimeout(function(){$("#w2ui-lock").css({"-webkit-transition":".1s","-moz-transition":".1s","-ms-transition":".1s","-o-transition":".1s",opacity:e.opacity})},100)})):$("#w2ui-lock").on("mouseup",function(){w2popup.close()}),!0)},unlockScreen:function(e){return 0!=$("#w2ui-lock").length&&("undefined"==typeof e&&(e=$("#w2ui-popup").data("options")),"undefined"==typeof e&&(e={}),e=$.extend({},w2popup.defaults,e),$("#w2ui-lock").css({"-webkit-transition":e.speed+"s opacity","-moz-transition":e.speed+"s opacity","-ms-transition":e.speed+"s opacity","-o-transition":e.speed+"s opacity",opacity:0}),setTimeout(function(){$("#w2ui-lock").remove()},1e3*e.speed),!0)},resize:function(e,t,i){var n=$("#w2ui-popup").data("options");parseInt($(window).width())-10<parseInt(e)&&(e=parseInt($(window).width())-10),parseInt($(window).height())-10<parseInt(t)&&(t=parseInt($(window).height())-10);var r=(parseInt($(window).height())-parseInt(t))/2*.8,s=(parseInt($(window).width())-parseInt(e))/2;$("#w2ui-popup").css({"-webkit-transition":n.speed+"s width, "+n.speed+"s height, "+n.speed+"s left, "+n.speed+"s top","-moz-transition":n.speed+"s width, "+n.speed+"s height, "+n.speed+"s left, "+n.speed+"s top","-ms-transition":n.speed+"s width, "+n.speed+"s height, "+n.speed+"s left, "+n.speed+"s top","-o-transition":n.speed+"s width, "+n.speed+"s height, "+n.speed+"s left, "+n.speed+"s top",top:r,left:s,width:e,height:t}),setTimeout(function(){n.width=e,n.height=t,"function"==typeof i&&i()},1e3*n.speed+50)}},$.extend(w2popup,w2utils.event)}();var w2alert=function(e,t,i){null==t&&(t=w2utils.lang("Notification")),$("#w2ui-popup").length>0&&"closing"!=w2popup.status?w2popup.message({width:400,height:170,html:'<div style="position: absolute; top: 0px; left: 0px; right: 0px; bottom: 45px; overflow: auto">        <div class="w2ui-centered" style="font-size: 13px;">'+e+'</div></div><div style="position: absolute; bottom: 7px; left: 0px; right: 0px; text-align: center; padding: 5px">        <button onclick="w2popup.message();" class="w2ui-popup-btn w2ui-btn">'+w2utils.lang("Ok")+"</button></div>",onClose:function(){"function"==typeof i&&i()}}):w2popup.open({width:450,height:220,showMax:!1,showClose:!1,title:t,body:'<div class="w2ui-centered" style="font-size: 13px;">'+e+"</div>",buttons:'<button onclick="w2popup.close();" class="w2ui-popup-btn w2ui-btn">'+w2utils.lang("Ok")+"</button>",onClose:function(){"function"==typeof i&&i()}})},w2confirm=function(e,t,i){var n={},r={msg:"",title:w2utils.lang("Confirmation"),width:$("#w2ui-popup").length>0?400:450,height:$("#w2ui-popup").length>0?170:220,yes_text:"Yes",yes_class:"",yes_style:"",yes_callBack:null,no_text:"No",no_class:"",no_style:"",no_callBack:null,callBack:null};return 1==arguments.length&&"object"==typeof e?$.extend(n,r,e):"function"==typeof t?$.extend(n,r,{msg:e,callBack:t}):$.extend(n,r,{msg:e,title:t,callBack:i}),$("#w2ui-popup").length>0&&"closing"!=w2popup.status?(n.width>w2popup.get().width&&(n.width=w2popup.get().width),n.height>w2popup.get().height-50&&(n.height=w2popup.get().height-50),w2popup.message({width:n.width,height:n.height,html:'<div style="position: absolute; top: 0px; left: 0px; right: 0px; bottom: 40px; overflow: auto">        <div class="w2ui-centered" style="font-size: 13px;">'+n.msg+'</div></div><div style="position: absolute; bottom: 7px; left: 0px; right: 0px; text-align: center; padding: 5px">        <button id="Yes" class="w2ui-popup-btn w2ui-btn '+n.yes_class+'" style="'+n.yes_style+'">'+w2utils.lang(n.yes_text)+'</button>        <button id="No" class="w2ui-popup-btn w2ui-btn '+n.no_class+'" style="'+n.no_style+'">'+w2utils.lang(n.no_text)+"</button></div>",onOpen:function(){$("#w2ui-popup .w2ui-popup-message .w2ui-btn").on("click",function(e){w2popup.message(),"function"==typeof n.callBack&&n.callBack(e.target.id),"Yes"==e.target.id&&"function"==typeof n.yes_callBack&&n.yes_callBack(),"No"==e.target.id&&"function"==typeof n.no_callBack&&n.no_callBack()})},onKeydown:function(e){switch(e.originalEvent.keyCode){case 13:"function"==typeof n.callBack&&n.callBack("Yes"),"function"==typeof n.yes_callBack&&n.yes_callBack(),w2popup.message();break;case 27:"function"==typeof n.callBack&&n.callBack("No"),"function"==typeof n.no_callBack&&n.no_callBack(),w2popup.message()}}})):(w2utils.isInt(n.height)||(n.height=n.height+50),w2popup.open({width:n.width,height:n.height,title:n.title,modal:!0,showClose:!1,body:'<div class="w2ui-centered" style="font-size: 13px;">'+n.msg+"</div>",buttons:'<button id="Yes" class="w2ui-popup-btn w2ui-btn '+n.yes_class+'" style="'+n.yes_style+'">'+w2utils.lang(n.yes_text)+'</button><button id="No" class="w2ui-popup-btn w2ui-btn '+n.no_class+'" style="'+n.no_style+'">'+w2utils.lang(n.no_text)+"</button>",onOpen:function(e){e.onComplete=function(){$("#w2ui-popup .w2ui-popup-btn").on("click",function(e){w2popup.close(),"function"==typeof n.callBack&&n.callBack(e.target.id),"Yes"==e.target.id&&"function"==typeof n.yes_callBack&&n.yes_callBack(),"No"==e.target.id&&"function"==typeof n.no_callBack&&n.no_callBack()})}},onKeydown:function(e){switch(e.originalEvent.keyCode){case 13:"function"==typeof n.callBack&&n.callBack("Yes"),"function"==typeof n.yes_callBack&&n.yes_callBack(),w2popup.close();break;case 27:"function"==typeof n.callBack&&n.callBack("No"),"function"==typeof n.no_callBack&&n.no_callBack(),w2popup.close()}}})),{yes:function(e){return n.yes_callBack=e,this},no:function(e){return n.no_callBack=e,this}}};!function(){var e=function(e){this.box=null,this.name=null,this.active=null,this.tabs=[],this.routeData={},this.right="",this.style="",this.onClick=null,this.onClose=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,$.extend(this,{handlers:[]}),$.extend(!0,this,w2obj.tabs,e)};$.fn.w2tabs=function(t){if("object"!=typeof t&&t){if(w2ui[$(this).attr("name")]){var i=w2ui[$(this).attr("name")];return i[t].apply(i,Array.prototype.slice.call(arguments,1)),this}return void console.log("ERROR: Method "+t+" does not exist on jQuery.w2tabs")}if(w2utils.checkName(t,"w2tabs")){for(var n=t.tabs||[],r=new e(t),s=0;s<n.length;s++)r.tabs[s]=$.extend({},e.prototype.tab,n[s]);return 0!==$(this).length&&r.render($(this)[0]),w2ui[r.name]=r,r}},e.prototype={tab:{id:null,text:"",route:null,hidden:!1,disabled:!1,closable:!1,hint:"",onClick:null,onRefresh:null,onClose:null},add:function(e){return this.insert(null,e)},insert:function(t,i){$.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++){if("undefined"==typeof i[n].id)return void console.log('ERROR: The parameter "id" is required but not supplied. (obj: '+this.name+")");if(!w2utils.checkUniqueId(i[n].id,this.tabs,"tabs",this.name))return;var r=$.extend({},e.prototype.tab,i[n]);if(null===t||"undefined"==typeof t)this.tabs.push(r);else{var s=this.get(t,!0);this.tabs=this.tabs.slice(0,s).concat([r],this.tabs.slice(s))}this.refresh(i[n].id)}},remove:function(){for(var e=0,t=0;t<arguments.length;t++){var i=this.get(arguments[t]);if(!i)return!1;e++,this.tabs.splice(this.get(i.id,!0),1),$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(i.id)).remove()}return e},select:function(e){return this.active!=e&&null!==this.get(e)&&(this.active=e,this.refresh(),!0)},set:function(e,t){var i=this.get(e,!0);return null!==i&&($.extend(this.tabs[i],t),this.refresh(e),!0)},get:function(e,t){if(0===arguments.length){for(var i=[],n=0;n<this.tabs.length;n++)null!=this.tabs[n].id&&i.push(this.tabs[n].id);return i}for(var r=0;r<this.tabs.length;r++)if(this.tabs[r].id==e)return t===!0?r:this.tabs[r];return null},show:function(){for(var e=this,t=0,i=[],n=0;n<arguments.length;n++){var r=this.get(arguments[n]);r&&r.hidden!==!1&&(t++,r.hidden=!1,i.push(r.id))}return setTimeout(function(){for(var t in i)e.refresh(i[t])},15),t},hide:function(){for(var e=this,t=0,i=[],n=0;n<arguments.length;n++){var r=this.get(arguments[n]);r&&r.hidden!==!0&&(t++,r.hidden=!0,i.push(r.id))}return setTimeout(function(){for(var t in i)e.refresh(i[t])},15),t},enable:function(){for(var e=this,t=0,i=[],n=0;n<arguments.length;n++){var r=this.get(arguments[n]);r&&r.disabled!==!1&&(t++,r.disabled=!1,i.push(r.id))}return setTimeout(function(){for(var t in i)e.refresh(i[t])},15),t},disable:function(){for(var e=this,t=0,i=[],n=0;n<arguments.length;n++){var r=this.get(arguments[n]);r&&r.disabled!==!0&&(t++,r.disabled=!0,i.push(r.id))}return setTimeout(function(){for(var t in i)e.refresh(i[t])},15),t},refresh:function(e){var t=(new Date).getTime(),i=this.trigger({phase:"before",type:"refresh",target:"undefined"!=typeof e?e:this.name,object:this.get(e)});if(i.isCancelled!==!0){if("undefined"==typeof e)for(var n=0;n<this.tabs.length;n++)this.refresh(this.tabs[n].id);else{var r=this.get(e);if(null===r)return!1;"undefined"!=typeof r.caption&&(r.text=r.caption);var s=$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(r.id)),o=(r.closable?'<div class="w2ui-tab-close" onclick="w2ui[\''+this.name+"'].animateClose('"+r.id+"', event);\"></div>":"")+'    <div class="w2ui-tab'+(this.active===r.id?" active":"")+(r.closable?" closable":"")+'"         title="'+("undefined"!=typeof r.hint?r.hint:"")+'"        onclick="w2ui[\''+this.name+"'].click('"+r.id+"', event);\">"+r.text+"</div>";if(0===s.length){var a="";r.hidden&&(a+="display: none;"),r.disabled&&(a+="opacity: 0.2; -moz-opacity: 0.2; -webkit-opacity: 0.2; -o-opacity: 0.2; filter:alpha(opacity=20);");var l='<td id="tabs_'+this.name+"_tab_"+r.id+'" style="'+a+'" valign="middle">'+o+"</td>";this.get(e,!0)!==this.tabs.length-1&&$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(this.tabs[parseInt(this.get(e,!0))+1].id)).length>0?$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(this.tabs[parseInt(this.get(e,!0))+1].id)).before(l):$(this.box).find("#tabs_"+this.name+"_right").before(l)}else s.html(o),r.hidden?s.css("display","none"):s.css("display",""),s.css(r.disabled?{opacity:"0.2","-moz-opacity":"0.2","-webkit-opacity":"0.2","-o-opacity":"0.2",filter:"alpha(opacity=20)"}:{opacity:"1","-moz-opacity":"1","-webkit-opacity":"1","-o-opacity":"1",filter:"alpha(opacity=100)"})}return $("#tabs_"+this.name+"_right").html(this.right),this.trigger($.extend(i,{phase:"after"})),(new Date).getTime()-t}},render:function(e){var t=(new Date).getTime(),i=this.trigger({phase:"before",type:"render",target:this.name,box:e});if(i.isCancelled!==!0){if("undefined"!=typeof e&&null!==e&&($(this.box).find("> table #tabs_"+this.name+"_right").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-tabs").html(""),this.box=e),!this.box)return!1;var n='<table cellspacing="0" cellpadding="1" width="100%">    <tr><td width="100%" id="tabs_'+this.name+'_right" align="right">'+this.right+"</td></tr></table>";return $(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-tabs").html(n),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style),this.trigger($.extend(i,{phase:"after"})),this.refresh(),(new Date).getTime()-t}},resize:function(){var e=(new Date).getTime(),t=this.trigger({phase:"before",type:"resize",target:this.name});return t.isCancelled!==!0?(this.trigger($.extend(t,{phase:"after"})),(new Date).getTime()-e):void 0},destroy:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});e.isCancelled!==!0&&($(this.box).find("> table #tabs_"+this.name+"_right").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-tabs").html(""),delete w2ui[this.name],this.trigger($.extend(e,{phase:"after"})))},click:function(e,t){var i=this.get(e);if(null===i||i.disabled)return!1;var n=this.trigger({phase:"before",type:"click",target:e,tab:i,object:i,originalEvent:t});if(n.isCancelled!==!0){if($(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(this.active)+" .w2ui-tab").removeClass("active"),this.active=i.id,i.route){var r=String("/"+i.route).replace(/\/{2,}/g,"/"),s=w2utils.parseRoute(r);if(s.keys.length>0)for(var o=0;o<s.keys.length;o++)null!=this.routeData[s.keys[o].name]&&(r=r.replace(new RegExp(":"+s.keys[o].name,"g"),this.routeData[s.keys[o].name]));setTimeout(function(){window.location.hash=r},1)}this.trigger($.extend(n,{phase:"after"})),this.refresh(e)}},animateClose:function(e,t){var i=this.get(e);if(null===i||i.disabled)return!1;var n=this.trigger({phase:"before",type:"close",target:e,object:this.get(e),originalEvent:t});if(n.isCancelled!==!0){var r=this;$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(i.id)).css({"-webkit-transition":".2s","-moz-transition":"2s","-ms-transition":".2s","-o-transition":".2s",opacity:"0"}),setTimeout(function(){var e=$(r.box).find("#tabs_"+r.name+"_tab_"+w2utils.escapeId(i.id)).width();$(r.box).find("#tabs_"+r.name+"_tab_"+w2utils.escapeId(i.id)).html('<div style="width: '+e+'px; -webkit-transition: .2s; -moz-transition: .2s; -ms-transition: .2s; -o-transition: .2s"></div>'),setTimeout(function(){$(r.box).find("#tabs_"+r.name+"_tab_"+w2utils.escapeId(i.id)).find(":first-child").css({width:"0px"})},50)},200),setTimeout(function(){r.remove(e)},450),this.trigger($.extend(n,{phase:"after"})),this.refresh()}},animateInsert:function(e,t){if(null!==this.get(e)&&$.isPlainObject(t)&&w2utils.checkUniqueId(t.id,this.tabs,"tabs",this.name)){var i=$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(t.id));if(0===i.length){"undefined"!=typeof t.caption&&(t.text=t.caption);var n='<div id="_tmp_tabs" class="w2ui-reset w2ui-tabs" style="position: absolute; top: -1000px;"><table cellspacing="0" cellpadding="1" width="100%"><tr><td id="_tmp_simple_tab" style="" valign="middle">'+(t.closable?'<div class="w2ui-tab-close"></div>':"")+'    <div class="w2ui-tab '+(this.active===t.id?"active":"")+'">'+t.text+"</div></td></tr></table></div>";$("body").append(n);var r='<div style="width: 1px; -webkit-transition: 0.2s; -moz-transition: 0.2s; -ms-transition: 0.2s; -o-transition: 0.2s;">&nbsp;</div>',s="";t.hidden&&(s+="display: none;"),t.disabled&&(s+="opacity: 0.2; -moz-opacity: 0.2; -webkit-opacity: 0.2; -o-opacity: 0.2; filter:alpha(opacity=20);");var o='<td id="tabs_'+this.name+"_tab_"+t.id+'" style="'+s+'" valign="middle">'+r+"</td>";this.get(e,!0)!==this.tabs.length&&$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(this.tabs[parseInt(this.get(e,!0))].id)).length>0?$(this.box).find("#tabs_"+this.name+"_tab_"+w2utils.escapeId(this.tabs[parseInt(this.get(e,!0))].id)).before(o):$(this.box).find("#tabs_"+this.name+"_right").before(o);var a=this;setTimeout(function(){var e=$("#_tmp_simple_tab").width();$("#_tmp_tabs").remove(),$("#tabs_"+a.name+"_tab_"+w2utils.escapeId(t.id)+" > div").css("width",e+"px")},1),setTimeout(function(){a.insert(e,t)},200)}}}},$.extend(e.prototype,w2utils.event),w2obj.tabs=e}(),function(){var e=function(e){this.box=null,this.name=null,this.routeData={},this.items=[],this.right="",this.onClick=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,$.extend(!0,this,w2obj.toolbar,e)};$.fn.w2toolbar=function(t){if("object"==typeof t||!t){if(!w2utils.checkName(t,"w2toolbar"))return;var i=t.items||[],n=new e(t);$.extend(n,{items:[],handlers:[]});for(var r=0;r<i.length;r++)n.items[r]=$.extend({},e.prototype.item,i[r]);return 0!==$(this).length&&n.render($(this)[0]),w2ui[n.name]=n,n}if(w2ui[$(this).attr("name")]){var s=w2ui[$(this).attr("name")];return s[t].apply(s,Array.prototype.slice.call(arguments,1)),this}console.log("ERROR: Method "+t+" does not exist on jQuery.w2toolbar")},e.prototype={item:{id:null,type:"button",text:"",route:null,html:"",img:null,icon:null,count:null,hidden:!1,disabled:!1,checked:!1,arrow:!0,hint:"",group:null,items:null,overlay:{},onClick:null},add:function(e){this.insert(null,e)},insert:function(t,i){$.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++){if("undefined"==typeof i[n].type)return void console.log('ERROR: The parameter "type" is required but not supplied in w2toolbar.add() method.');if(-1===$.inArray(String(i[n].type),["button","check","radio","drop","menu","break","html","spacer"]))return void console.log('ERROR: The parameter "type" should be one of the following [button, check, radio, drop, menu, break, html, spacer] in w2toolbar.add() method.');
if("undefined"==typeof i[n].id)return void console.log('ERROR: The parameter "id" is required but not supplied in w2toolbar.add() method.');if(!w2utils.checkUniqueId(i[n].id,this.items,"toolbar items",this.name))return;var r=$.extend({},e.prototype.item,i[n]);if(null==t)this.items.push(r);else{var s=this.get(t,!0);this.items=this.items.slice(0,s).concat([r],this.items.slice(s))}this.refresh(r.id)}},remove:function(){for(var e=0,t=0;t<arguments.length;t++){var i=this.get(arguments[t]);if(i){e++,$(this.box).find("#tb_"+this.name+"_item_"+w2utils.escapeId(i.id)).remove();var n=this.get(i.id,!0);n&&this.items.splice(n,1)}}return e},set:function(e,t){var i=this.get(e,!0);return null!==i&&($.extend(this.items[i],t),this.refresh(e),!0)},get:function(e,t){if(0===arguments.length){for(var i=[],n=0;n<this.items.length;n++)null!==this.items[n].id&&i.push(this.items[n].id);return i}for(var r=0;r<this.items.length;r++)if(this.items[r].id===e)return t===!0?r:this.items[r];return null},show:function(){for(var e=this,t=0,i=[],n=0;n<arguments.length;n++){var r=this.get(arguments[n]);r&&(t++,r.hidden=!1,i.push(r.id))}return setTimeout(function(){for(var t in i)e.refresh(i[t])},15),t},hide:function(){for(var e=this,t=0,i=[],n=0;n<arguments.length;n++){var r=this.get(arguments[n]);r&&(t++,r.hidden=!0,i.push(r.id))}return setTimeout(function(){for(var t in i)e.refresh(i[t])},15),t},enable:function(){for(var e=this,t=0,i=[],n=0;n<arguments.length;n++){var r=this.get(arguments[n]);r&&(t++,r.disabled=!1,i.push(r.id))}return setTimeout(function(){for(var t in i)e.refresh(i[t])},15),t},disable:function(){for(var e=this,t=0,i=[],n=0;n<arguments.length;n++){var r=this.get(arguments[n]);r&&(t++,r.disabled=!0,i.push(r.id))}return setTimeout(function(){for(var t in i)e.refresh(i[t])},15),t},check:function(){for(var e=this,t=0,i=[],n=0;n<arguments.length;n++){var r=this.get(arguments[n]);r&&(t++,r.checked=!0,i.push(r.id))}return setTimeout(function(){for(var t in i)e.refresh(i[t])},15),t},uncheck:function(){for(var e=this,t=0,i=[],n=0;n<arguments.length;n++){var r=this.get(arguments[n]);r&&(t++,r.checked=!1,i.push(r.id))}return setTimeout(function(){for(var t in i)e.refresh(i[t])},15),t},render:function(e){var t=(new Date).getTime(),i=this.trigger({phase:"before",type:"render",target:this.name,box:e});if(i.isCancelled!==!0&&(null!=e&&($(this.box).find("> table #tb_"+this.name+"_right").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-toolbar").html(""),this.box=e),this.box)){for(var n='<table cellspacing="0" cellpadding="0" width="100%"><tr>',r=0;r<this.items.length;r++){var s=this.items[r];null==s.id&&(s.id="item_"+r),null!==s&&(n+="spacer"===s.type?'<td width="100%" id="tb_'+this.name+"_item_"+s.id+'" align="right"></td>':'<td id="tb_'+this.name+"_item_"+s.id+'" style="'+(s.hidden?"display: none":"")+'"     class="'+(s.disabled?"disabled":"")+'" valign="middle">'+this.getItemHTML(s)+"</td>")}return n+='<td width="100%" id="tb_'+this.name+'_right" align="right">'+this.right+"</td>",n+="</tr></table>",$(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-toolbar").html(n),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style),this.trigger($.extend(i,{phase:"after"})),(new Date).getTime()-t}},refresh:function(e){var t=(new Date).getTime(),i=this.trigger({phase:"before",type:"refresh",target:"undefined"!=typeof e?e:this.name,item:this.get(e)});if(i.isCancelled!==!0){if(null==e)for(var n=0;n<this.items.length;n++){var r=this.items[n];null==r.id&&(r.id="item_"+n),this.refresh(r.id)}var s=this.get(e);if(null===s)return!1;var o=$(this.box).find("#tb_"+this.name+"_item_"+w2utils.escapeId(s.id)),a=this.getItemHTML(s);return 0===o.length?(a="spacer"===s.type?'<td width="100%" id="tb_'+this.name+"_item_"+s.id+'" align="right"></td>':'<td id="tb_'+this.name+"_item_"+s.id+'" style="'+(s.hidden?"display: none":"")+'"     class="'+(s.disabled?"disabled":"")+'" valign="middle">'+a+"</td>",this.get(e,!0)===this.items.length-1?$(this.box).find("#tb_"+this.name+"_right").before(a):$(this.box).find("#tb_"+this.name+"_item_"+w2utils.escapeId(this.items[parseInt(this.get(e,!0))+1].id)).before(a)):(o.html(a),s.hidden?o.css("display","none"):o.css("display",""),s.disabled?o.addClass("disabled"):o.removeClass("disabled")),this.trigger($.extend(i,{phase:"after"})),(new Date).getTime()-t}},resize:function(){var e=(new Date).getTime(),t=this.trigger({phase:"before",type:"resize",target:this.name});return t.isCancelled!==!0?(this.trigger($.extend(t,{phase:"after"})),(new Date).getTime()-e):void 0},destroy:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});e.isCancelled!==!0&&($(this.box).find("> table #tb_"+this.name+"_right").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-toolbar").html(""),$(this.box).html(""),delete w2ui[this.name],this.trigger($.extend(e,{phase:"after"})))},getItemHTML:function(e){var t="";switch("undefined"!=typeof e.caption&&(e.text=e.caption),"undefined"==typeof e.hint&&(e.hint=""),"undefined"==typeof e.text&&(e.text=""),e.type){case"menu":case"button":case"check":case"radio":case"drop":var i="<td>&nbsp;</td>";e.img&&(i='<td><div class="w2ui-tb-image w2ui-icon '+e.img+'"></div></td>'),e.icon&&(i='<td><div class="w2ui-tb-image"><span class="'+e.icon+'"></span></div></td>'),t+='<table cellpadding="0" cellspacing="0" title="'+e.hint+'" class="w2ui-button '+(e.checked?"checked":"")+'"        onclick     = "var el=w2ui[\''+this.name+"']; if (el) el.click('"+e.id+'\', event);"        onmouseover = "'+(e.disabled?"":"$(this).addClass('over');")+'"       onmouseout  = "'+(e.disabled?"":"$(this).removeClass('over').removeClass('down');")+'"       onmousedown = "'+(e.disabled?"":"$(this).addClass('down');")+'"       onmouseup   = "'+(e.disabled?"":"$(this).removeClass('down');")+'"><tr><td>  <table cellpadding="1" cellspacing="0">  <tr>'+i+(""!==e.text?'<td class="w2ui-tb-caption" nowrap>'+e.text+"</td>":"")+(null!=e.count?'<td class="w2ui-tb-count" nowrap><span>'+e.count+"</span></td>":"")+("drop"!==e.type&&"menu"!==e.type||e.arrow===!1?"":'<td class="w2ui-tb-down" nowrap><div></div></td>')+"  </tr></table></td></tr></table>";break;case"break":t+='<table cellpadding="0" cellspacing="0"><tr>    <td><div class="w2ui-break">&nbsp;</div></td></tr></table>';break;case"html":t+='<table cellpadding="0" cellspacing="0"><tr>    <td nowrap>'+e.html+"</td></tr></table>"}var n="";return"function"==typeof e.onRender&&(n=e.onRender.call(this,e.id,t)),"function"==typeof this.onRender&&(n=this.onRender(e.id,t)),""!==n&&null!=n&&(t=n),t},menuClick:function(e){var t=this;if(e.item&&!e.item.disabled){var i=this.trigger({phase:"before",type:"click",target:e.item.id+":"+e.subItem.id,item:e.item,subItem:e.subItem,originalEvent:e.originalEvent});if(i.isCancelled===!0)return;var n=e.subItem;if(n.route){var r=String("/"+n.route).replace(/\/{2,}/g,"/"),s=w2utils.parseRoute(r);if(s.keys.length>0)for(var o=0;o<s.keys.length;o++)null!=t.routeData[s.keys[o].name]&&(r=r.replace(new RegExp(":"+s.keys[o].name,"g"),this.routeData[s.keys[o].name]));setTimeout(function(){window.location.hash=r},1)}this.trigger($.extend(i,{phase:"after"}))}},click:function(e,t){var i=this,n=this.get(e);if(n&&!n.disabled){var r=this.trigger({phase:"before",type:"click",target:"undefined"!=typeof e?e:this.name,item:n,object:n,originalEvent:t});if(r.isCancelled===!0)return;var s=$("#tb_"+this.name+"_item_"+w2utils.escapeId(n.id)+" table.w2ui-button");if(s.removeClass("down"),"radio"===n.type){for(var o=0;o<this.items.length;o++){var a=this.items[o];null!=a&&a.id!==n.id&&"radio"===a.type&&a.group===n.group&&a.checked&&(a.checked=!1,this.refresh(a.id))}n.checked=!0,s.addClass("checked")}if(("drop"===n.type||"menu"===n.type)&&(n.checked?n.checked=!1:setTimeout(function(){function e(){$(document).off("click",e),n.checked=!1,s.removeClass("checked")}var t=$("#tb_"+i.name+"_item_"+w2utils.escapeId(n.id));$.isPlainObject(n.overlay)||(n.overlay={});var r=(t.width()-50)/2;r>19&&(r=19),"drop"===n.type&&t.w2overlay(n.html,$.extend({left:r,top:3},n.overlay)),"menu"===n.type&&t.w2menu(n.items,$.extend({left:r,top:3},n.overlay,{select:function(t){i.menuClick({item:n,subItem:t.item,originalEvent:t.originalEvent}),e()}})),$(document).on("click",e)},1)),("check"===n.type||"drop"===n.type||"menu"===n.type)&&(n.checked=!n.checked,n.checked?s.addClass("checked"):s.removeClass("checked")),n.route){var l=String("/"+n.route).replace(/\/{2,}/g,"/"),d=w2utils.parseRoute(l);if(d.keys.length>0)for(var u=0;u<d.keys.length;u++)l=l.replace(new RegExp(":"+d.keys[u].name,"g"),this.routeData[d.keys[u].name]);setTimeout(function(){window.location.hash=l},1)}this.trigger($.extend(r,{phase:"after"}))}}},$.extend(e.prototype,w2utils.event),w2obj.toolbar=e}(),function(){var e=function(e){this.name=null,this.box=null,this.sidebar=null,this.parent=null,this.nodes=[],this.menu=[],this.routeData={},this.selected=null,this.img=null,this.icon=null,this.style="",this.topHTML="",this.bottomHTML="",this.keyboard=!0,this.onClick=null,this.onDblClick=null,this.onContextMenu=null,this.onMenuClick=null,this.onExpand=null,this.onCollapse=null,this.onKeydown=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,$.extend(!0,this,w2obj.sidebar,e)};$.fn.w2sidebar=function(t){if("object"==typeof t||!t){if(!w2utils.checkName(t,"w2sidebar"))return;var i=t.nodes,n=new e(t);return $.extend(n,{handlers:[],nodes:[]}),"undefined"!=typeof i&&n.add(n,i),0!==$(this).length&&n.render($(this)[0]),n.sidebar=n,w2ui[n.name]=n,n}if(w2ui[$(this).attr("name")]){var r=w2ui[$(this).attr("name")];return r[t].apply(r,Array.prototype.slice.call(arguments,1)),this}console.log("ERROR: Method "+t+" does not exist on jQuery.w2sidebar")},e.prototype={node:{id:null,text:"",count:null,img:null,icon:null,nodes:[],style:"",route:null,selected:!1,expanded:!1,hidden:!1,disabled:!1,group:!1,groupShowHide:!0,plus:!1,onClick:null,onDblClick:null,onContextMenu:null,onExpand:null,onCollapse:null,parent:null,sidebar:null},add:function(e,t){return 1==arguments.length&&(t=arguments[0],e=this),"string"==typeof e&&(e=this.get(e)),this.insert(e,null,t)},insert:function(t,i,n){var r,s,o,a,l;if(2==arguments.length){if(n=arguments[1],i=arguments[0],s=this.get(i),null===s)return $.isArray(n)||(n=[n]),r=null!=n[0].caption?n[0].caption:n[0].text,console.log('ERROR: Cannot insert node "'+r+'" because cannot find node "'+i+'" to insert before.'),null;t=this.get(i).parent}"string"==typeof t&&(t=this.get(t)),$.isArray(n)||(n=[n]);for(var d in n)if(a=n[d],null!=typeof a.id)if(null===this.get(this,a.id)){if(o=$.extend({},e.prototype.node,a),o.sidebar=this,o.parent=t,l=o.nodes||[],o.nodes=[],null===i)t.nodes.push(o);else{if(s=this.get(t,i,!0),null===s)return r=null!=a.caption?a.caption:a.text,console.log('ERROR: Cannot insert node "'+r+'" because cannot find node "'+i+'" to insert before.'),null;t.nodes.splice(s,0,o)}l.length>0&&this.insert(o,null,l)}else r=null!=a.caption?a.caption:a.text,console.log("ERROR: Cannot insert node with id="+a.id+" (text: "+r+") because another node with the same id already exists.");else r=null!=a.caption?a.caption:a.text,console.log('ERROR: Cannot insert node "'+r+'" because it has no id.');return this.refresh(t.id),o},remove:function(){for(var e,t=0,i=0;i<arguments.length;i++)if(e=this.get(arguments[i]),null!==e){null!==this.selected&&this.selected===e.id&&(this.selected=null);var n=this.get(e.parent,arguments[i],!0);null!==n&&(e.parent.nodes[n].selected&&e.sidebar.unselect(e.id),e.parent.nodes.splice(n,1),t++)}return t>0&&1==arguments.length?this.refresh(e.parent.id):this.refresh(),t},set:function(e,t,i){if(2==arguments.length&&(i=t,t=e,e=this),"string"==typeof e&&(e=this.get(e)),null==e.nodes)return null;for(var n=0;n<e.nodes.length;n++){if(e.nodes[n].id===t){var r=i.nodes;return $.extend(e.nodes[n],i,{nodes:[]}),null!=r&&this.add(e.nodes[n],r),this.refresh(t),!0}var s=this.set(e.nodes[n],t,i);if(s)return!0}return!1},get:function(e,t,i){if(0===arguments.length){for(var n=[],r=this.find({}),s=0;s<r.length;s++)null!=r[s].id&&n.push(r[s].id);return n}if((1==arguments.length||2==arguments.length&&t===!0)&&(i=t,t=e,e=this),"string"==typeof e&&(e=this.get(e)),null==e.nodes)return null;for(var o=0;o<e.nodes.length;o++){if(e.nodes[o].id==t)return i===!0?o:e.nodes[o];var a=this.get(e.nodes[o],t,i);if(a||0===a)return a}return null},find:function(e,t,i){if(1==arguments.length&&(t=e,e=this),i||(i=[]),"string"==typeof e&&(e=this.get(e)),null==e.nodes)return i;for(var n=0;n<e.nodes.length;n++){var r=!0;for(var s in t)e.nodes[n][s]!=t[s]&&(r=!1);r&&i.push(e.nodes[n]),e.nodes[n].nodes.length>0&&(i=this.find(e.nodes[n],t,i))}return i},hide:function(){for(var e=0,t=0;t<arguments.length;t++){var i=this.get(arguments[t]);null!==i&&(i.hidden=!0,e++)}return 1==arguments.length?this.refresh(arguments[0]):this.refresh(),e},show:function(){for(var e=0,t=0;t<arguments.length;t++){var i=this.get(arguments[t]);null!==i&&(i.hidden=!1,e++)}return 1==arguments.length?this.refresh(arguments[0]):this.refresh(),e},disable:function(){for(var e=0,t=0;t<arguments.length;t++){var i=this.get(arguments[t]);null!==i&&(i.disabled=!0,i.selected&&this.unselect(i.id),e++)}return 1==arguments.length?this.refresh(arguments[0]):this.refresh(),e},enable:function(){for(var e=0,t=0;t<arguments.length;t++){var i=this.get(arguments[t]);null!==i&&(i.disabled=!1,e++)}return 1==arguments.length?this.refresh(arguments[0]):this.refresh(),e},select:function(e){var t=this.get(e);return!!t&&((this.selected!=e||!t.selected)&&(this.unselect(this.selected),$(this.box).find("#node_"+w2utils.escapeId(e)).addClass("w2ui-selected").find(".w2ui-icon").addClass("w2ui-icon-selected"),t.selected=!0,this.selected=e,!0))},unselect:function(e){var t=this.get(e);return!!t&&(t.selected=!1,$(this.box).find("#node_"+w2utils.escapeId(e)).removeClass("w2ui-selected").find(".w2ui-icon").removeClass("w2ui-icon-selected"),this.selected==e&&(this.selected=null),!0)},toggle:function(e){var t=this.get(e);return null!==t&&(t.plus?(this.set(e,{plus:!1}),this.expand(e),void this.refresh(e)):0!==t.nodes.length&&(this.get(e).expanded?this.collapse(e):this.expand(e)))},collapse:function(e){var t=this,i=this.get(e),n=this.trigger({phase:"before",type:"collapse",target:e,object:i});return n.isCancelled!==!0?($(this.box).find("#node_"+w2utils.escapeId(e)+"_sub").slideUp(200),$(this.box).find("#node_"+w2utils.escapeId(e)+" .w2ui-node-dots:first-child").html('<div class="w2ui-expand">+</div>'),i.expanded=!1,this.trigger($.extend(n,{phase:"after"})),setTimeout(function(){t.refresh(e)},200),!0):void 0},collapseAll:function(e){if("undefined"==typeof e&&(e=this),"string"==typeof e&&(e=this.get(e)),null==e.nodes)return!1;for(var t=0;t<e.nodes.length;t++)e.nodes[t].expanded===!0&&(e.nodes[t].expanded=!1),e.nodes[t].nodes&&e.nodes[t].nodes.length>0&&this.collapseAll(e.nodes[t]);return this.refresh(e.id),!0},expand:function(e){var t=this,i=this.get(e),n=this.trigger({phase:"before",type:"expand",target:e,object:i});return n.isCancelled!==!0?($(this.box).find("#node_"+w2utils.escapeId(e)+"_sub").slideDown(200),$(this.box).find("#node_"+w2utils.escapeId(e)+" .w2ui-node-dots:first-child").html('<div class="w2ui-expand">-</div>'),i.expanded=!0,this.trigger($.extend(n,{phase:"after"})),setTimeout(function(){t.refresh(e)},200),!0):void 0},expandAll:function(e){if("undefined"==typeof e&&(e=this),"string"==typeof e&&(e=this.get(e)),null==e.nodes)return!1;for(var t=0;t<e.nodes.length;t++)e.nodes[t].expanded===!1&&(e.nodes[t].expanded=!0),e.nodes[t].nodes&&e.nodes[t].nodes.length>0&&this.expandAll(e.nodes[t]);this.refresh(e.id)},expandParents:function(e){var t=this.get(e);return null!==t&&(t.parent&&(t.parent.expanded=!0,this.expandParents(t.parent.id)),this.refresh(e),!0)},click:function(e,t){var i=this,n=this.get(e);if(null!==n&&!n.disabled&&!n.group){$(i.box).find(".w2ui-node.w2ui-selected").each(function(e,t){var n=$(t).attr("id").replace("node_",""),r=i.get(n);null!=r&&(r.selected=!1),$(t).removeClass("w2ui-selected").find(".w2ui-icon").removeClass("w2ui-icon-selected")});var r=$(i.box).find("#node_"+w2utils.escapeId(e)),s=$(i.box).find("#node_"+w2utils.escapeId(i.selected));r.addClass("w2ui-selected").find(".w2ui-icon").addClass("w2ui-icon-selected"),setTimeout(function(){var o=i.trigger({phase:"before",type:"click",target:e,originalEvent:t,node:n,object:n});if(o.isCancelled===!0)return r.removeClass("w2ui-selected").find(".w2ui-icon").removeClass("w2ui-icon-selected"),void s.addClass("w2ui-selected").find(".w2ui-icon").addClass("w2ui-icon-selected");if(null!==s&&(s.selected=!1),i.get(e).selected=!0,i.selected=e,n.route){var a=String("/"+n.route).replace(/\/{2,}/g,"/"),l=w2utils.parseRoute(a);if(l.keys.length>0)for(var d=0;d<l.keys.length;d++)null!=i.routeData[l.keys[d].name]&&(a=a.replace(new RegExp(":"+l.keys[d].name,"g"),i.routeData[l.keys[d].name]));setTimeout(function(){window.location.hash=a},1)}i.trigger($.extend(o,{phase:"after"}))},1)}},keydown:function(e){function t(e,t){null===e||e.hidden||e.disabled||e.group||(o.click(e.id,t),setTimeout(function(){o.scrollIntoView()},50))}function i(e,t){for(e=t(e);null!==e&&(e.hidden||e.disabled)&&!e.group;)e=t(e);return e}function n(e,t){if(null===e)return null;var i=e.parent,r=o.get(e.id,!0),s=null;if(e.expanded&&e.nodes.length>0&&t!==!0){var a=e.nodes[0];s=a.hidden||a.disabled||a.group?n(a):a}else s=i&&r+1<i.nodes.length?i.nodes[r+1]:n(i,!0);return null!==s&&(s.hidden||s.disabled||s.group)&&(s=n(s)),s}function r(e){if(null===e)return null;var t=e.parent,i=o.get(e.id,!0),n=i>0?s(t.nodes[i-1]):t;return null!==n&&(n.hidden||n.disabled||n.group)&&(n=r(n)),n}function s(e){if(e.expanded&&e.nodes.length>0){var t=e.nodes[e.nodes.length-1];return t.hidden||t.disabled||t.group?r(t):s(t)}return e}var o=this,a=o.get(o.selected);if(a&&o.keyboard===!0){var l=o.trigger({phase:"before",type:"keydown",target:o.name,originalEvent:e});l.isCancelled!==!0&&((13==e.keyCode||32==e.keyCode)&&a.nodes.length>0&&o.toggle(o.selected),37==e.keyCode&&(a.nodes.length>0&&a.expanded?o.collapse(o.selected):(t(a.parent),a.parent.group||o.collapse(a.parent.id))),39==e.keyCode&&(a.nodes.length>0||a.plus)&&!a.expanded&&o.expand(o.selected),38==e.keyCode&&t(i(a,r)),40==e.keyCode&&t(i(a,n)),-1!=$.inArray(e.keyCode,[13,32,37,38,39,40])&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),o.trigger($.extend(l,{phase:"after"})))}},scrollIntoView:function(e){"undefined"==typeof e&&(e=this.selected);var t=this.get(e);if(null!==t){var i=$(this.box).find(".w2ui-sidebar-div"),n=$(this.box).find("#node_"+w2utils.escapeId(e)),r=n.offset().top-i.offset().top;r+n.height()>i.height()&&i.animate({scrollTop:i.scrollTop()+i.height()/1.3},250,"linear"),0>=r&&i.animate({scrollTop:i.scrollTop()-i.height()/1.3},250,"linear")}},dblClick:function(e,t){var i=this.get(e),n=this.trigger({phase:"before",type:"dblClick",target:e,originalEvent:t,object:i});n.isCancelled!==!0&&(this.toggle(e),this.trigger($.extend(n,{phase:"after"})))},contextMenu:function(e,t){var i=this,n=i.get(e);e!=i.selected&&i.click(e),setTimeout(function(){var r=i.trigger({phase:"before",type:"contextMenu",target:e,originalEvent:t,object:n});r.isCancelled!==!0&&(n.group||n.disabled||(i.menu.length>0&&$(i.box).find("#node_"+w2utils.escapeId(e)).w2menu(i.menu,{left:(t?t.offsetX||t.pageX:50)-25,onSelect:function(t){i.menuClick(e,parseInt(t.index),t.originalEvent)}}),i.trigger($.extend(r,{phase:"after"}))))},150)},menuClick:function(e,t,i){var n=this,r=n.trigger({phase:"before",type:"menuClick",target:e,originalEvent:i,menuIndex:t,menuItem:n.menu[t]});r.isCancelled!==!0&&n.trigger($.extend(r,{phase:"after"}))},render:function(e){var t=(new Date).getTime(),i=this.trigger({phase:"before",type:"render",target:this.name,box:e});return i.isCancelled!==!0&&("undefined"!=typeof e&&null!==e&&($(this.box).find("> div > div.w2ui-sidebar-div").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-sidebar").html(""),this.box=e),this.box)?($(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-sidebar").html('<div><div class="w2ui-sidebar-top"></div><div class="w2ui-sidebar-div"></div><div class="w2ui-sidebar-bottom"></div></div>'),$(this.box).find("> div").css({width:$(this.box).width()+"px",height:$(this.box).height()+"px"}),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style),""!==this.topHTML&&($(this.box).find(".w2ui-sidebar-top").html(this.topHTML),$(this.box).find(".w2ui-sidebar-div").css("top",$(this.box).find(".w2ui-sidebar-top").height()+"px")),""!==this.bottomHTML&&($(this.box).find(".w2ui-sidebar-bottom").html(this.bottomHTML),$(this.box).find(".w2ui-sidebar-div").css("bottom",$(this.box).find(".w2ui-sidebar-bottom").height()+"px")),this.trigger($.extend(i,{phase:"after"})),this.refresh(),(new Date).getTime()-t):void 0},refresh:function(e){function t(e){var t="",i=e.img;null===i&&(i=this.img);var n=e.icon;null===n&&(n=this.icon);for(var r=e.parent,s=0;r&&null!==r.parent;)r.group&&s--,r=r.parent,s++;return"undefined"!=typeof e.caption&&(e.text=e.caption),e.group?t='<div class="w2ui-node-group"  id="node_'+e.id+'"        onclick="w2ui[\''+a.name+"'].toggle('"+e.id+"')\"        onmouseout=\"$(this).find('span:nth-child(1)').css('color', 'transparent')\"         onmouseover=\"$(this).find('span:nth-child(1)').css('color', 'inherit')\">"+(e.groupShowHide?"<span>"+w2utils.lang(!e.hidden&&e.expanded?"Hide":"Show")+"</span>":"<span></span>")+"    <span>"+e.text+'</span></div><div class="w2ui-node-sub" id="node_'+e.id+'_sub" style="'+e.style+";"+(!e.hidden&&e.expanded?"":"display: none;")+'"></div>':(e.selected&&!e.disabled&&(a.selected=e.id),r="",i&&(r='<div class="w2ui-node-image w2ui-icon '+i+(e.selected&&!e.disabled?" w2ui-icon-selected":"")+'"></div>'),n&&(r='<div class="w2ui-node-image"><span class="'+n+'"></span></div>'),t='<div class="w2ui-node '+(e.selected?"w2ui-selected":"")+" "+(e.disabled?"w2ui-disabled":"")+'" id="node_'+e.id+'" style="'+(e.hidden?"display: none;":"")+'"    ondblclick="w2ui[\''+a.name+"'].dblClick('"+e.id+"', event);\"    oncontextmenu=\"w2ui['"+a.name+"'].contextMenu('"+e.id+"', event);         if (event.preventDefault) event.preventDefault();\"    onClick=\"w2ui['"+a.name+"'].click('"+e.id+'\', event); "><table cellpadding="0" cellspacing="0" style="margin-left:'+18*s+"px; padding-right:"+18*s+'px"><tr><td class="w2ui-node-dots" nowrap onclick="w2ui[\''+a.name+"'].toggle('"+e.id+'\');         if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;">    <div class="w2ui-expand">'+(e.nodes.length>0?e.expanded?"-":"+":e.plus?"+":"")+'</div></td><td class="w2ui-node-data" nowrap>'+r+(e.count||0===e.count?'<div class="w2ui-node-count">'+e.count+"</div>":"")+'<div class="w2ui-node-caption">'+e.text+'</div></td></tr></table></div><div class="w2ui-node-sub" id="node_'+e.id+'_sub" style="'+e.style+";"+(!e.hidden&&e.expanded?"":"display: none;")+'"></div>'),t}var i=(new Date).getTime(),n=this.trigger({phase:"before",type:"refresh",target:"undefined"!=typeof e?e:this.name});if(n.isCancelled!==!0){""!==this.topHTML&&($(this.box).find(".w2ui-sidebar-top").html(this.topHTML),$(this.box).find(".w2ui-sidebar-div").css("top",$(this.box).find(".w2ui-sidebar-top").height()+"px")),""!==this.bottomHTML&&($(this.box).find(".w2ui-sidebar-bottom").html(this.bottomHTML),$(this.box).find(".w2ui-sidebar-div").css("bottom",$(this.box).find(".w2ui-sidebar-bottom").height()+"px")),$(this.box).find("> div").css({width:$(this.box).width()+"px",height:$(this.box).height()+"px"});var r,s,o,a=this;if("undefined"==typeof e)r=this,o=".w2ui-sidebar-div";else{if(r=this.get(e),null===r)return;o="#node_"+w2utils.escapeId(r.id)+"_sub"}var l;if(r!==this){var d="#node_"+w2utils.escapeId(r.id);l=t(r),$(this.box).find(d).before('<div id="sidebar_'+this.name+'_tmp"></div>'),$(this.box).find(d).remove(),$(this.box).find(o).remove(),$("#sidebar_"+this.name+"_tmp").before(l),$("#sidebar_"+this.name+"_tmp").remove()}$(this.box).find(o).html("");for(var u=0;u<r.nodes.length;u++)s=r.nodes[u],l=t(s),$(this.box).find(o).append(l),0!==s.nodes.length&&this.refresh(s.id);return this.trigger($.extend(n,{phase:"after"})),(new Date).getTime()-i}},resize:function(){var e=(new Date).getTime(),t=this.trigger({phase:"before",type:"resize",target:this.name});return t.isCancelled!==!0?($(this.box).css("overflow","hidden"),$(this.box).find("> div").css({width:$(this.box).width()+"px",height:$(this.box).height()+"px"}),this.trigger($.extend(t,{phase:"after"})),(new Date).getTime()-e):void 0},destroy:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});e.isCancelled!==!0&&($(this.box).find("> div > div.w2ui-sidebar-div").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-sidebar").html(""),delete w2ui[this.name],this.trigger($.extend(e,{phase:"after"})))},lock:function(){var e=$(this.box).find("> div:first-child"),t=Array.prototype.slice.call(arguments,0);t.unshift(e),w2utils.lock.apply(window,t)},unlock:function(){w2utils.unlock(this.box)}},$.extend(e.prototype,w2utils.event),w2obj.sidebar=e}(),function(e){var t=function(t){this.el=null,this.helpers={},this.type=t.type||"text",this.options=e.extend(!0,{},t),this.onSearch=t.onSearch||null,this.onRequest=t.onRequest||null,this.onLoad=t.onLoad||null,this.onError=t.onError||null,this.onClick=t.onClick||null,this.onAdd=t.onAdd||null,this.onNew=t.onNew||null,this.onRemove=t.onRemove||null,this.onMouseOver=t.onMouseOver||null,this.onMouseOut=t.onMouseOut||null,this.onIconClick=t.onIconClick||null,this.tmp={},delete this.options.type,delete this.options.onSearch,delete this.options.onRequest,delete this.options.onLoad,delete this.options.onError,delete this.options.onClick,delete this.options.onMouseOver,delete this.options.onMouseOut,delete this.options.onIconClick,e.extend(!0,this,w2obj.field)};e.fn.w2field=function(i,n){if(0!=this.length){if(0==arguments.length){var r=e(this).data("w2field");return r}return"string"==typeof i&&"object"==typeof n&&(i=e.extend(!0,{},n,{type:i})),"string"==typeof i&&"undefined"==typeof n&&(i={type:i}),i.type=String(i.type).toLowerCase(),this.each(function(n,r){var s=e(r).data("w2field");if("undefined"==typeof s){var s=new t(i);return e.extend(s,{handlers:[]}),r&&(s.el=e(r)[0]),s.init(),e(r).data("w2field",s),s}if(s.clear(),"clear"!=i.type){var s=new t(i);return e.extend(s,{handlers:[]}),r&&(s.el=e(r)[0]),s.init(),e(r).data("w2field",s),s}})}var s=t.prototype;return s[i]?s[i].apply(s,Array.prototype.slice.call(arguments,1)):void 0},t.prototype={custom:{},pallete:[["000000","444444","666666","999999","CCCCCC","EEEEEE","F3F3F3","FFFFFF"],["FF011B","FF9838","FFFD59","01FD55","00FFFE","0424F3","9B24F4","FF21F5"],["F4CCCC","FCE5CD","FFF2CC","D9EAD3","D0E0E3","CFE2F3","D9D1E9","EAD1DC"],["EA9899","F9CB9C","FEE599","B6D7A8","A2C4C9","9FC5E8","B4A7D6","D5A6BD"],["E06666","F6B26B","FED966","93C47D","76A5AF","6FA8DC","8E7CC3","C27BA0"],["CC0814","E69138","F1C232","6AA84F","45818E","3D85C6","674EA7","A54D79"],["99050C","B45F17","BF901F","37761D","124F5C","0A5394","351C75","741B47"],["660205","783F0B","7F6011","274E12","0C343D","063762","20124D","4C1030"]],addType:function(e,t){return e=String(e).toLowerCase(),this.custom[e]=t,!0},removeType:function(e){return e=String(e).toLowerCase(),!!this.custom[e]&&(delete this.custom[e],!0)},init:function(){var t,i=this,n=this.options;if("function"==typeof this.custom[this.type])return void this.custom[this.type].call(this,n);if(-1==["INPUT","TEXTAREA"].indexOf(this.el.tagName))return void console.log("ERROR: w2field could only be applied to INPUT or TEXTAREA.",this.el);switch(this.type){case"text":case"int":case"float":case"money":case"currency":case"percent":case"alphanumeric":case"hex":t={min:null,max:null,step:1,placeholder:"",autoFormat:!0,currencyPrefix:w2utils.settings.currencyPrefix,currencySuffix:w2utils.settings.currencySuffix,currencyPrecision:w2utils.settings.currencyPrecision,decimalSymbol:w2utils.settings.decimalSymbol,groupSymbol:w2utils.settings.groupSymbol,arrows:!1,keyboard:!0,precision:null,silent:!0,prefix:"",suffix:""},this.options=e.extend(!0,{},t,n),n=this.options,n.numberRE=new RegExp("["+n.groupSymbol+"]","g"),n.moneyRE=new RegExp("["+n.currencyPrefix+n.currencySuffix+n.groupSymbol+"]","g"),n.percentRE=new RegExp("["+n.groupSymbol+"%]","g"),-1!=["text","alphanumeric","hex"].indexOf(this.type)&&(n.arrows=!1,n.keyboard=!1),this.addPrefix(),this.addSuffix(),e(this.el).attr("placeholder")&&""==n.placeholder&&(n.placeholder=e(this.el).attr("placeholder")),e(this.el).attr("placeholder",n.placeholder);break;case"color":t={prefix:"#",suffix:'<div style="width: '+(parseInt(e(this.el).css("font-size"))||12)+'px">&nbsp;</div>',placeholder:"",arrows:!1,keyboard:!1},e.extend(n,t),this.addPrefix(),this.addSuffix(),e(this.el).attr("maxlength",6),""!=e(this.el).val()&&setTimeout(function(){e(i.el).change()},1),e(this.el).attr("placeholder")&&""==n.placeholder&&(n.placeholder=e(this.el).attr("placeholder")),e(this.el).attr("placeholder",n.placeholder);break;case"date":t={format:w2utils.settings.date_format,placeholder:"",keyboard:!0,silent:!0,start:"",end:"",blocked:{},colored:{}},this.options=e.extend(!0,{},t,n),n=this.options,e(this.el).attr("placeholder")&&""==n.placeholder&&(n.placeholder=e(this.el).attr("placeholder")),e(this.el).attr("placeholder",n.placeholder?n.placeholder:n.format);break;case"time":t={format:w2utils.settings.time_format,placeholder:"",keyboard:!0,silent:!0,start:"",end:""},this.options=e.extend(!0,{},t,n),n=this.options,e(this.el).attr("placeholder")&&""==n.placeholder&&(n.placeholder=e(this.el).attr("placeholder")),e(this.el).attr("placeholder",n.placeholder?n.placeholder:"h12"==n.format?"hh:mi pm":"hh:mi");break;case"datetime":break;case"list":case"combo":if(t={items:[],selected:{},placeholder:"",url:null,postData:{},minLength:1,cacheMax:250,maxDropHeight:350,match:"begins",silent:!0,icon:null,iconStyle:"",onSearch:null,onRequest:null,onLoad:null,onError:null,onIconClick:null,renderDrop:null,prefix:"",suffix:"",openOnFocus:!1,markSearch:!1},n.items=this.normMenu(n.items),"list"==this.type&&(t.openOnFocus=!0,t.suffix='<div class="arrow-down" style="margin-top: '+(parseInt(e(this.el).height())-6)/2+'px;"></div>',e(this.el).addClass("w2ui-select"),!e.isPlainObject(n.selected)))for(var r in n.items){var s=n.items[r];if(s&&s.id==n.selected){n.selected=e.extend(!0,{},s);break}}n=e.extend({},t,n,{align:"both",altRows:!0}),this.options=n,e.isPlainObject(n.selected)||(n.selected={}),e(this.el).data("selected",n.selected),n.url&&this.request(0),"list"==this.type&&this.addFocus(),this.addPrefix(),this.addSuffix(),setTimeout(function(){i.refresh()},10),e(this.el).attr("placeholder")&&""==n.placeholder&&(n.placeholder=e(this.el).attr("placeholder")),e(this.el).attr("placeholder",n.placeholder).attr("autocomplete","off"),"undefined"!=typeof n.selected.text&&e(this.el).val(n.selected.text);break;case"enum":t={items:[],selected:[],placeholder:"",max:0,url:null,postData:{},minLength:1,cacheMax:250,maxWidth:250,maxHeight:350,maxDropHeight:350,match:"contains",silent:!0,openOnFocus:!1,markSearch:!0,renderDrop:null,renderItem:null,style:"",onSearch:null,onRequest:null,onLoad:null,onError:null,onClick:null,onAdd:null,onNew:null,onRemove:null,onMouseOver:null,onMouseOut:null},n=e.extend({},t,n,{align:"both",suffix:"",altRows:!0}),n.items=this.normMenu(n.items),n.selected=this.normMenu(n.selected),this.options=n,e.isArray(n.selected)||(n.selected=[]),e(this.el).data("selected",n.selected),n.url&&this.request(0),this.addSuffix(),this.addMulti();break;case"file":t={selected:[],placeholder:w2utils.lang("Attach files by dragging and dropping or Click to Select"),max:0,maxSize:0,maxFileSize:0,maxWidth:250,maxHeight:350,maxDropHeight:350,silent:!0,renderItem:null,style:"",onClick:null,onAdd:null,onRemove:null,onMouseOver:null,onMouseOut:null},n=e.extend({},t,n,{align:"both",altRows:!0}),this.options=n,e.isArray(n.selected)||(n.selected=[]),
e(this.el).data("selected",n.selected),e(this.el).attr("placeholder")&&(n.placeholder=e(this.el).attr("placeholder")),this.addMulti()}this.tmp={onChange:function(e){i.change.call(i,e)},onClick:function(e){i.click.call(i,e)},onFocus:function(e){i.focus.call(i,e)},onBlur:function(e){i.blur.call(i,e)},onKeydown:function(e){i.keyDown.call(i,e)},onKeyup:function(e){i.keyUp.call(i,e)},onKeypress:function(e){i.keyPress.call(i,e)}},e(this.el).addClass("w2field").data("w2field",this).on("change",this.tmp.onChange).on("click",this.tmp.onClick).on("focus",this.tmp.onFocus).on("blur",this.tmp.onBlur).on("keydown",this.tmp.onKeydown).on("keyup",this.tmp.onKeyup).on("keypress",this.tmp.onKeypress).css({"box-sizing":"border-box","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","-ms-box-sizing":"border-box","-o-box-sizing":"border-box"}),this.change(e.Event("change"))},clear:function(){var t=this.options;-1!=["money","currency"].indexOf(this.type)&&e(this.el).val(e(this.el).val().replace(t.moneyRE,"")),"percent"==this.type&&e(this.el).val(e(this.el).val().replace(/%/g,"")),"color"==this.type&&e(this.el).removeAttr("maxlength"),"list"==this.type&&e(this.el).removeClass("w2ui-select"),-1!=["date","time"].indexOf(this.type)&&e(this.el).attr("placeholder")==t.format&&e(this.el).attr("placeholder",""),this.type="clear";var i=e(this.el).data("tmp");if(this.tmp){"undefined"!=typeof i&&(i&&i["old-padding-left"]&&e(this.el).css("padding-left",i["old-padding-left"]),i&&i["old-padding-right"]&&e(this.el).css("padding-right",i["old-padding-right"])),e(this.el).val(this.clean(e(this.el).val())).removeClass("w2field").removeData().off("change",this.tmp.onChange).off("click",this.tmp.onClick).off("focus",this.tmp.onFocus).off("blur",this.tmp.onBlur).off("keydown",this.tmp.onKeydown).off("keyup",this.tmp.onKeyup).off("keypress",this.tmp.onKeypress);for(var n in this.helpers)e(this.helpers[n]).remove();this.helpers={}}},refresh:function(){var t=this,i=this.options,n=e(this.el).data("selected"),r=(new Date).getTime();if(-1!=["list"].indexOf(this.type)&&(e(t.el).parent().css("white-space","nowrap"),t.helpers.prefix&&t.helpers.prefix.hide(),setTimeout(function(){if(t.helpers.focus){!e.isEmptyObject(n)&&i.icon?(i.prefix='<span class="w2ui-icon '+i.icon+'"style="cursor: pointer; font-size: 14px; display: inline-block; margin-top: -1px; color: #7F98AD;'+i.iconStyle+'"></span>',t.addPrefix()):(i.prefix="",t.addPrefix());var r=t.helpers.focus.find("input");""==e(r).val()?(e(r).css("opacity",0).prev().css("opacity",0),e(t.el).val(n&&null!=n.text?n.text:""),e(t.el).attr("placeholder",i.placeholder||"")):(e(r).css("opacity",1).prev().css("opacity",1),e(t.el).val(""),e(t.el).removeAttr("placeholder"),setTimeout(function(){t.helpers.prefix&&t.helpers.prefix.hide();var n="position: absolute; opacity: 0; margin: 4px 0px 0px 2px; background-position: left !important;";i.icon?(e(r).css("margin-left","17px"),e(t.helpers.focus).find(".icon-search").attr("style",n+"width: 11px !important; display: block; opacity: 1")):(e(r).css("margin-left","0px"),e(t.helpers.focus).find(".icon-search").attr("style",n+"width: 0px !important; display: none; opacity: 0"))},1)),e(t.el).prop("readonly")||e(t.el).prop("disabled")?setTimeout(function(){e(t.helpers.prefix).css("opacity","0.6"),e(t.helpers.suffix).css("opacity","0.6")},1):setTimeout(function(){e(t.helpers.prefix).css("opacity","1"),e(t.helpers.suffix).css("opacity","1")},1)}},1)),-1!=["enum","file"].indexOf(this.type)){var s="";for(var o in n){var a=n[o],l="";l="function"==typeof i.renderItem?i.renderItem(a,o,'<div class="w2ui-list-remove" title="'+w2utils.lang("Remove")+'" index="'+o+'">&nbsp;&nbsp;</div>'):'<div class="w2ui-list-remove" title="'+w2utils.lang("Remove")+'" index="'+o+'">&nbsp;&nbsp;</div>'+("enum"==t.type?a.text:a.name+'<span class="file-size"> - '+w2utils.size(a.size)+"</span>"),s+='<li index="'+o+'" style="max-width: '+parseInt(i.maxWidth)+"px; "+(a.style?a.style:"")+'">'+l+"</li>"}var d=t.helpers.multi,u=d.find("ul");if(d.attr("style",d.attr("style")+";"+i.style),e(t.el).prop("readonly")||e(t.el).prop("disabled")?(d.addClass("w2ui-readonly"),d.css("pointer-events","none").find("li").css("opacity","0.6"),e(t.helpers.multi).find("input").prop("readonly",!0)):(d.removeClass("w2ui-readonly"),d.css("pointer-events","auto").find("li").css("opacity","1"),e(t.helpers.multi).find("input").prop("readonly",!1)),d.find(".w2ui-enum-placeholder").remove(),u.find("li").not("li.nomouse").remove(),""!=s)u.prepend(s);else if("undefined"!=typeof i.placeholder){var c="padding-top: "+e(this.el).css("padding-top")+";padding-left: "+e(this.el).css("padding-left")+"; box-sizing: "+e(this.el).css("box-sizing")+"; line-height: "+e(this.el).css("line-height")+"; font-size: "+e(this.el).css("font-size")+"; font-family: "+e(this.el).css("font-family")+"; ";d.prepend('<div class="w2ui-enum-placeholder" style="'+c+'">'+i.placeholder+"</div>")}d.find("li").data("mouse","out").on("click",function(i){var r=n[e(i.target).attr("index")];if(!e(i.target).hasClass("nomouse")){i.stopPropagation();var s=t.trigger({phase:"before",type:"click",target:t.el,originalEvent:i.originalEvent,item:r});if(s.isCancelled!==!0){if(e(i.target).hasClass("w2ui-list-remove")){if(e(t.el).attr("readonly")||e(t.el).attr("disabled"))return;var s=t.trigger({phase:"before",type:"remove",target:t.el,originalEvent:i.originalEvent,item:r});if(s.isCancelled===!0)return;e().w2overlay(),n.splice(e(i.target).attr("index"),1),e(t.el).trigger("change"),e(i.target).parent().fadeOut("fast"),setTimeout(function(){t.refresh(),t.trigger(e.extend(s,{phase:"after"}))},300)}if("file"==t.type&&!e(i.target).hasClass("w2ui-list-remove")){var o="";/image/i.test(r.type)&&(o='<div style="padding: 3px;">    <img src="'+(r.content?"data:"+r.type+";base64,"+r.content:"")+'" style="max-width: 300px;"         onload="var w = $(this).width(); var h = $(this).height();             if (w < 300 & h < 300) return;             if (w >= h && w > 300) $(this).width(300);            if (w < h && h > 300) $(this).height(300);"        onerror="this.style.display = \'none\'"    ></div>');var a='style="padding: 3px; text-align: right; color: #777;"',l='style="padding: 3px"';o+='<div style="padding: 8px;">    <table cellpadding="2">    <tr><td '+a+">"+w2utils.lang("Name")+":</td><td "+l+">"+r.name+"</td></tr>    <tr><td "+a+">"+w2utils.lang("Size")+":</td><td "+l+">"+w2utils.size(r.size)+"</td></tr>    <tr><td "+a+">"+w2utils.lang("Type")+":</td><td "+l+'>        <span style="width: 200px; display: block-inline; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">'+r.type+"</span>    </td></tr>    <tr><td "+a+">"+w2utils.lang("Modified")+":</td><td "+l+">"+w2utils.date(r.modified)+"</td></tr>    </table></div>",e(i.target).w2overlay(o)}t.trigger(e.extend(s,{phase:"after"}))}}}).on("mouseover",function(i){var r=i.target;if("LI"!=r.tagName&&(r=r.parentNode),!e(r).hasClass("nomouse")){if("out"==e(r).data("mouse")){var s=n[e(r).attr("index")],o=t.trigger({phase:"before",type:"mouseOver",target:t.el,originalEvent:i.originalEvent,item:s});if(o.isCancelled===!0)return;t.trigger(e.extend(o,{phase:"after"}))}e(r).data("mouse","over")}}).on("mouseout",function(i){var r=i.target;"LI"!=r.tagName&&(r=r.parentNode),e(r).hasClass("nomouse")||(e(r).data("mouse","leaving"),setTimeout(function(){if("leaving"==e(r).data("mouse")){e(r).data("mouse","out");var s=n[e(r).attr("index")],o=t.trigger({phase:"before",type:"f",target:t.el,originalEvent:i.originalEvent,item:s});if(o.isCancelled===!0)return;t.trigger(e.extend(o,{phase:"after"}))}},0))}),e(this.el).height("auto");var h=e(d).find("> div").height()+2*w2utils.getSize(d,"+height");26>h&&(h=26),h>i.maxHeight&&(h=i.maxHeight),d.length>0&&(d[0].scrollTop=1e3);var p=w2utils.getSize(e(this.el),"height")-2;p>h&&(h=p),e(d).css({height:h+"px",overflow:h==i.maxHeight?"auto":"hidden"}),h<i.maxHeight&&e(d).prop("scrollTop",0),e(this.el).css({height:h+2+"px"})}return(new Date).getTime()-r},reset:function(){var e=this.type;this.clear(),this.type=e,this.init()},clean:function(t){var i=this.options;return t=String(t).trim(),-1!=["int","float","money","currency","percent"].indexOf(this.type)&&("string"==typeof t&&(t=t.replace(i.decimalSymbol,".")),i.autoFormat&&-1!=["money","currency"].indexOf(this.type)&&(t=String(t).replace(i.moneyRE,"")),i.autoFormat&&"percent"==this.type&&(t=String(t).replace(i.percentRE,"")),i.autoFormat&&-1!=["int","float"].indexOf(this.type)&&(t=String(t).replace(i.numberRE,"")),parseFloat(t)==t&&(null!==i.min&&t<i.min&&(t=i.min,e(this.el).val(i.min)),null!==i.max&&t>i.max&&(t=i.max,e(this.el).val(i.max))),t=""!==t&&w2utils.isFloat(t)?Number(t):""),t},format:function(e){var t=this.options;if(t.autoFormat&&""!=e)switch(this.type){case"money":case"currency":e=w2utils.formatNumber(Number(e).toFixed(t.currencyPrecision),t.groupSymbol),""!=e&&(e=t.currencyPrefix+e+t.currencySuffix);break;case"percent":e=w2utils.formatNumber(t.precision?Number(e).toFixed(t.precision):e,t.groupSymbol),""!=e&&(e+="%");break;case"float":e=w2utils.formatNumber(t.precision?Number(e).toFixed(t.precision):e,t.groupSymbol);break;case"int":e=w2utils.formatNumber(e,t.groupSymbol)}return e},change:function(t){var i=this,n=i.options;if(-1!=["int","float","money","currency","percent"].indexOf(this.type)){var r=e(this.el).val(),s=this.format(this.clean(e(this.el).val()));if(""!=r&&r!=s)return e(this.el).val(s).change(),t.stopPropagation(),t.preventDefault(),!1}if("color"==this.type){var o="#"+e(this.el).val();6!=e(this.el).val().length&&3!=e(this.el).val().length&&(o=""),e(this.el).next().find("div").css("background-color",o),e(i.el).is(":focus")&&this.updateOverlay()}if(-1!=["list","enum","file"].indexOf(this.type)&&(i.refresh(),setTimeout(function(){i.refresh()},5)),-1!=["date","time"].indexOf(this.type)){var a=parseInt(i.el.value);w2utils.isInt(i.el.value)&&a>3e3&&("time"==this.type&&e(i.el).val(w2utils.formatTime(new Date(a),n.format)).change(),"date"==this.type&&e(i.el).val(w2utils.formatDate(new Date(a),n.format)).change())}},click:function(t){t.stopPropagation(),-1!=["list","combo","enum"].indexOf(this.type)&&(e(this.el).is(":focus")||this.focus(t)),-1!=["date","time","color"].indexOf(this.type)&&this.updateOverlay()},focus:function(){var t=this;if(this.options,-1!==["color","date","time"].indexOf(t.type)){if(e(t.el).attr("readonly")||e(t.el).attr("disabled"))return;e("#w2ui-overlay").length>0&&e("#w2ui-overlay")[0].hide(),setTimeout(function(){t.updateOverlay()},150)}if(-1!=["list","combo","enum"].indexOf(t.type)){if(e(t.el).attr("readonly")||e(t.el).attr("disabled"))return;e("#w2ui-overlay").length>0&&e("#w2ui-overlay")[0].hide(),setTimeout(function(){return"list"==t.type&&e(t.el).is(":focus")?void e(t.helpers.focus).find("input").focus():(t.search(),void setTimeout(function(){t.updateOverlay()},1))},1)}"file"==t.type&&e(t.helpers.multi).css({outline:"auto 5px #7DB4F3","outline-offset":"-2px"})},blur:function(){var t=this,i=t.options,n=e(t.el).val().trim();-1!=["color","date","time","list","combo","enum"].indexOf(t.type)&&e("#w2ui-overlay").length>0&&e("#w2ui-overlay")[0].hide(),-1!=["int","float","money","currency","percent"].indexOf(t.type)&&(""===n||t.checkType(n)||(e(t.el).val("").change(),i.silent===!1&&(e(t.el).w2tag("Not a valid number"),setTimeout(function(){e(t.el).w2tag("")},3e3)))),-1!=["date","time"].indexOf(t.type)&&(""===n||t.inRange(t.el.value)?("date"!=t.type||""===n||w2utils.isDate(t.el.value,i.format)||(e(t.el).val("").removeData("selected").change(),i.silent===!1&&(e(t.el).w2tag("Not a valid date"),setTimeout(function(){e(t.el).w2tag("")},3e3))),"time"!=t.type||""===n||w2utils.isTime(t.el.value)||(e(t.el).val("").removeData("selected").change(),i.silent===!1&&(e(t.el).w2tag("Not a valid time"),setTimeout(function(){e(t.el).w2tag("")},3e3)))):(e(t.el).val("").removeData("selected").change(),i.silent===!1&&(e(t.el).w2tag("Not in range"),setTimeout(function(){e(t.el).w2tag("")},3e3)))),"enum"==t.type&&e(t.helpers.multi).find("input").val("").width(20),"file"==t.type&&e(t.helpers.multi).css({outline:"none"})},keyPress:function(e){var t=this;if(t.options,-1!=["int","float","money","currency","percent","hex","color","alphanumeric"].indexOf(t.type)){if(e.metaKey||e.ctrlKey||e.altKey||e.charCode!=e.keyCode&&e.keyCode>0)return;var i=String.fromCharCode(e.charCode);if(!t.checkType(i,!0)&&13!=e.keyCode)return e.preventDefault(),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1}-1!=["date","time"].indexOf(t.type)&&setTimeout(function(){t.updateOverlay()},1)},keyDown:function(t,i){var n=this,r=n.options,s=t.keyCode||i&&i.keyCode;if(-1!=["int","float","money","currency","percent"].indexOf(n.type)){if(!r.keyboard||e(n.el).attr("readonly"))return;var o=!1,a=parseFloat(e(n.el).val().replace(r.moneyRE,""))||0,l=r.step;switch((t.ctrlKey||t.metaKey)&&(l=10),s){case 38:if(t.shiftKey)break;e(n.el).val(a+l<=r.max||null===r.max?Number((a+l).toFixed(12)):r.max).change(),o=!0;break;case 40:if(t.shiftKey)break;e(n.el).val(a-l>=r.min||null===r.min?Number((a-l).toFixed(12)):r.min).change(),o=!0}o&&(t.preventDefault(),setTimeout(function(){n.el.setSelectionRange(n.el.value.length,n.el.value.length)},0))}if("date"==n.type){if(!r.keyboard||e(n.el).attr("readonly"))return;var o=!1,d=864e5,l=1;(t.ctrlKey||t.metaKey)&&(l=10);var u=w2utils.isDate(e(n.el).val(),r.format,!0);switch(u||(u=new Date,d=0),s){case 38:if(t.shiftKey)break;var c=w2utils.formatDate(u.getTime()+d,r.format);10==l&&(c=w2utils.formatDate(new Date(u.getFullYear(),u.getMonth()+1,u.getDate()),r.format)),e(n.el).val(c).change(),o=!0;break;case 40:if(t.shiftKey)break;var c=w2utils.formatDate(u.getTime()-d,r.format);10==l&&(c=w2utils.formatDate(new Date(u.getFullYear(),u.getMonth()-1,u.getDate()),r.format)),e(n.el).val(c).change(),o=!0}o&&(t.preventDefault(),setTimeout(function(){n.el.setSelectionRange(n.el.value.length,n.el.value.length),n.updateOverlay()},0))}if("time"==n.type){if(!r.keyboard||e(n.el).attr("readonly"))return;var o=!1,l=t.ctrlKey||t.metaKey?60:1,a=e(n.el).val(),h=n.toMin(a)||n.toMin((new Date).getHours()+":"+((new Date).getMinutes()-1));switch(s){case 38:if(t.shiftKey)break;h+=l,o=!0;break;case 40:if(t.shiftKey)break;h-=l,o=!0}o&&(e(n.el).val(n.fromMin(h)).change(),t.preventDefault(),setTimeout(function(){n.el.setSelectionRange(n.el.value.length,n.el.value.length)},0))}if("color"==n.type){if(e(n.el).attr("readonly"))return;if(86==t.keyCode&&(t.ctrlKey||t.metaKey)&&(e(n.el).prop("maxlength",7),setTimeout(function(){var t=e(n).val();"#"==t.substr(0,1)&&(t=t.substr(1)),w2utils.isHex(t)||(t=""),e(n).val(t).prop("maxlength",6).change()},20)),(t.ctrlKey||t.metaKey)&&!t.shiftKey){if("undefined"==typeof n.tmp.cind1)n.tmp.cind1=-1,n.tmp.cind2=-1;else{switch(s){case 38:n.tmp.cind1--;break;case 40:n.tmp.cind1++;break;case 39:n.tmp.cind2++;break;case 37:n.tmp.cind2--}n.tmp.cind1<0&&(n.tmp.cind1=0),n.tmp.cind1>this.pallete.length-1&&(n.tmp.cind1=this.pallete.length-1),n.tmp.cind2<0&&(n.tmp.cind2=0),n.tmp.cind2>this.pallete[0].length-1&&(n.tmp.cind2=this.pallete[0].length-1)}-1!=[37,38,39,40].indexOf(s)&&(e(n.el).val(this.pallete[n.tmp.cind1][n.tmp.cind2]).change(),t.preventDefault())}}if(-1!=["list","combo","enum"].indexOf(n.type)){if(e(n.el).attr("readonly"))return;var o=!1,p=e(n.el).data("selected"),f=e(n.helpers.focus).find("input");switch("list"==n.type&&-1==[37,38,39,40].indexOf(s)&&n.refresh(),s){case 27:"list"==n.type&&(""!=e(f).val()&&e(f).val(""),t.stopPropagation());break;case 37:case 39:break;case 13:if(0==e("#w2ui-overlay").length)break;var g=r.items[r.index],m=e(n.helpers.multi).find("input");if("enum"==n.type)if(null!=g){var v=n.trigger({phase:"before",type:"add",target:n.el,originalEvent:t.originalEvent,item:g});if(v.isCancelled===!0)return;g=v.item,p.length>=r.max&&r.max>0&&p.pop(),delete g.hidden,delete n.tmp.force_open,p.push(g),e(n.el).change(),m.val("").width(20),n.refresh(),n.trigger(e.extend(v,{phase:"after"}))}else{g={id:m.val(),text:m.val()};var v=n.trigger({phase:"before",type:"new",target:n.el,originalEvent:t.originalEvent,item:g});if(v.isCancelled===!0)return;g=v.item,"function"==typeof n.onNew&&(p.length>=r.max&&r.max>0&&p.pop(),delete n.tmp.force_open,p.push(g),e(n.el).change(),m.val("").width(20),n.refresh()),n.trigger(e.extend(v,{phase:"after"}))}else g&&e(n.el).data("selected",g).val(g.text).change(),""==e(n.el).val()&&e(n.el).data("selected")&&e(n.el).removeData("selected").val("").change(),"list"==n.type&&(f.val(""),n.refresh()),n.tmp.force_hide=!0;break;case 8:case 46:if("enum"==n.type&&8==s&&""==e(n.helpers.multi).find("input").val()&&p.length>0){var g=p[p.length-1],v=n.trigger({phase:"before",type:"remove",target:n.el,originalEvent:t.originalEvent,item:g});if(v.isCancelled===!0)return;p.pop(),e(n.el).trigger("change"),n.refresh(),n.trigger(e.extend(v,{phase:"after"}))}"list"==n.type&&""==e(f).val()&&(e(n.el).data("selected",{}).change(),n.refresh());break;case 38:for(r.index=w2utils.isInt(r.index)?parseInt(r.index):0,r.index--;r.index>0&&r.items[r.index].hidden;)r.index--;if(0==r.index&&r.items[r.index].hidden)for(;r.items[r.index]&&r.items[r.index].hidden;)r.index++;o=!0;break;case 40:for(r.index=w2utils.isInt(r.index)?parseInt(r.index):-1,r.index++;r.index<r.items.length-1&&r.items[r.index].hidden;)r.index++;if(r.index==r.items.length-1&&r.items[r.index].hidden)for(;r.items[r.index]&&r.items[r.index].hidden;)r.index--;var y=n.el;-1!=["enum"].indexOf(n.type)&&(y=n.helpers.multi.find("input")),""==e(y).val()&&0==e("#w2ui-overlay").length?n.tmp.force_open=!0:o=!0}if(o)return r.index<0&&(r.index=0),r.index>=r.items.length&&(r.index=r.items.length-1),n.updateOverlay(),t.preventDefault(),void setTimeout(function(){if("enum"==n.type){var e=n.helpers.multi.find("input").get(0);e.setSelectionRange(e.value.length,e.value.length)}else if("list"==n.type){var e=n.helpers.focus.find("input").get(0);e.setSelectionRange(e.value.length,e.value.length)}else n.el.setSelectionRange(n.el.value.length,n.el.value.length)},0);if("enum"==n.type){var y=n.helpers.multi.find("input"),w=y.val();y.width(8*(w.length+2)+"px")}}},keyUp:function(t){if("color"==this.type&&86==t.keyCode&&(t.ctrlKey||t.metaKey)&&e(this).prop("maxlength",6),-1!=["list","combo","enum"].indexOf(this.type)&&-1==[16,17,18,20,37,39,91].indexOf(t.keyCode)){this.tmp.force_hide||this.request();var i=e(this.helpers.focus).find("input");1==i.val().length&&this.refresh(),this.search()}},clearCache:function(){var e=this.options;e.items=[],this.tmp.xhr_loading=!1,this.tmp.xhr_search="",this.tmp.xhr_total=-1,this.search()},request:function(t){var i=this,n=this.options,r=e(i.el).val()||"";if(n.url){if("enum"==i.type){var s=e(i.helpers.multi).find("input");r=0==s.length?"":s.val()}if("list"==i.type){var s=e(i.helpers.focus).find("input");r=0==s.length?"":s.val()}if(0!=n.minLength&&r.length<n.minLength)return n.items=[],void this.updateOverlay();"undefined"==typeof t&&(t=350),"undefined"==typeof i.tmp.xhr_search&&(i.tmp.xhr_search=""),"undefined"==typeof i.tmp.xhr_total&&(i.tmp.xhr_total=-1),n.url&&1!=e(i.el).prop("readonly")&&(0===n.items.length&&0!==i.tmp.xhr_total||i.tmp.xhr_total==n.cacheMax&&r.length>i.tmp.xhr_search.length||r.length>=i.tmp.xhr_search.length&&r.substr(0,i.tmp.xhr_search.length)!=i.tmp.xhr_search||r.length<i.tmp.xhr_search.length)&&(i.tmp.xhr_loading=!0,i.search(),clearTimeout(i.tmp.timeout),i.tmp.timeout=setTimeout(function(){var t=n.url,s={search:r,max:n.cacheMax};e.extend(s,n.postData);var o=i.trigger({phase:"before",type:"request",target:i.el,url:t,postData:s});if(o.isCancelled!==!0){t=o.url,s=o.postData,i.tmp.xhr&&i.tmp.xhr.abort();var a={type:"GET",url:t,data:s,dataType:"JSON"};"JSON"==w2utils.settings.dataType&&(a.type="POST",a.data=JSON.stringify(a.data),a.contentType="application/json"),i.tmp.xhr=e.ajax(a).done(function(t,o,a){var l=i.trigger({phase:"before",type:"load",target:i.el,search:s.search,data:t,xhr:a});if(l.isCancelled!==!0){if(t=l.data,"string"==typeof t&&(t=JSON.parse(t)),"success"!=t.status)return void console.log("ERROR: server did not return proper structure. It should return",{status:"success",items:[{id:1,text:"item"}]});t.items.length>n.cacheMax&&t.items.splice(n.cacheMax,1e5),i.tmp.xhr_loading=!1,i.tmp.xhr_search=r,i.tmp.xhr_total=t.items.length,n.items=i.normMenu(t.items),i.tmp.emptySet=""==r&&0==t.items.length,i.search(),i.trigger(e.extend(l,{phase:"after"}))}}).fail(function(t,n,s){var o={status:n,error:s,rawResponseText:t.responseText},a=i.trigger({phase:"before",type:"error",target:i.el,search:r,error:o,xhr:t});if(a.isCancelled!==!0){if("abort"!=n){var l;try{l=e.parseJSON(t.responseText)}catch(e){}console.log("ERROR: Server communication failed.","\n   EXPECTED:",{status:"success",items:[{id:1,text:"item"}]},"\n         OR:",{status:"error",message:"error message"},"\n   RECEIVED:","object"==typeof l?l:t.responseText)}i.clearCache(),i.trigger(e.extend(a,{phase:"after"}))}}),i.trigger(e.extend(o,{phase:"after"}))}},t))}},search:function(){var t=this,i=this.options,n=e(t.el).val(),r=t.el,s=[],o=e(t.el).data("selected");if("enum"==t.type){r=e(t.helpers.multi).find("input"),n=r.val();for(var a in o)o[a]&&s.push(o[a].id)}if("list"==t.type){r=e(t.helpers.focus).find("input"),n=r.val();for(var a in o)o[a]&&s.push(o[a].id)}var l=t.trigger({phase:"before",type:"search",target:r,search:n});if(l.isCancelled!==!0){if(t.tmp.xhr_loading!==!0){var d=0;for(var u in i.items){var c=i.items[u],h="",p="";-1!=["is","begins"].indexOf(i.match)&&(h="^"),-1!=["is","ends"].indexOf(i.match)&&(p="$");try{var f=new RegExp(h+n+p,"i");c.hidden=!f.test(c.text)&&"..."!=c.text}catch(e){}"enum"==t.type&&-1!=e.inArray(c.id,s)&&(c.hidden=!0),c.hidden!==!0&&d++}if("combo"!=t.type)for(i.index=0;i.items[i.index]&&i.items[i.index].hidden;)i.index++;else i.index=-1;0>=d&&(i.index=-1),i.spinner=!1,t.updateOverlay(),setTimeout(function(){var t=e("#w2ui-overlay").html()||"";i.markSearch&&-1!=t.indexOf("$.fn.w2menuHandler")&&e("#w2ui-overlay").w2marker(n)},1)}else i.items.splice(0,i.cacheMax),i.spinner=!0,t.updateOverlay();t.trigger(e.extend(l,{phase:"after"}))}},updateOverlay:function(){var t=this,i=this.options;if("color"==this.type){if(e(t.el).attr("readonly"))return;0==e("#w2ui-overlay").length?e(t.el).w2overlay(t.getColorHTML()):e("#w2ui-overlay").html(t.getColorHTML()),e("#w2ui-overlay .color").on("mousedown",function(i){var n=e(i.originalEvent.target).attr("name"),r=e(i.originalEvent.target).attr("index").split(":");t.tmp.cind1=r[0],t.tmp.cind2=r[1],e(t.el).val(n).change(),e(this).html("&#149;")}).on("mouseup",function(){setTimeout(function(){e("#w2ui-overlay").length>0&&e("#w2ui-overlay").removeData("keepOpen")[0].hide()},10)})}if("date"==this.type){if(e(t.el).attr("readonly"))return;0==e("#w2ui-overlay").length&&e(t.el).w2overlay('<div class="w2ui-reset w2ui-calendar" onclick="event.stopPropagation();"></div>',{css:{"background-color":"#f5f5f5"}});var n,r,s=w2utils.isDate(e(t.el).val(),t.options.format,!0);s&&(n=s.getMonth()+1,r=s.getFullYear()),function i(n,r){e("#w2ui-overlay > div > div").html(t.getMonthHTML(n,r)),e("#w2ui-overlay .w2ui-calendar-title").on("mousedown",function(){if(e(this).next().hasClass("w2ui-calendar-jump"))e(this).next().remove();else{var n,r;e(this).after('<div class="w2ui-calendar-jump" style=""></div>'),e(this).next().hide().html(t.getYearHTML()).fadeIn(200),setTimeout(function(){e("#w2ui-overlay .w2ui-calendar-jump").find(".w2ui-jump-month, .w2ui-jump-year").on("click",function(){e(this).hasClass("w2ui-jump-month")&&(e(this).parent().find(".w2ui-jump-month").removeClass("selected"),e(this).addClass("selected"),r=e(this).attr("name")),e(this).hasClass("w2ui-jump-year")&&(e(this).parent().find(".w2ui-jump-year").removeClass("selected"),e(this).addClass("selected"),n=e(this).attr("name")),null!=n&&null!=r&&(e("#w2ui-overlay .w2ui-calendar-jump").fadeOut(100),setTimeout(function(){i(parseInt(r)+1,n)},100))}),e("#w2ui-overlay .w2ui-calendar-jump >:last-child").prop("scrollTop",2e3)},1)}}),e("#w2ui-overlay .w2ui-date").on("mousedown",function(){var i=e(this).attr("date");e(t.el).val(i).change(),e(this).css({"background-color":"#B6D5FB","border-color":"#aaa"})}).on("mouseup",function(){setTimeout(function(){e("#w2ui-overlay").length>0&&e("#w2ui-overlay").removeData("keepOpen")[0].hide()},10)}),e("#w2ui-overlay .previous").on("mousedown",function(){var e=t.options.current.split("/");e[0]=parseInt(e[0])-1,i(e[0],e[1])}),e("#w2ui-overlay .next").on("mousedown",function(){var e=t.options.current.split("/");e[0]=parseInt(e[0])+1,i(e[0],e[1])})}(n,r)}if("time"==this.type){if(e(t.el).attr("readonly"))return;0==e("#w2ui-overlay").length&&e(t.el).w2overlay('<div class="w2ui-reset w2ui-calendar-time" onclick="event.stopPropagation();"></div>',{css:{"background-color":"#fff"}});var o="h24"==this.options.format;e("#w2ui-overlay > div").html(t.getHourHTML()),e("#w2ui-overlay .w2ui-time").on("mousedown",function(){e(this).css({"background-color":"#B6D5FB","border-color":"#aaa"});var i=e(this).attr("hour");e(t.el).val((i>12&&!o?i-12:i)+":00"+(o?"":12>i?" am":" pm")).change()}).on("mouseup",function(){var i=e(this).attr("hour");e("#w2ui-overlay").length>0&&e("#w2ui-overlay")[0].hide(),e(t.el).w2overlay('<div class="w2ui-reset w2ui-calendar-time"></div>',{css:{"background-color":"#fff"}}),e("#w2ui-overlay > div").html(t.getMinHTML(i)),e("#w2ui-overlay .w2ui-time").on("mousedown",function(){e(this).css({"background-color":"#B6D5FB","border-color":"#aaa"});var n=e(this).attr("min");e(t.el).val((i>12&&!o?i-12:i)+":"+(10>n?0:"")+n+(o?"":12>i?" am":" pm")).change()}).on("mouseup",function(){setTimeout(function(){e("#w2ui-overlay").length>0&&e("#w2ui-overlay").removeData("keepOpen")[0].hide()},10)})})}if(-1!=["list","combo","enum"].indexOf(this.type)){var a=this.el,l=this.el;if("enum"==this.type&&(a=e(this.helpers.multi),l=e(a).find("input")),"list"==this.type&&(l=e(this.helpers.focus).find("input")),e(l).is(":focus")){if(i.openOnFocus===!1&&""==e(l).val()&&t.tmp.force_open!==!0)return void e().w2overlay();if(t.tmp.force_hide)return e().w2overlay(),void setTimeout(function(){delete t.tmp.force_hide},1);""!=e(l).val()&&delete t.tmp.force_open,0==e("#w2ui-overlay").length&&(i.index=0);var d=w2utils.lang("No matches");null!=i.url&&e(l).val().length<i.minLength&&t.tmp.emptySet!==!0&&(d=i.minLength+" "+w2utils.lang("letters or more...")),null!=i.url&&""==e(l).val()&&t.tmp.emptySet!==!0&&(d=w2utils.lang("Type to search....")),e(a).w2menu("refresh",e.extend(!0,{},i,{search:!1,render:i.renderDrop,maxHeight:i.maxDropHeight,msgNoItems:d,onSelect:function(n){if("enum"==t.type){var r=e(t.el).data("selected");if(n.item){var s=t.trigger({phase:"before",type:"add",target:t.el,originalEvent:n.originalEvent,item:n.item});if(s.isCancelled===!0)return;r.length>=i.max&&i.max>0&&r.pop(),delete n.item.hidden,r.push(n.item),e(t.el).data("selected",r).change(),e(t.helpers.multi).find("input").val("").width(20),t.refresh(),e("#w2ui-overlay").length>0&&e("#w2ui-overlay")[0].hide(),t.trigger(e.extend(s,{phase:"after"}))}}else e(t.el).data("selected",n.item).val(n.item.text).change(),t.helpers.focus&&t.helpers.focus.find("input").val("")}}))}}},inRange:function(t){var i=!1;if("date"==this.type){var n=w2utils.isDate(t,this.options.format,!0);if(n){if(this.options.start||this.options.end){var r="string"==typeof this.options.start?this.options.start:e(this.options.start).val(),s="string"==typeof this.options.end?this.options.end:e(this.options.end).val(),o=w2utils.isDate(r,this.options.format,!0),a=w2utils.isDate(s,this.options.format,!0),l=new Date(n);o||(o=l),a||(a=l),l>=o&&a>=l&&(i=!0)}else i=!0;this.options.blocked&&-1!=e.inArray(t,this.options.blocked)&&(i=!1)}}if("time"==this.type)if(this.options.start||this.options.end){var d=this.toMin(t),u=this.toMin(this.options.start),c=this.toMin(this.options.end);u||(u=d),c||(c=d),d>=u&&c>=d&&(i=!0)}else i=!0;return i},checkType:function(e,t){var i=this;switch(i.type){case"int":return!(!t||-1==["-",i.options.groupSymbol].indexOf(e))||w2utils.isInt(e.replace(i.options.numberRE,""));case"percent":e=e.replace(/%/g,"");case"float":return!(!t||-1==["-",w2utils.settings.decimalSymbol,i.options.groupSymbol].indexOf(e))||w2utils.isFloat(e.replace(i.options.numberRE,""));case"money":case"currency":return!(!t||-1==["-",i.options.decimalSymbol,i.options.groupSymbol,i.options.currencyPrefix,i.options.currencySuffix].indexOf(e))||w2utils.isFloat(e.replace(i.options.moneyRE,""));case"hex":case"color":return w2utils.isHex(e);case"alphanumeric":return w2utils.isAlphaNumeric(e)}return!0},addPrefix:function(){var t=this;setTimeout(function(){if("clear"!==t.type){var i,n=e(t.el).data("tmp")||{};n["old-padding-left"]&&e(t.el).css("padding-left",n["old-padding-left"]),n["old-padding-left"]=e(t.el).css("padding-left"),e(t.el).data("tmp",n),t.helpers.prefix&&e(t.helpers.prefix).remove(),""!==t.options.prefix&&(e(t.el).before('<div class="w2ui-field-helper">'+t.options.prefix+"</div>"),i=e(t.el).prev(),i.css({color:e(t.el).css("color"),"font-family":e(t.el).css("font-family"),"font-size":e(t.el).css("font-size"),"padding-top":e(t.el).css("padding-top"),"padding-bottom":e(t.el).css("padding-bottom"),"padding-left":e(t.el).css("padding-left"),"padding-right":0,"margin-top":parseInt(e(t.el).css("margin-top"),10)+2+"px","margin-bottom":parseInt(e(t.el).css("margin-bottom"),10)+1+"px","margin-left":e(t.el).css("margin-left"),"margin-right":0}).on("click",function(){if(t.options.icon&&"function"==typeof t.onIconClick){var i=t.trigger({phase:"before",type:"iconClick",target:t.el,el:e(this).find("span.w2ui-icon")[0]});if(i.isCancelled===!0)return;t.trigger(e.extend(i,{phase:"after"}))}else"list"==t.type?e(t.helpers.focus).find("input").focus():e(t.el).focus()}),e(t.el).css("padding-left",i.width()+parseInt(e(t.el).css("padding-left"),10)+"px"),t.helpers.prefix=i)}},1)},addSuffix:function(){var t,i,n=this;setTimeout(function(){if("clear"!==n.type){var r=e(n.el).data("tmp")||{};r["old-padding-right"]&&e(n.el).css("padding-right",r["old-padding-right"]),r["old-padding-right"]=e(n.el).css("padding-right"),e(n.el).data("tmp",r),i=parseInt(e(n.el).css("padding-right"),10),n.options.arrows&&(n.helpers.arrows&&e(n.helpers.arrows).remove(),e(n.el).after('<div class="w2ui-field-helper" style="border: 1px solid transparent">&nbsp;    <div class="w2ui-field-up" type="up">        <div class="arrow-up" type="up"></div>    </div>    <div class="w2ui-field-down" type="down">        <div class="arrow-down" type="down"></div>    </div></div>'),w2utils.getSize(n.el,"height"),t=e(n.el).next(),t.css({color:e(n.el).css("color"),"font-family":e(n.el).css("font-family"),"font-size":e(n.el).css("font-size"),height:e(n.el).height()+parseInt(e(n.el).css("padding-top"),10)+parseInt(e(n.el).css("padding-bottom"),10)+"px",padding:0,"margin-top":parseInt(e(n.el).css("margin-top"),10)+1+"px","margin-bottom":0,"border-left":"1px solid silver"}).css("margin-left","-"+(t.width()+parseInt(e(n.el).css("margin-right"),10)+12)+"px").on("mousedown",function(t){function i(){clearTimeout(e("body").data("_field_update_timer")),e("body").off("mouseup",i)}function r(i){e(n.el).focus(),n.keyDown(e.Event("keydown"),{keyCode:"up"==e(t.target).attr("type")?38:40}),i!==!1&&e("body").data("_field_update_timer",setTimeout(r,60))}e("body").on("mouseup",i),e("body").data("_field_update_timer",setTimeout(r,700)),r(!1)}),i+=t.width()+12,e(n.el).css("padding-right",i+"px"),n.helpers.arrows=t),""!==n.options.suffix&&(n.helpers.suffix&&e(n.helpers.suffix).remove(),e(n.el).after('<div class="w2ui-field-helper">'+n.options.suffix+"</div>"),t=e(n.el).next(),t.css({color:e(n.el).css("color"),"font-family":e(n.el).css("font-family"),"font-size":e(n.el).css("font-size"),"padding-top":e(n.el).css("padding-top"),"padding-bottom":e(n.el).css("padding-bottom"),"padding-left":"3px","padding-right":e(n.el).css("padding-right"),"margin-top":parseInt(e(n.el).css("margin-top"),10)+2+"px","margin-bottom":parseInt(e(n.el).css("margin-bottom"),10)+1+"px"}).on("click",function(){"list"==n.type?e(n.helpers.focus).find("input").focus():e(n.el).focus();
}),t.css("margin-left","-"+(w2utils.getSize(t,"width")+parseInt(e(n.el).css("margin-right"),10)+2)+"px"),i+=t.width()+3,e(n.el).css("padding-right",i+"px"),n.helpers.suffix=t)}},1)},addFocus:function(){var t=this,i=(this.options,0);e(t.helpers.focus).remove();var n=e(t.el).attr("tabIndex");n&&-1!=n&&(t.el._tabIndex=n),t.el._tabIndex&&(n=t.el._tabIndex);var r='<div class="w2ui-field-helper">    <div class="w2ui-icon icon-search" style="display: none"></div>    <input type="text" autocomplete="off" tabindex="'+n+'"><div>';e(t.el).attr("tabindex",-1).before(r);var s=e(t.el).prev();t.helpers.focus=s,s.css({width:e(t.el).width(),"margin-top":e(t.el).css("margin-top"),"margin-left":parseInt(e(t.el).css("margin-left"))+parseInt(e(t.el).css("padding-left"))+"px","margin-bottom":e(t.el).css("margin-bottom"),"margin-right":e(t.el).css("margin-right")}).find("input").css({cursor:"default",width:"100%",outline:"none",opacity:1,margin:0,border:"1px solid transparent",padding:e(t.el).css("padding-top"),"padding-left":0,"margin-left":i>0?i+6:0,"background-color":"transparent"}),s.find("input").on("click",function(i){0==e("#w2ui-overlay").length&&t.focus(i),i.stopPropagation()}).on("focus",function(i){e(t.el).css({outline:"auto 5px #7DB4F3","outline-offset":"-2px"}),e(this).val(""),e(t.el).triggerHandler("focus"),i.stopPropagation?i.stopPropagation():i.cancelBubble=!0}).on("blur",function(i){e(t.el).css("outline","none"),e(this).val(""),t.refresh(),e(t.el).triggerHandler("blur"),i.stopPropagation?i.stopPropagation():i.cancelBubble=!0}).on("keyup",function(e){t.keyUp(e)}).on("keydown",function(e){t.keyDown(e)}).on("keypress",function(e){t.keyPress(e)}),s.on("click",function(){e(this).find("input").focus()}),t.refresh()},addMulti:function(){var t=this;this.options,e(t.helpers.multi).remove();var i="",n="margin-top     : 0px; margin-bottom  : 0px; margin-left    : "+e(t.el).css("margin-left")+"; margin-right   : "+e(t.el).css("margin-right")+"; width          : "+(w2utils.getSize(t.el,"width")-parseInt(e(t.el).css("margin-left"),10)-parseInt(e(t.el).css("margin-right"),10))+"px;";"enum"==t.type&&(i='<div class="w2ui-field-helper w2ui-list" style="'+n+'; box-sizing: border-box">    <div style="padding: 0px; margin: 0px; margin-right: 20px; display: inline-block">    <ul>        <li style="padding-left: 0px; padding-right: 0px" class="nomouse">            <input type="text" style="width: 20px" autocomplete="off" '+(e(t.el).attr("readonly")?"readonly":"")+">        </li>    </ul>    </div></div>"),"file"==t.type&&(i='<div class="w2ui-field-helper w2ui-list" style="'+n+'; box-sizing: border-box">    <div style="padding: 0px; margin: 0px; margin-right: 20px; display: inline-block">    <ul><li style="padding-left: 0px; padding-right: 0px" class="nomouse"></li></ul>    <input class="file-input" type="file" name="attachment" multiple style="display: none" tabindex="-1">    </div></div>'),e(t.el).before(i).css({"background-color":"transparent","border-color":"transparent"});var r=e(t.el).prev();t.helpers.multi=r,"enum"==t.type&&(e(t.el).attr("tabindex",-1),r.find("input").on("click",function(i){0==e("#w2ui-overlay").length&&t.focus(i),e(t.el).triggerHandler("click")}).on("focus",function(i){e(r).css({outline:"auto 5px #7DB4F3","outline-offset":"-2px"}),e(t.el).triggerHandler("focus"),i.stopPropagation?i.stopPropagation():i.cancelBubble=!0}).on("blur",function(i){e(r).css("outline","none"),e(t.el).triggerHandler("blur"),i.stopPropagation?i.stopPropagation():i.cancelBubble=!0}).on("keyup",function(e){t.keyUp(e)}).on("keydown",function(e){t.keyDown(e)}).on("keypress",function(e){r.find(".w2ui-enum-placeholder").remove(),t.keyPress(e)}),r.on("click",function(){e(this).find("input").focus()})),"file"==t.type&&(e(t.el).css("outline","none"),r.on("click",function(i){e(t.el).focus(),e(t.el).attr("readonly")||(t.blur(i),r.find("input").click())}).on("dragenter",function(){e(t.el).attr("readonly")||e(r).addClass("w2ui-file-dragover")}).on("dragleave",function(i){if(!e(t.el).attr("readonly")){var n=e(i.target).parents(".w2ui-field-helper");0==n.length&&e(r).removeClass("w2ui-file-dragover")}}).on("drop",function(i){if(!e(t.el).attr("readonly")){e(r).removeClass("w2ui-file-dragover");for(var n=i.originalEvent.dataTransfer.files,s=0,o=n.length;o>s;s++)t.addFile.call(t,n[s]);i.preventDefault(),i.stopPropagation()}}).on("dragover",function(e){e.preventDefault(),e.stopPropagation()}),r.find("input").on("click",function(e){e.stopPropagation()}).on("change",function(){if("undefined"!=typeof this.files)for(var e=0,i=this.files.length;i>e;e++)t.addFile.call(t,this.files[e])})),t.refresh()},addFile:function(t){var i,n=this,r=this.options,s=e(n.el).data("selected"),o={name:t.name,type:t.type,modified:t.lastModifiedDate,size:t.size,content:null},a=0,l=0;for(var d in s){if(s[d].name==t.name&&s[d].size==t.size)return;a+=s[d].size,l++}var u=n.trigger({phase:"before",type:"add",target:n.el,file:o,total:l,totalSize:a});if(u.isCancelled!==!0){if(0!==r.maxFileSize&&o.size>r.maxFileSize)return i="Maximum file size is "+w2utils.size(r.maxFileSize),r.silent===!1&&e(n.el).w2tag(i),void console.log("ERROR: "+i);if(0!==r.maxSize&&a+o.size>r.maxSize)return i="Maximum total size is "+w2utils.size(r.maxSize),r.silent===!1&&e(n.el).w2tag(i),void console.log("ERROR: "+i);if(0!==r.max&&l>=r.max)return i="Maximum number of files is "+r.max,r.silent===!1&&e(n.el).w2tag(i),void console.log("ERROR: "+i);if(s.push(o),"undefined"!=typeof FileReader){var c=new FileReader;c.onload=function(){return function(t){var i=t.target.result,r=i.indexOf(",");o.content=i.substr(r+1),n.refresh(),e(n.el).trigger("change"),n.trigger(e.extend(u,{phase:"after"}))}}(),c.readAsDataURL(t)}else n.refresh(),e(n.el).trigger("change")}},normMenu:function(t){if(e.isArray(t)){for(var i=0;i<t.length;i++)"string"==typeof t[i]?t[i]={id:t[i],text:t[i]}:("undefined"!=typeof t[i].text&&"undefined"==typeof t[i].id&&(t[i].id=t[i].text),"undefined"==typeof t[i].text&&"undefined"!=typeof t[i].id&&(t[i].text=t[i].id),"undefined"!=typeof t[i].caption&&(t[i].text=t[i].caption));return t}if("object"==typeof t){var n=[];for(var i in t)n.push({id:i,text:t[i]});return n}},getColorHTML:function(){for(var t='<div class="w2ui-color"><table cellspacing="5">',i=0;8>i;i++){t+="<tr>";for(var n=0;8>n;n++)t+='<td>    <div class="color" style="background-color: #'+this.pallete[i][n]+';" name="'+this.pallete[i][n]+'" index="'+i+":"+n+'">        '+(e(this.el).val()==this.pallete[i][n]?"&#149;":"&nbsp;")+"    </div></td>";t+="</tr>",2>i&&(t+='<tr><td style="height: 8px" colspan="8"></td></tr>')}return t+="</table></div>"},getMonthHTML:function(e,t){var i=new Date,n=w2utils.settings.fullmonths,r=(w2utils.settings.fulldays,["31","28","31","30","31","30","31","31","30","31","30","31"]),s=i.getFullYear()+"/"+(Number(i.getMonth())+1)+"/"+i.getDate();t=w2utils.isInt(t)?parseInt(t):i.getFullYear(),e=w2utils.isInt(e)?parseInt(e):i.getMonth()+1,e>12&&(e-=12,t++),(1>e||0===e)&&(e+=12,t--),r[1]=t/4==Math.floor(t/4)?"29":"28",this.options.current=e+"/"+t,i=new Date(t,e-1,1);for(var o=i.getDay(),a=w2utils.settings.shortdays,l="",d=0,u=a.length;u>d;d++)l+="<td>"+a[d]+"</td>";for(var c='<div class="w2ui-calendar-title title">    <div class="w2ui-calendar-previous previous"> <div></div> </div>    <div class="w2ui-calendar-next next"> <div></div> </div> '+n[e-1]+", "+t+'</div><table class="w2ui-calendar-days" cellspacing="0">    <tr class="w2ui-day-title">'+l+"</tr>    <tr>",h=1,p=1;43>p;p++){if(0===o&&1==p){for(var f=0;6>f;f++)c+='<td class="w2ui-day-empty">&nbsp;</td>';p+=6}else if(o>p||h>r[e-1]){c+='<td class="w2ui-day-empty">&nbsp;</td>',p%7===0&&(c+="</tr><tr>");continue}var g=t+"/"+e+"/"+h,m="";p%7==6&&(m=" w2ui-saturday"),p%7===0&&(m=" w2ui-sunday"),g==s&&(m+=" w2ui-today");var v=h,y="",w="",b=w2utils.formatDate(g,this.options.format);this.options.colored&&void 0!==this.options.colored[b]&&(tmp=this.options.colored[b].split(":"),w="background-color: "+tmp[0]+";",y="color: "+tmp[1]+";"),c+='<td class="'+(this.inRange(b)?"w2ui-date ":"w2ui-blocked")+m+'" style="'+y+w+'" date="'+b+'">'+v+"</td>",(p%7===0||0===o&&1==p)&&(c+="</tr><tr>"),h++}return c+="</tr></table>"},getYearHTML:function(){var e=w2utils.settings.shortmonths,t="",i="";for(var n in e)t+='<div class="w2ui-jump-month" name="'+n+'">'+e[n]+"</div>";for(var r=1950;2020>=r;r++)i+='<div class="w2ui-jump-year" name="'+r+'">'+r+"</div>";return"<div>"+t+"</div><div>"+i+"</div>"},getHourHTML:function(){for(var e=[],t="h24"==this.options.format,i=0;24>i;i++){var n=(i>=12&&!t?i-12:i)+":00"+(t?"":12>i?" am":" pm");12!=i||t||(n="12:00 pm"),e[Math.floor(i/8)]||(e[Math.floor(i/8)]="");var r=this.fromMin(this.toMin(n)),s=this.fromMin(this.toMin(n)+59);e[Math.floor(i/8)]+='<div class="'+(this.inRange(r)||this.inRange(s)?"w2ui-time ":"w2ui-blocked")+'" hour="'+i+'">'+n+"</div>"}var o='<div class="w2ui-calendar-time"><table><tr>    <td>'+e[0]+"</td>    <td>"+e[1]+"</td>    <td>"+e[2]+"</td></tr></table></div>";return o},getMinHTML:function(e){"undefined"==typeof e&&(e=0);for(var t="h24"==this.options.format,i=[],n=0;60>n;n+=5){var r=(e>12&&!t?e-12:e)+":"+(10>n?0:"")+n+" "+(t?"":12>e?"am":"pm"),s=20>n?0:40>n?1:2;i[s]||(i[s]=""),i[s]+='<div class="'+(this.inRange(r)?"w2ui-time ":"w2ui-blocked")+'" min="'+n+'">'+r+"</div>"}var o='<div class="w2ui-calendar-time"><table><tr>    <td>'+i[0]+"</td>    <td>"+i[1]+"</td>    <td>"+i[2]+"</td></tr></table></div>";return o},toMin:function(e){if("string"!=typeof e)return null;var t=e.split(":");return 2!=t.length?null:(t[0]=parseInt(t[0]),t[1]=parseInt(t[1]),-1!=e.indexOf("pm")&&12!=t[0]&&(t[0]+=12),60*t[0]+t[1])},fromMin:function(e){var t="";e>=1440&&(e%=1440),0>e&&(e=1440+e);var i=Math.floor(e/60),n=(10>e%60?"0":"")+e%60;return t=-1!=this.options.format.indexOf("h24")?i+":"+n:(12>=i?i:i-12)+":"+n+" "+(i>=12?"pm":"am")}},e.extend(t.prototype,w2utils.event),w2obj.field=t}(jQuery),function(){var w2form=function(e){this.name=null,this.header="",this.box=null,this.url="",this.routeData={},this.formURL="",this.formHTML="",this.page=0,this.recid=0,this.fields=[],this.actions={},this.record={},this.original={},this.postData={},this.toolbar={},this.tabs={},this.style="",this.focus=0,this.msgNotJSON=w2utils.lang("Return data is not in JSON format."),this.msgAJAXerror=w2utils.lang("AJAX error. See console for more details."),this.msgRefresh=w2utils.lang("Refreshing..."),this.msgSaving=w2utils.lang("Saving..."),this.onRequest=null,this.onLoad=null,this.onValidate=null,this.onSubmit=null,this.onSave=null,this.onChange=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,this.onAction=null,this.onToolbar=null,this.onError=null,this.isGenerated=!1,this.last={xhr:null},$.extend(!0,this,w2obj.form,e)};$.fn.w2form=function(e){if("object"==typeof e||!e){var t=this;if(!w2utils.checkName(e,"w2form"))return;var i=e.record,n=e.original,r=e.fields,s=e.toolbar,o=e.tabs,a=new w2form(e);if($.extend(a,{record:{},original:{},fields:[],tabs:{},toolbar:{},handlers:[]}),$.isArray(o)){$.extend(!0,a.tabs,{tabs:[]});for(var l in o){var d=o[l];a.tabs.tabs.push("object"==typeof d?d:{id:d,caption:d})}}else $.extend(!0,a.tabs,o);$.extend(!0,a.toolbar,s);for(var u in r){var c=$.extend(!0,{},r[u]);"undefined"==typeof c.name&&"undefined"!=typeof c.field&&(c.name=c.field),"undefined"==typeof c.field&&"undefined"!=typeof c.name&&(c.field=c.name),a.fields[u]=c}for(var u in i)a.record[u]=$.isPlainObject(i[u])?$.extend(!0,{},i[u]):i[u];for(var u in n)a.original[u]=$.isPlainObject(n[u])?$.extend(!0,{},n[u]):n[u];return t.length>0&&(a.box=t[0]),""!=a.formURL?$.get(a.formURL,function(e){a.formHTML=e,a.isGenerated=!0,(0!=$(a.box).length||0!=e.length)&&($(a.box).html(e),a.render(a.box))}):""!=a.formHTML||(a.formHTML=0!=$(this).length&&""!=$.trim($(this).html())?$(this).html():a.generateHTML()),w2ui[a.name]=a,""==a.formURL&&(-1==String(a.formHTML).indexOf("w2ui-page")&&(a.formHTML='<div class="w2ui-page page-0">'+a.formHTML+"</div>"),$(a.box).html(a.formHTML),a.isGenerated=!0,a.render(a.box)),a}if(w2ui[$(this).attr("name")]){var t=w2ui[$(this).attr("name")];return t[e].apply(t,Array.prototype.slice.call(arguments,1)),this}console.log("ERROR: Method "+e+" does not exist on jQuery.w2form")},w2form.prototype={get:function(e,t){if(0===arguments.length){var i=[];for(var n in this.fields)null!=this.fields[n].name&&i.push(this.fields[n].name);return i}for(var r in this.fields)if(this.fields[r].name==e)return t===!0?r:this.fields[r];return null},set:function(e,t){for(var i in this.fields)if(this.fields[i].name==e)return $.extend(this.fields[i],t),this.refresh(),!0;return!1},reload:function(e){var t="object"!=typeof this.url?this.url:this.url.get;t&&0!=this.recid?this.request(e):"function"==typeof e&&e()},clear:function(){this.recid=0,this.record={},$().w2tag(),this.refresh()},error:function(e){var t=this.trigger({target:this.name,type:"error",message:e,xhr:this.last.xhr});return t.isCancelled===!0?void("function"==typeof callBack&&callBack()):(setTimeout(function(){w2alert(e,"Error")},1),void this.trigger($.extend(t,{phase:"after"})))},validate:function(e){"undefined"==typeof e&&(e=!0),$().w2tag();var t=[];for(var i in this.fields){var n=this.fields[i];switch(null==this.record[n.name]&&(this.record[n.name]=""),n.type){case"int":this.record[n.name]&&!w2utils.isInt(this.record[n.name])&&t.push({field:n,error:w2utils.lang("Not an integer")});break;case"float":this.record[n.name]&&!w2utils.isFloat(this.record[n.name])&&t.push({field:n,error:w2utils.lang("Not a float")});break;case"money":this.record[n.name]&&!w2utils.isMoney(this.record[n.name])&&t.push({field:n,error:w2utils.lang("Not in money format")});break;case"color":case"hex":this.record[n.name]&&!w2utils.isHex(this.record[n.name])&&t.push({field:n,error:w2utils.lang("Not a hex number")});break;case"email":this.record[n.name]&&!w2utils.isEmail(this.record[n.name])&&t.push({field:n,error:w2utils.lang("Not a valid email")});break;case"checkbox":this.record[n.name]=1==this.record[n.name]?1:0;break;case"date":n.options.format||(n.options.format=w2utils.settings.date_format),this.record[n.name]&&!w2utils.isDate(this.record[n.name],n.options.format)&&t.push({field:n,error:w2utils.lang("Not a valid date")+": "+n.options.format});break;case"list":case"combo":break;case"enum":}var r=this.record[n.name];n.required&&(""===r||$.isArray(r)&&0==r.length||$.isPlainObject(r)&&$.isEmptyObject(r))&&t.push({field:n,error:w2utils.lang("Required field")}),n.equalto&&this.record[n.name]!=this.record[n.equalto]&&t.push({field:n,error:w2utils.lang("Field should be equal to ")+n.equalto})}var s=this.trigger({phase:"before",target:this.name,type:"validate",errors:t});if(s.isCancelled!==!0){if(e)for(var o in s.errors){var a=s.errors[o];"radio"==a.field.type?$($(a.field.el).parents("div")[0]).w2tag(a.error,{class:"w2ui-error"}):-1!=["enum","file"].indexOf(a.field.type)?!function(e){setTimeout(function(){var t=$(e.field.el).data("w2field").helpers.multi;$(e.field.el).w2tag(e.error),$(t).addClass("w2ui-error")},1)}(a):$(a.field.el).w2tag(a.error,{class:"w2ui-error"}),this.goto(t[0].field.page)}return this.trigger($.extend(s,{phase:"after"})),t}},getChanges:function(){var e=function(t,i,n){for(var r in t)"object"==typeof t[r]?(n[r]=e(t[r],i[r]||{},{}),(!n[r]||$.isEmptyObject(n[r]))&&delete n[r]):t[r]!=i[r]&&(n[r]=t[r]);return n};return e(this.record,this.original,{})},request:function(postData,callBack){var obj=this;if("function"==typeof postData&&(callBack=postData,postData=null),("undefined"==typeof postData||null==postData)&&(postData={}),this.url&&("object"!=typeof this.url||this.url.get)){(null==this.recid||"undefined"==typeof this.recid)&&(this.recid=0);var params={};params.cmd="get-record",params.recid=this.recid,$.extend(params,this.postData),$.extend(params,postData);var eventData=this.trigger({phase:"before",type:"request",target:this.name,url:this.url,postData:params});if(eventData.isCancelled===!0)return void("function"==typeof callBack&&callBack({status:"error",message:"Request aborted."}));this.record={},this.original={},this.lock(this.msgRefresh);var url=eventData.url;if("object"==typeof eventData.url&&eventData.url.get&&(url=eventData.url.get),this.last.xhr)try{this.last.xhr.abort()}catch(e){}if(!$.isEmptyObject(obj.routeData)){var info=w2utils.parseRoute(url);if(info.keys.length>0)for(var k=0;k<info.keys.length;k++)null!=obj.routeData[info.keys[k].name]&&(url=url.replace(new RegExp(":"+info.keys[k].name,"g"),obj.routeData[info.keys[k].name]))}var ajaxOptions={type:"POST",url:url,data:eventData.postData,dataType:"text"};"HTTP"==w2utils.settings.dataType&&(ajaxOptions.data=String($.param(ajaxOptions.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]")),"RESTFULL"==w2utils.settings.dataType&&(ajaxOptions.type="GET",ajaxOptions.data=String($.param(ajaxOptions.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]")),"JSON"==w2utils.settings.dataType&&(ajaxOptions.type="POST",ajaxOptions.data=JSON.stringify(ajaxOptions.data),ajaxOptions.contentType="application/json"),this.last.xhr=$.ajax(ajaxOptions).done(function(data,status,xhr){obj.unlock();var eventData=obj.trigger({phase:"before",target:obj.name,type:"load",xhr:xhr});if(eventData.isCancelled===!0)return void("function"==typeof callBack&&callBack({status:"error",message:"Request aborted."}));var data,responseText=obj.last.xhr.responseText;if("error"!=status){if("undefined"!=typeof responseText&&""!=responseText){if("object"==typeof responseText)data=responseText;else try{eval("data = "+responseText)}catch(e){}"undefined"==typeof data&&(data={status:"error",message:obj.msgNotJSON,responseText:responseText}),"error"==data.status?obj.error(data.message):(obj.record=$.extend({},data.record),obj.original=$.extend({},data.record))}}else obj.error("AJAX Error "+xhr.status+": "+xhr.statusText),data={status:"error",message:obj.msgAJAXerror,responseText:responseText};obj.trigger($.extend(eventData,{phase:"after"})),obj.refresh(),"function"==typeof callBack&&callBack(data)}).fail(function(e,t,i){var n={status:t,error:i,rawResponseText:e.responseText},r=obj.trigger({phase:"before",type:"error",error:n,xhr:e});if(r.isCancelled!==!0){if("abort"!=t){var s;try{s=$.parseJSON(e.responseText)}catch(e){}console.log("ERROR: Server communication failed.","\n   EXPECTED:",{status:"success",items:[{id:1,text:"item"}]},"\n         OR:",{status:"error",message:"error message"},"\n   RECEIVED:","object"==typeof s?s:e.responseText)}obj.trigger($.extend(r,{phase:"after"}))}}),this.trigger($.extend(eventData,{phase:"after"}))}},submit:function(e,t){return this.save(e,t)},save:function(postData,callBack){var obj=this;$(this.box).find(":focus").change(),"function"==typeof postData&&(callBack=postData,postData=null);var errors=obj.validate(!0);if(0===errors.length){if(("undefined"==typeof postData||null==postData)&&(postData={}),!obj.url||"object"==typeof obj.url&&!obj.url.save)return void console.log("ERROR: Form cannot be saved because no url is defined.");obj.lock(obj.msgSaving+' <span id="'+obj.name+'_progress"></span>'),setTimeout(function(){var params={};params.cmd="save-record",params.recid=obj.recid,$.extend(params,obj.postData),$.extend(params,postData),params.record=$.extend(!0,{},obj.record);var eventData=obj.trigger({phase:"before",type:"submit",target:obj.name,url:obj.url,postData:params});if(eventData.isCancelled!==!0){var url=eventData.url;if("object"==typeof eventData.url&&eventData.url.save&&(url=eventData.url.save),obj.last.xhr)try{obj.last.xhr.abort()}catch(e){}if(!$.isEmptyObject(obj.routeData)){var info=w2utils.parseRoute(url);if(info.keys.length>0)for(var k=0;k<info.keys.length;k++)null!=obj.routeData[info.keys[k].name]&&(url=url.replace(new RegExp(":"+info.keys[k].name,"g"),obj.routeData[info.keys[k].name]))}var ajaxOptions={type:"POST",url:url,data:eventData.postData,dataType:"text",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);$("#"+obj.name+"_progress").text(""+t+"%")}},!1),e}};"HTTP"==w2utils.settings.dataType&&(ajaxOptions.data=String($.param(ajaxOptions.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]")),"RESTFULL"==w2utils.settings.dataType&&(0!=obj.recid&&(ajaxOptions.type="PUT"),ajaxOptions.data=String($.param(ajaxOptions.data,!1)).replace(/%5B/g,"[").replace(/%5D/g,"]")),"JSON"==w2utils.settings.dataType&&(ajaxOptions.type="POST",ajaxOptions.data=JSON.stringify(ajaxOptions.data),ajaxOptions.contentType="application/json"),obj.last.xhr=$.ajax(ajaxOptions).done(function(data,status,xhr){obj.unlock();var eventData=obj.trigger({phase:"before",target:obj.name,type:"save",xhr:xhr,status:status});if(eventData.isCancelled!==!0){var data,responseText=xhr.responseText;if("error"!=status){if("undefined"!=typeof responseText&&""!=responseText){if("object"==typeof responseText)data=responseText;else try{eval("data = "+responseText)}catch(e){}"undefined"==typeof data&&(data={status:"error",message:obj.msgNotJSON,responseText:responseText}),"error"==data.status?obj.error(data.message):obj.original=$.extend({},obj.record)}}else obj.error("AJAX Error "+xhr.status+": "+xhr.statusText),data={status:"error",message:obj.msgAJAXerror,responseText:responseText};obj.trigger($.extend(eventData,{phase:"after"})),obj.refresh(),"success"==data.status&&"function"==typeof callBack&&callBack(data)}}).fail(function(e,t,i){var n={status:t,error:i,rawResponseText:e.responseText},r=obj.trigger({phase:"before",type:"error",error:n,xhr:e});r.isCancelled!==!0&&(console.log("ERROR: server communication failed. The server should return",{status:"success"},"OR",{status:"error",message:"error message"},", instead the AJAX request produced this: ",n),obj.trigger($.extend(r,{phase:"after"})))}),obj.trigger($.extend(eventData,{phase:"after"}))}},50)}},lock:function(){var e=$(this.box).find("> div:first-child"),t=Array.prototype.slice.call(arguments,0);t.unshift(e),w2utils.lock.apply(window,t)},unlock:function(){var e=this;setTimeout(function(){w2utils.unlock(e.box)},25)},goto:function(e){"undefined"!=typeof e&&(this.page=e),$(this.box).data("auto-size")===!0&&$(this.box).height(0),this.refresh()},generateHTML:function(){var e,t=[],i="";for(var n in this.fields){var r="",s=this.fields[n];"undefined"==typeof s.html&&(s.html={}),s.html=$.extend(!0,{caption:"",span:6,attr:"",text:"",page:0},s.html),"undefined"==typeof e&&(e=s.html.page),""==s.html.caption&&(s.html.caption=s.name);var o='<input name="'+s.name+'" type="text" '+s.html.attr+"/>";("pass"===s.type||"password"===s.type)&&(o='<input name="'+s.name+'" type = "password" '+s.html.attr+"/>"),"checkbox"==s.type&&(o='<input name="'+s.name+'" type="checkbox" '+s.html.attr+"/>"),"textarea"==s.type&&(o='<textarea name="'+s.name+'" '+s.html.attr+"></textarea>"),"toggle"==s.type&&(o='<input name="'+s.name+'" type="checkbox" '+s.html.attr+' class="w2ui-toggle"/><div><div></div></div>'),s.html.group&&(""!=i&&(r+="\n   </div>"),r+='\n   <div class="w2ui-group-title">'+s.html.group+'</div>\n   <div class="w2ui-group">',i=s.html.group),s.html.page!=e&&""!=i&&(t[t.length-1]+="\n   </div>",i=""),r+='\n      <div class="w2ui-field '+("undefined"!=typeof s.html.span?"w2ui-span"+s.html.span:"")+'">\n         <label>'+w2utils.lang(s.html.caption)+"</label>\n         <div>"+o+w2utils.lang(s.html.text)+"</div>\n      </div>","undefined"==typeof t[s.html.page]&&(t[s.html.page]=""),t[s.html.page]+=r,e=s.html.page}if(""!=i&&(t[t.length-1]+="\n   </div>"),this.tabs.tabs)for(var a=0;a<this.tabs.tabs.length;a++)"undefined"==typeof t[a]&&(t[a]="");for(var l in t)t[l]='<div class="w2ui-page page-'+l+'">'+t[l]+"\n</div>";var d="";if(!$.isEmptyObject(this.actions)){var u="";d+='\n<div class="w2ui-buttons">';for(var c in this.actions)u=-1!=["save","update","create"].indexOf(c.toLowerCase())?"w2ui-btn-green":"",d+='\n    <button name="'+c+'" class="w2ui-btn '+u+'">'+w2utils.lang(c)+"</button>";d+="\n</div>"}return t.join("")+d},action:function(e,t){var i=this.trigger({phase:"before",target:e,type:"action",originalEvent:t});i.isCancelled!==!0&&("function"==typeof this.actions[e]&&this.actions[e].call(this,t),this.trigger($.extend(i,{phase:"after"})))},resize:function(){function e(){n.width($(t.box).width()).height($(t.box).height()),s.css("top",""!=t.header?w2utils.getSize(r,"height"):0),o.css("top",(""!=t.header?w2utils.getSize(r,"height"):0)+("object"==typeof t.toolbar&&$.isArray(t.toolbar.items)&&t.toolbar.items.length>0?w2utils.getSize(s,"height"):0)),a.css("top",(""!=t.header?w2utils.getSize(r,"height"):0)+("object"==typeof t.toolbar&&$.isArray(t.toolbar.items)&&t.toolbar.items.length>0?w2utils.getSize(s,"height")+5:0)+("object"==typeof t.tabs&&$.isArray(t.tabs.tabs)&&t.tabs.tabs.length>0?w2utils.getSize(o,"height")+5:0)),a.css("bottom",u.length>0?w2utils.getSize(u,"height"):0)}var t=this,i=this.trigger({phase:"before",target:this.name,type:"resize"});if(i.isCancelled!==!0){var n=$(this.box).find("> div"),r=$(this.box).find("> div .w2ui-form-header"),s=$(this.box).find("> div .w2ui-form-toolbar"),o=$(this.box).find("> div .w2ui-form-tabs"),a=$(this.box).find("> div .w2ui-page"),l=$(this.box).find("> div .w2ui-page.page-"+this.page),d=$(this.box).find("> div .w2ui-page.page-"+this.page+" > div"),u=$(this.box).find("> div .w2ui-buttons");e(),(0==parseInt($(this.box).height())||$(this.box).data("auto-size")===!0)&&($(this.box).height((r.length>0?w2utils.getSize(r,"height"):0)+("object"==typeof this.tabs&&$.isArray(this.tabs.tabs)&&this.tabs.tabs.length>0?w2utils.getSize(o,"height"):0)+("object"==typeof this.toolbar&&$.isArray(this.toolbar.items)&&this.toolbar.items.length>0?w2utils.getSize(s,"height"):0)+(a.length>0?w2utils.getSize(d,"height")+w2utils.getSize(l,"+height")+12:0)+(u.length>0?w2utils.getSize(u,"height"):0)),$(this.box).data("auto-size",!0)),e(),t.trigger($.extend(i,{phase:"after"}))}},refresh:function(){var e=(new Date).getTime(),t=this;if(this.box&&this.isGenerated&&"undefined"!=typeof $(this.box).html()){$(this.box).find("input, textarea, select").each(function(e,i){var n=$(i).attr("undefined"!=typeof $(i).attr("name")?"name":"id"),r=t.get(n);if(r){var s=$(i).parents(".w2ui-page");if(s.length>0)for(var o=0;100>o;o++)if(s.hasClass("page-"+o)){r.page=o;break}}});var i=this.trigger({phase:"before",target:this.name,type:"refresh",page:this.page});if(i.isCancelled!==!0){$(this.box).find(".w2ui-page").hide(),$(this.box).find(".w2ui-page.page-"+this.page).show(),$(this.box).find(".w2ui-form-header").html(this.header),"object"==typeof this.tabs&&$.isArray(this.tabs.tabs)&&this.tabs.tabs.length>0?($("#form_"+this.name+"_tabs").show(),this.tabs.active=this.tabs.tabs[this.page].id,this.tabs.refresh()):$("#form_"+this.name+"_tabs").hide(),"object"==typeof this.toolbar&&$.isArray(this.toolbar.items)&&this.toolbar.items.length>0?($("#form_"+this.name+"_toolbar").show(),this.toolbar.refresh()):$("#form_"+this.name+"_toolbar").hide();for(var n in this.fields){var r=this.fields[n];"undefined"==typeof r.name&&"undefined"!=typeof r.field&&(r.name=r.field),"undefined"==typeof r.field&&"undefined"!=typeof r.name&&(r.field=r.name),r.$el=$(this.box).find('[name="'+String(r.name).replace(/\\/g,"\\\\")+'"]'),r.el=r.$el[0],"undefined"==typeof r.el&&console.log('ERROR: Cannot associate field "'+r.name+'" with html control. Make sure html control exists with the same name.'),r.el&&(r.el.id=r.name);var s=$(r).data("w2field");s&&s.clear(),$(r.$el).off("change").on("change",function(){var e=this.value,i=t.record[this.name]?t.record[this.name]:"",n=t.get(this.name);if(-1!=["list","enum","file"].indexOf(n.type)&&$(this).data("selected")){var r=$(this).data("selected"),s=t.record[this.name];if($.isArray(r)){e=[];for(var o in r)e[o]=$.extend(!0,{},r[o])}if($.isPlainObject(r)&&(e=$.extend(!0,{},r)),$.isArray(s)){i=[];for(var o in s)i[o]=$.extend(!0,{},s[o])}$.isPlainObject(s)&&(i=$.extend(!0,{},s))}if(-1!=["toggle","checkbox"].indexOf(n.type)&&(e=!!$(this).prop("checked")),-1!=["int","float","percent","money","currency"].indexOf(n.type)&&(e=$(this).data("w2field").clean(e)),e!==i){var a=t.trigger({phase:"before",target:this.name,type:"change",value_new:e,value_previous:i});if(a.isCancelled===!0)return void $(this).val(t.record[this.name]);var l=this.value;if("select"==this.type&&(l=this.value),"checkbox"==this.type&&(l=!!this.checked),"radio"==this.type&&n.$el.each(function(e,t){t.checked&&(l=t.value)}),-1!=["int","float","percent","money","currency","list","combo","enum","file","toggle"].indexOf(n.type)&&(l=e),-1!=["enum","file"].indexOf(n.type)&&l.length>0){var d=$(n.el).data("w2field").helpers.multi;$(d).removeClass("w2ui-error")}t.record[this.name]=l,t.trigger($.extend(a,{phase:"after"}))}}),r.required?$(r.el).parent().parent().addClass("w2ui-required"):$(r.el).parent().parent().removeClass("w2ui-required")}$(this.box).find("button, input[type=button]").each(function(e,i){$(i).off("click").on("click",function(e){var i=this.value;this.id&&(i=this.id),this.name&&(i=this.name),t.action(i,e)})});for(var n in this.fields){var r=this.fields[n],o="undefined"!=typeof this.record[r.name]?this.record[r.name]:"";if(r.el)switch(r.type=String(r.type).toLowerCase(),r.options||(r.options={}),r.type){case"text":case"textarea":case"email":case"pass":case"password":r.el.value=o;break;case"int":case"float":case"money":case"currency":case"percent":case"hex":case"alphanumeric":case"color":case"date":case"time":r.el.value=o,$(r.el).w2field($.extend({},r.options,{type:r.type}));break;case"toggle":w2utils.isFloat(o)&&(o=parseFloat(o)),$(r.el).prop("checked",!!o),this.record[r.name]=o?1:0;break;case"list":case"combo":if("list"==r.type){var a=$.isPlainObject(o)?o.id:o,l=r.options.items;$.isArray(l)&&l.length>0&&!$.isPlainObject(l[0])&&(r.options.items=w2obj.field.prototype.normMenu(l));for(var d in r.options.items){var u=r.options.items[d];if(u.id==a){o=$.extend(!0,{},u),t.record[r.name]=o;break}}}else r.el.value="combo"!=r.type||$.isPlainObject(o)?$.isPlainObject(o)&&"undefined"!=typeof o.text?o.text:"":o;$.isPlainObject(o)||(o={}),$(r.el).w2field($.extend({},r.options,{type:r.type,selected:o}));break;case"enum":case"file":$.isArray(o)||(o=[]),$(r.el).w2field($.extend({},r.options,{type:r.type,selected:o}));break;case"select":var l=r.options.items;if("undefined"!=typeof l&&l.length>0){l=w2obj.field.prototype.normMenu(l),$(r.el).html("");for(var c in l)$(r.el).append('<option value="'+l[c].id+'">'+l[c].text+"</option")}$(r.el).val(o);break;case"radio":$(r.$el).prop("checked",!1).each(function(e,t){$(t).val()==o&&$(t).prop("checked",!0)});break;case"checkbox":$(r.el).prop("checked",!!o);break;default:$(r.el).w2field($.extend({},r.options,{type:r.type}))}}for(var s=$(this.box).find(".w2ui-page"),d=0;d<s.length;d++)$(s[d]).find("> *").length>1&&$(s[d]).wrapInner("<div></div>");return this.trigger($.extend(i,{phase:"after"})),this.resize(),(new Date).getTime()-e}}},render:function(e){function t(){var e=$(n.box).find("input, select, textarea");e.length>n.focus&&e[n.focus].focus()}var i=(new Date).getTime(),n=this;if("object"==typeof e&&($(this.box).find("#form_"+this.name+"_tabs").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-form").html(""),this.box=e),this.isGenerated&&this.box){var r=this.trigger({phase:"before",target:this.name,type:"render",box:"undefined"!=typeof e?e:this.box});if(r.isCancelled!==!0){$.isEmptyObject(this.original)&&!$.isEmptyObject(this.record)&&(this.original=$.extend(!0,{},this.record));var s="<div>"+(""!=this.header?'<div class="w2ui-form-header">'+this.header+"</div>":"")+'    <div id="form_'+this.name+'_toolbar" class="w2ui-form-toolbar"></div>    <div id="form_'+this.name+'_tabs" class="w2ui-form-tabs"></div>'+this.formHTML+"</div>";$(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-form").html(s),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style),"function"!=typeof this.toolbar.render&&(this.toolbar=$().w2toolbar($.extend({},this.toolbar,{name:this.name+"_toolbar",owner:this
})),this.toolbar.on("click",function(e){var t=n.trigger({phase:"before",type:"toolbar",target:e.target,originalEvent:e});t.isCancelled!==!0&&n.trigger($.extend(t,{phase:"after"}))})),"object"==typeof this.toolbar&&"function"==typeof this.toolbar.render&&this.toolbar.render($("#form_"+this.name+"_toolbar")[0]),"function"!=typeof this.tabs.render&&(this.tabs=$().w2tabs($.extend({},this.tabs,{name:this.name+"_tabs",owner:this})),this.tabs.on("click",function(e){n.goto(this.get(e.target,!0))})),"object"==typeof this.tabs&&"function"==typeof this.tabs.render&&this.tabs.render($("#form_"+this.name+"_tabs")[0]),this.trigger($.extend(r,{phase:"after"})),this.resize();var o="object"!=typeof this.url?this.url:this.url.get;return o&&0!=this.recid?this.request():this.refresh(),0==$(".w2ui-layout").length&&(this.tmp_resize=function(){w2ui[n.name].resize()},$(window).off("resize","body").on("resize","body",this.tmp_resize)),setTimeout(function(){n.resize(),n.refresh()},150),this.focus>=0&&setTimeout(t,500),(new Date).getTime()-i}}},destroy:function(){var e=this.trigger({phase:"before",target:this.name,type:"destroy"});e.isCancelled!==!0&&("object"==typeof this.toolbar&&this.toolbar.destroy&&this.toolbar.destroy(),"object"==typeof this.tabs&&this.tabs.destroy&&this.tabs.destroy(),$(this.box).find("#form_"+this.name+"_tabs").length>0&&$(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-form").html(""),delete w2ui[this.name],this.trigger($.extend(e,{phase:"after"})),$(window).off("resize","body"))}},$.extend(w2form.prototype,w2utils.event),w2obj.form=w2form}()},function(e,t,i){var n,r;n=[i(12),i(2),i(4),i(23)],r=function(e,t){"use strict";return{requires:{editing:!0},init:function(i,n){e(i.editing,function(e){return{createEditor:function(i,n,r){if("date"==n.type){var s=!1,o=t("<input>").datepicker({dateFormat:n.format,onSelect:function(e,i){s=!0,t(this).trigger("commit",[t(this).datepicker("getDate")])},onClose:function(){s||t(this).trigger("abort")}});return setTimeout(function(){o.datepicker("setDate",r),o.datepicker("show")},0),o}return e.createEditor(i,n,r)}}})}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12),i(2),i(4),i(23)],r=function(e,t){"use strict";return{requires:{editing:{editors:{int:function(e,i,n){var r=t("<input>").w2field("int",{autoFormat:!0,groupSymbol:i18n("groupingSeparator"),decimalSymbol:i18n("decimalSeparator")});r.val(n);var s=r.data("w2field"),o=r.val.bind(r);return r.val=function(e){return s.clean(o())},r}}}}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12),i(2),i(4)],r=function(e,t){"use strict";return{requires:{editing:{editors:{option:function e(i,n,r){var s=t("<select>"),o=t("<option>");o.text(""),o.value(null),s.append(o);for(var a=0;a<n.options.length;a++){o=t("<option>");var e=n.options[a];o.text(e.label),o.value(e.value),r===e.value&&o.attr("selected",""),s.append(o)}return s}}}}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12),i(2),i(4),i(28),i(29)],r=function(e,t,i,n,r){"use strict";function s(e){var i=this;this.delegate=e,t(e).on("dataloaded",function(e){i.reload(),t(i).trigger("dataloaded")}).on("datachanged",function(e,n){i.reload(),t(i).trigger("datachanged",[n])}),e.isReady()&&this.reload(),"function"==typeof e.sort&&(this.sort=e.sort.bind(e))}return s.prototype={view:null,isReady:function(){return null!=this.view},reload:function(){this.delegate.assertReady(),this.view=this.delegate.getData()},recordCount:function(){return this.assertReady(),this.view.length},getData:function(e,t){return this.assertReady(),e||t?(e||(e=0),t||(t=this.recordCount()),this.view.slice(e,t)):this.view},setValue:function(e,t,i){this.delegate.setValue(e,t,i)},assertReady:function(){if(!this.isReady())throw Error("Datasource not ready yet")},buildStatistics:function(){return{actualRecordCount:this.delegate&&this.delegate.recordCount()}},applyFilter:function(e,i){var n=this.view,r=this.delegate.getData().filter(i);this.view=r,t(this).trigger("datachanged",{data:r,oldData:n})},getRecordById:function(e){return this.delegate.getRecordById(e)}},{init:function(o,a){return e(o,function(e){var a,l={};return{init:function(){"function"!=typeof this.dataSource.applyFilter&&(this.dataSource=new s(this.dataSource)),e.init(),this.container.on("click",".pg-filter",function(e){var i=t(this),n=i.parents(".pg-columnheader").attr("data-column-key"),r=o.getColumnForKey(n);a&&o.filtering.closeFilterPane(),a=t("<div class='pg-filter-pane'>"),o.filtering.renderFilterPane(a,r),a.css("top",i.offset().top+"px").css("left",i.offset().left+"px"),t("body").append(a),e.preventDefault(),e.stopPropagation()}),t("body").on("click."+this.id,function(e){a&&t(this).parents(".pg-filter-pane").empty()&&o.filtering.closeFilterPane()}),this.container.on("click mousedown",".pg-filter-box",function(e){e.stopPropagation()})},destroy:function(){e.destroy(),t("body").off("click."+this.id)},renderHeaderCell:function(t,i){var n=e.renderHeaderCell(t,i);if(void 0===t.filterable||t.filterable){n.addClass("pg-filterable"),n.append(r);var s;n.on("keyup",".pg-filter-input",function(e){var i=this;s&&clearTimeout(s),s=setTimeout(function(){o.filtering.setColumnFilteringAttribute(t.key,{value:i.value}),s=null},1e3)})}return n},filterHeight:function(){return Math.max.apply(void 0,this.target.find(".pg-columnheader .pg-filter-box").map(function(e,i){return t(i).outerHeight()}))},headerHeight:function(){return e.headerHeight()+this.filterHeight()},filtering:{renderFilterPane:function(e,i){e.html(n),e.on("click","[data-filter-method],[data-filter-type]",function(e){o.filtering.setColumnFilteringAttribute(i.key,{method:t(this).attr("data-filter-method"),type:t(this).attr("data-filter-type")}),o.filtering.closeFilterPane()})},closeFilterPane:function(){a.remove(),a=null},filter:function(e){o.dataSource.applyFilter(e,e&&this.rowMatches.bind(this,e))},rowMatches:function(e,t){for(var n in e)if(this.valueMatches(e[n],i.getValue(t,n))){if("exclusive"==e[n].type)return-1}else if("inclusive"==e[n].type)return 0;return 1},valueMatches:function(e,t){var i=void 0!==t&&null!==t&&""!==t;switch(e.method){case"contains":return!e.value||i&&t.toLocaleUpperCase().indexOf(e.value.toLocaleUpperCase())>-1;case"beginsWith":return!e.value||i&&t.length>=e.value.length&&t.substring(0,e.value.length).toLocaleUpperCase()==e.value.toLocaleUpperCase();case"endsWith":return!e.value||i&&t.length>=e.value.length&&t.substring(t.length-e.value.length).toLocaleUpperCase()==e.value.toLocaleUpperCase();default:throw"Unsupported filter operator "+e.type}},setColumnFilteringAttribute:function(e,i){l[e]||(l[e]=this.createDefaultFiltering(e)),t.extend(l[e],i),this.filter(l)},createDefaultFiltering:function(e){return{value:"",method:"contains",type:"inclusive"}}}}})}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t){e.exports="<ul class=pg-menu> <li data-filter-method=contains data-filter-type=inclusive>Contains</li> <li data-filter-method=beginsWith data-filter-type=inclusive>Begins with</li> <li data-filter-method=endsWith data-filter-type=inclusive>Ends with</li> <li data-filter-method=contains data-filter-type=exclusive>Does not contain</li> <li data-filter-method=beginsWith data-filter-type=exclusive>Does not begin with</li> <li data-filter-method=endsWith data-filter-type=exclusive>Does not end with</li> </ul>"},function(e,t){e.exports="<div class=pg-filter-box> <div class=pg-filter></div> <input class=pg-filter-input /> </div>"},function(e,t,i){var n,r;n=[i(12),i(2),i(4)],r=function(e,t){"use strict";return function(t,i){e(t,function(e){return{getCellTextValue:function(n,r,s){var o=s.formatter;return"string"==typeof s.formatter&&(o=i[s.formatter]),o?o.apply(t,[n,r,s]):e.getCellTextValue.apply(this,arguments)}}})}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12),i(4),i(2),i(33),i(34),i(32),i(35),i(36),i(37),i(38)],r=function(e,t,i,n,r,s,o,a,l,d){"use strict";return{conflicts:["treegrid"],requires:{dragging:{allowDragOutsideOfViewPort:!0},treegrid:{autoTreeDataSource:!1}},init:function(n,u){var c="function"==typeof n.dataSource.group?n.dataSource:new o(n.dataSource),h=new r.TreeGridDataSource(c),p=i.templates(l),f=i.templates(d);return n.dataSource=h,e(n,function(e){return{init:function(){e.init();var r,s=n.loadSetting("grouping");s&&0!=s.length||!u.defaultGroupedColumns||(s=u.defaultGroupedColumns),u.fixedGroupedColumns&&(this.grouping.fixedGroups=u.fixedGroupedColumns.map(this.getColumnForKey.bind(this))),s&&(u.fixedGroupedColumns&&(s=s.filter(function(e){return u.fixedGroupedColumns.indexOf(e)==-1})),r=s.map(this.getColumnForKey.bind(this)),void 0!==r&&null!==r&&""!==r&&(this.grouping.groups=r)),this.grouping.updateGroups(),this.container.on("click",".pg-grouping-grouptoggle",function(e){var t=this,n=i(t).attr("data-id");h.toggle(n)});var o=i(a);this.columnheadercontainer.addClass("pg-grouping-enabled").prepend(o),this.grouping.groups&&(this.grouping.fixedGroups.forEach(function(e){o.append(n.grouping.renderGroupIndicator(e,!1))}),this.grouping.groups.forEach(function(e){o.append(n.grouping.renderGroupIndicator(e,!0))})),o.on("click",".pg-group-delete",function(e){n.grouping.removeGroupBy(n.getColumnForKey(i(this).attr("data-group-key"))),e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()}).on("mousedown",".pg-group-delete",t.cancelEvent),this.grouping.initReordering(o),this.grouping.grouper=o,o.on("columndropped",function(e){n.grouping.addGroupBy(e.column)}).on("columndragenter",function(e){n.grouping.groupColumns().indexOf(e.column)>-1&&e.preventDefault()})},headerContainerHeight:function(){return e.headerContainerHeight()+this.target.find(".pg-grouper").outerHeight()},renderRowToParts:function(t,n,r,s,o){if(t.groupRow){var a=r||s||o;i(a).addClass("pg-grouping-grouprow");var l=document.createElement("span");l.className="pg-grouping-grouptoggle pg-tree-level-"+t._groupLevel,l.setAttribute("data-id",t.id),i(a).empty().append(l).append((u.renderGroupRow||this.grouping.renderGroupRow)(t._groupColumn,t))}else e.renderRowToParts(t,n,r,s,o)},grouping:{groups:[],fixedGroups:[],initReordering:function(e){new s(e,".pg-group-indicator",".pg-group-indicator");var t;e.on("customdragstart",function(e){}).on("customdragover",".pg-group-indicator",function(r){var s=i(this).attr("data-group-key"),o=i(r.dragee).attr("data-group-key"),a=(t||n.grouping.groups).map(function(e){return e.key}),l=a.indexOf(s),d=a.indexOf(o);l<d&&r.pageX<i(this).offset().left+i(r.dragee).outerWidth()?i(this).before(r.dragee.detach()):d<l&&i(this).after(r.dragee.detach()),t=e.children(".pg-group-indicator").map(function(e,t){return n.getColumnForKey(i(t).attr("data-group-key"))}).toArray()}).on("customdragend",".pg-group-indicator",function(e){void 0!==t&&(n.grouping.groups=t,n.grouping.updateGroups(),t=void 0)})},addGroupBy:function(e){this.groups.push(e),this.grouper.append(this.renderGroupIndicator(e,!0)),this.updateGroups()},removeGroupBy:function(e){var t=this.grouper.find(".pg-group-indicator[data-group-key='"+e.key+"']");t.remove(),this.groups.splice(this.groups.indexOf(e),1),this.updateGroups()},updateGroups:function(){var e=this.groupColumns();c.group(e),n.trigger("groupingchanged",this.groups),n.target.attr("data-group-leaf-level",e.length),c.isReady()&&n.renderData(),n.saveSetting("grouping",this.groups.map(function(e){return e.key}))},renderGroupIndicator:function(e,t){return f.render(e,{removable:t})},renderGroupRow:function(e,t){return i(p.render(t,{column:t._groupColumn}))},groupColumns:function(){return this.fixedGroups.concat(this.groups)}}}})}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(2)],r=function(e){"use strict";function t(t,i,n){var r,s,o,a,l,d,u,c;e(t).on("mousedown",i,function(i){r=e(this);var i=new e.Event("customdragstart",{dragee:r,pageX:i.pageX,pageY:i.pageY});r.trigger(i),i.isDefaultPrevented()?r=void 0:(s=i.pageX,o=i.pageY,d=r.offset(),a=e(t).find(n),u=0,c=0)}),e(window).on("mousemove",function(t){if(void 0!==r){for(var i,n=0,h=a.length;n<h;n++)if(a[n]!==r[0]){var p=e(a[n]),f=p.offset();if(t.pageX>=f.left&&t.pageY>=f.top&&t.pageX<f.left+p.outerWidth()&&t.pageY<f.top+p.outerHeight()){if(p[0]===l)break;var t=new e.Event("customdragover",{pageX:t.pageX,pageY:t.pageY,dragee:r});if(p.trigger(t),!t.isDefaultPrevented()){i=p[0];break}}}l=i;var g=e(r).offset();r.css("transform","translate("+(u=t.pageX-s+d.left-g.left+u)+"px, "+(c=t.pageY-o+d.top-g.top+c)+"px)")}}).on("mouseup",function(t){if(void 0!==r){if(void 0!==l){var t=new e.Event("customdrop",{pageX:t.pageX,pageY:t.pageY,dragee:r});e(l).trigger(t)}r.trigger(e.Event("customdragend",{pageX:t.pageX,pageY:t.pageY,dragee:r})),r.css("transform",""),r=void 0}})}return t}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){/*! JsRender v0.9.84 (Beta): http://jsviews.com/#jsrender */
/*! **VERSION FOR WEB** (For NODE.JS see http://jsviews.com/download/jsrender-node.js) */
!function(t,i){var n=i.jQuery;e.exports=n?t(i,n):function(e){if(e&&!e.fn)throw"Provide jQuery or null";return t(i,e)}}(function(e,t){"use strict";function i(e,t){return function(){var i,n=this,r=n.base;return n.base=e,i=t.apply(n,arguments),n.base=r,i}}function n(e,t){return ne(t)&&(t=i(e?e._d?e:i(o,e):o,t),t._d=1),t}function r(e,t){for(var i in t.props)je.test(i)&&(e[i]=n(e.constructor.prototype[i],t.props[i]))}function s(e){return e}function o(){return""}function a(e){try{throw console.log("JsRender dbg breakpoint: "+e),"dbg breakpoint"}catch(e){}return this.base?this.baseApply(arguments):e}function l(e){this.name=(t.link?"JsViews":"JsRender")+" Error",this.message=e||this.name}function d(e,t){for(var i in t)e[i]=t[i];return e}function u(e,t,i){return e?re(e)?u.apply(te,e):(ue.delimiters=[e,t,ve=i?i.charAt(0):ve],pe=e.charAt(0),fe=e.charAt(1),ge=t.charAt(0),me=t.charAt(1),e="\\"+pe+"(\\"+ve+")?\\"+fe,t="\\"+ge+"\\"+me,Z="(?:(\\w+(?=[\\/\\s\\"+ge+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+ge+"]|\\"+ge+"(?!\\"+me+"))*?)",de.rTag="(?:"+Z+")",Z=new RegExp("(?:"+e+Z+"(\\/)?|\\"+pe+"(\\"+ve+")?\\"+fe+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+t,"g"),de.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+e+".*"+t),he):ue.delimiters}function c(e,t){t||e===!0||(t=e,e=void 0);var i,n,r,s,o=this,a=!t||"root"===t;if(e){if(s=t&&o.type===t&&o,!s)if(i=o.views,o._.useKey){for(n in i)if(s=t?i[n].get(e,t):i[n])break}else for(n=0,r=i.length;!s&&n<r;n++)s=t?i[n].get(e,t):i[n]}else if(a)for(;o.parent;)s=o,o=o.parent;else for(;o&&!s;)s=o.type===t?o:void 0,o=o.parent;return s}function h(){var e=this.get("item");return e?e.index:void 0}function p(){return this.index}function f(t,i){var n,r,s=this,o=s.ctx;if(o&&(o=o[t]),void 0===o&&(o=ae[t]),o&&o._cp){if(i)return r=o[1]?de._ceo(o[1].deps):["_jsvCp"],r.unshift(o[0]),r._cp=o._cp,r;o=te.getCtx(o)}return o&&ne(o)&&!o._wrp&&(n=function(){return o.apply(this&&this!==e?this:s,arguments)},n._wrp=s,d(n,o)),n||o}function g(e){return e&&(e.fn?e:this.getRsc("templates",e)||se(e))}function m(e,t,i,n){var s,o,a="number"==typeof i&&t.tmpl.bnds[i-1],l=t.linkCtx;return void 0===n&&a&&a._lr&&(n=""),void 0!==n?i=n={props:{},args:[n]}:a&&(i=a(t.data,t,de)),a=a._bd&&a,o=i.args[0],(e||a)&&(s=l&&l.tag,s||(s=d(new de._tg,{_:{inline:!l,bnd:a,unlinked:!0},tagName:":",cvt:e,flow:!0,tagCtx:i}),l&&(l.tag=s,s.linkCtx=l),i.ctx=X(i.ctx,(l?l.view:t).ctx)),s._er=n&&o,r(s,i),i.view=t,s.ctx=i.ctx||s.ctx||{},i.ctx=void 0,o=s.cvtArgs("true"!==e&&e)[0]),o=a&&t._.onRender?t._.onRender(o,t,s):o,void 0!=o?o:""}function v(e,t){var i,n,r,s=this,o=s.tagCtx,a=o.args,l=s.bindTo;if(e=e||s.convert,""+e===e&&(e=o.view.getRsc("converters",e)||F("Unknown converter: '"+e+"'")),a.length||s.argDefault===!1||o.index?e&&!t&&(a=a.slice()):a=[o.view.data],l){for(r=[],i=l.length;i--;)n=l[i],r.unshift(y(o,n));t&&(a=r)}if(e)if(l=l||[0],e=e.apply(s,r||a),i=l.length,i<2&&(e=[e]),t)a=e;else for(;i--;)n=l[i],+n===n&&(a[n]=e?e[i]:void 0);return a}function y(e,t){return e=e[+t===t?"args":"props"],e&&e[t]}function w(){return this.cvtArgs(void 0,!0)}function b(e,t){for(var i,n,r=this;void 0===i&&r;)n=r.tmpl&&r.tmpl[e],i=n&&n[t],r=r.parent;return i||te[e][t]}function x(e,t,i){var n=this;n.ctx[t]=de._cp(y(n,e),y(n.params,e),n.view,i)}function _(e,i,n,s,o,a){i=i||ee;var l,d,u,c,h,p,f,g,m,v,y,w,b,_,$,k,C,T,S,D,R,z,j,E=0,O="",I=i.linkCtx||0,N=i.ctx,L=n||i.tmpl,H="number"==typeof s&&i.tmpl.bnds[s-1];for("tag"===e._is?(l=e,e=l.tagName,s=l.tagCtxs,u=l.template):(d=i.getRsc("tags",e)||F("Unknown tag: {{"+e+"}} "),u=d.template),void 0===a&&H&&H._lr&&(a=""),void 0!==a?(O+=a,s=a=[{props:{},args:[]}]):H&&(s=H(i.data,i,de)),f=s.length;E<f;E++)v=s[E],(!I||!I.tag||E&&!I.tag._.inline||l._er)&&((_=L.tmpls&&v.tmpl)&&(_=v.content=L.tmpls[_-1]),v.index=E,v.tmpl=_,v.render=A,v.ctxPrm=x,v.view=i,v.ctx=X(v.ctx,N)),(n=v.props.tmpl)&&(v.tmpl=i.getTmpl(n)),l||(l=new d._ctr,$=!!l.init,l.parent=p=N&&N.tag,l.tagCtxs=s,R=l.dataMap,I&&(l._.inline=!1,I.tag=l,l.linkCtx=I),(l._.bnd=H||I.fn)?l._.arrVws={}:l.dataBoundOnly&&F("{^{"+e+"}} tag must be data-bound")),b=l.bindTo||[0],s=l.tagCtxs,R=l.dataMap,v.tag=l,R&&s&&(v.map=s[E].map),l.flow||(y=v.ctx=v.ctx||{},c=l.parents=y.parentTags=N&&X(y.parentTags,N.parentTags)||{},p&&(c[p.tagName]=p),c[l.tagName]=y.tag=l);if(!(l._er=a)){for(r(l,s[0]),l.rendering={},E=0;E<f;E++){if(v=l.tagCtx=s[E],S=v.props,T=l.cvtArgs(),l.linkedCtxParam)for(g=b.length;g--;)(w=l.linkedCtxParam[g])&&(j=b[g],v.ctxPrm(j,w,{tag:l,ind:g}));(k=S.dataMap||R)&&(T.length||S.dataMap)&&(C=v.map,C&&C.src===T[0]&&!o||(C&&C.src&&C.unmap(),C=v.map=k.map(T[0],S,void 0,!l._.bnd)),T=[C.tgt]),l.ctx=v.ctx,E||($&&(D=l.template,l.init(v,I,l.ctx),$=void 0),I&&(I.attr=l.attr=I.attr||l.attr),h=l.attr,l._.noVws=h&&h!==Me),m=void 0,l.render&&(m=l.render.apply(l,T),i.linked&&m&&l.linkedElem&&!Ee.test(m)&&(m=M(t.templates(m),T[0],void 0,void 0,i,void 0,void 0,l))),T.length||(T=[i]),void 0===m&&(z=T[0],l.contentCtx&&(z=l.contentCtx===!0?i:l.contentCtx(z)),m=v.render(z,!0)||(o?void 0:"")),O=O?O+(m||""):m}l.rendering=void 0}return l.tagCtx=s[0],l.ctx=l.tagCtx.ctx,l._.noVws&&l._.inline&&(O="text"===h?oe.html(O):""),H&&i._.onRender?i._.onRender(O,i,l):O}function $(e,t,i,n,r,s,o,a){var l,d,u,c=this,p="array"===t;c.content=a,c.views=p?[]:{},c.parent=i,c.type=t||"top",c.data=n,c.tmpl=r,u=c._={key:0,useKey:p?0:1,id:""+Ie++,onRender:o,bnds:{}},c.linked=!!o,i?(l=i.views,d=i._,d.useKey?(l[u.key="_"+d.useKey++]=c,c.index=He,c.getIndex=h):l.length===(u.key=c.index=s)?l.push(c):l.splice(s,0,c),c.ctx=e||i.ctx):c.ctx=e}function k(e){var t,i,n;for(t in Ve)i=t+"s",e[i]&&(n=e[i],e[i]={},te[i](n,e))}function C(e,t,i){function r(){var t=this;t._={inline:!0,unlinked:!0},t.tagName=e}function s(e){var i;(i=t[e])&&(t[e]=i=re(i)?i:[i],(h||1)!==i.length&&F(e+" length not same as bindTo "))}var o,a,l,u,c,h,p=t.bindTo,f=new de._tg;if(ne(t)?t={depends:t.depends,render:t}:""+t===t&&(t={template:t}),void 0!==p)for(p=t.bindTo=re(p)?p:[p],u=h=p.length;u--;)c=p[u],isNaN(parseInt(c))||(c=parseInt(c)),p[u]=c;if(s("linkedElement"),s("linkedCtxParam"),a=t.baseTag){t.flow=!!t.flow,t.baseTag=a=""+a===a?i&&i.tags[a]||le[a]:a,f=d(f,a);for(l in t)f[l]=n(a[l],t[l])}else f=d(f,t);return void 0!==(o=f.template)&&(f.template=""+o===o?se[o]||se(o):o),(r.prototype=f).constructor=f._ctr=r,i&&(f._parentTmpl=i),f}function T(e){return this.base.apply(this,e)}function S(e,i,n,r){function s(i){var s,a;if(""+i===i||i.nodeType>0&&(o=i)){if(!o)if(/^\.\/[^\\:*?"<>]*$/.test(i))(a=se[e=e||i])?i=a:o=document.getElementById(i);else if(t.fn&&!de.rTmpl.test(i))try{o=t(i,document)[0]}catch(e){}o&&(r?i=o.innerHTML:(s=o.getAttribute(Fe),s&&(s!==Le?(i=se[s],delete se[s]):t.fn&&(i=t.data(o)[Le])),s&&i||(e=e||(t.fn?Le:i),i=S(e,o.innerHTML,n,r)),i.tmplName=e=e||s,e!==Le&&(se[e]=i),o.setAttribute(Fe,e),t.fn&&t.data(o,Le,i))),o=void 0}else i.fn||(i=void 0);return i}var o,a,l=i=i||"";if(0===r&&(r=void 0,l=s(l)),r=r||(i.markup?i:{}),r.tmplName=e,n&&(r._parentTmpl=n),!l&&i.markup&&(l=s(i.markup))&&l.fn&&(l=l.markup),void 0!==l)return l.fn||i.fn?l.fn&&(a=l):(i=j(l,r),H(l.replace(Ce,"\\$&"),i)),a||(a=d(function(){return a.render.apply(a,arguments)},i),k(a)),a}function D(e,i){return t.isFunction(e)?e.call(i):e}function R(e){for(var t=[],i=0,n=e.length;i<n;i++)t.push(e[i].unmap());return t}function z(e,i){function n(e){u.apply(this,e)}function r(){return new n(arguments)}function s(e,t){for(var i,n,r,s,o=0;o<y;o++)r=h[o],i=void 0,r+""!==r&&(i=r,r=i.getter),void 0===(s=e[r])&&i&&void 0!==(n=i.defaultVal)&&(s=D(n,e)),t(s,i&&c[i.type],r)}function o(t){t=t+""===t?JSON.parse(t):t;var i,n,r=0,o=t,d=[];if(re(t)){for(t=t||[],i=t.length;r<i;r++)d.push(this.map(t[r]));return d._is=e,d.unmap=l,d.merge=a,d}if(t){s(t,function(e,t){t&&(e=t.map(e)),d.push(e)}),o=this.apply(this,d);for(n in t)n===ie||b[n]||(o[n]=t[n])}return o}function a(e){e=e+""===e?JSON.parse(e):e;var t,i,n,o,a,l,d,u,c,h=0,p=this;if(re(p)){for(d={},c=[],i=e.length,n=p.length;h<i;h++){for(u=e[h],l=!1,t=0;t<n&&!l;t++)d[t]||(a=p[t],f&&(d[t]=l=f+""===f?u[f]&&(b[f]?a[f]():a[f])===u[f]:f(a,u)));l?(a.merge(u),c.push(a)):c.push(r.map(u))}return void(w?w(p).refresh(c,!0):p.splice.apply(p,[0,p.length].concat(c)))}s(e,function(e,t,i){t?p[i]().merge(e):p[i](e)});for(o in e)o===ie||b[o]||(p[o]=e[o])}function l(){var e,i,n,r,s=0,o=this;if(re(o))return R(o);for(e={};s<y;s++)i=h[s],n=void 0,i+""!==i&&(n=i,i=n.getter),r=o[i](),e[i]=n&&r&&c[n.type]?re(r)?R(r):r.unmap():r;for(i in o)"_is"===i||b[i]||i===ie||"_"===i.charAt(0)&&b[i.slice(1)]||t.isFunction(o[i])||(e[i]=o[i]);return e}var d,u,c=this,h=i.getters,p=i.extend,f=i.id,g=t.extend({_is:e||"unnamed",unmap:l,merge:a},p),m="",v="",y=h?h.length:0,w=t.observable,b={};for(n.prototype=g,d=0;d<y;d++)!function(e){e=e.getter||e,b[e]=d+1;var t="_"+e;m+=(m?",":"")+e,v+="this."+t+" = "+e+";\n",g[e]=g[e]||function(i){return arguments.length?void(w?w(this).setProperty(e,i):this[t]=i):this[t]},w&&(g[e].set=g[e].set||function(e){this[t]=e})}(h[d]);return u=new Function(m,v.slice(0,-1)),u.prototype=g,g.constructor=u,r.map=o,r.getters=h,r.extend=p,r.id=f,r}function j(e,i){var n,r=ce._wm||{},s=d({tmpls:[],links:{},bnds:[],_is:"template",render:A},i);return s.markup=e,i.htmlTag||(n=De.exec(e),s.htmlTag=n?n[1].toLowerCase():""),n=r[s.htmlTag],n&&n!==r.div&&(s.markup=t.trim(s.markup)),s}function E(e,t){function i(r,s,o){var a,l,d,u=de.onStore[e];if(r&&typeof r===Ne&&!r.nodeType&&!r.markup&&!r.getTgt&&!("viewModel"===e&&r.getters||r.extend)){for(l in r)i(l,r[l],s);return s||te}return void 0===s&&(s=r,r=void 0),r&&""+r!==r&&(o=s,s=r,r=void 0),d=o?"viewModel"===e?o:o[n]=o[n]||{}:i,a=t.compile,null===s?r&&delete d[r]:(a&&(s=a.call(d,r,s,o,0),s._is=e),r&&(d[r]=s)),u&&u(r,s,o,a),s}var n=e+"s";te[n]=i}function O(e){he[e]=function(t){return arguments.length?(ue[e]=t,he):ue[e]}}function I(e){function t(t,i){this.tgt=e.getTgt(t,i)}return ne(e)&&(e={getTgt:e}),e.baseMap&&(e=d(d({},e.baseMap),e)),e.map=function(e,i){return new t(e,i)},e}function A(e,t,i,n,r,s){var o,a,l,d,u,c,h,p,f=n,g="";if(t===!0?(i=t,t=void 0):typeof t!==Ne&&(t=void 0),(l=this.tag)?(u=this,f=f||u.view,d=f.getTmpl(l.template||u.tmpl),arguments.length||(e=f)):d=this,d){if(!n&&e&&"view"===e._is&&(f=e),f&&e===f&&(e=f.data),c=!f,we=we||c,f||((t=t||{}).root=e),!we||ce.useViews||d.useViews||f&&f!==ee)g=M(d,e,t,i,f,r,s,l);else{if(f?(h=f.data,p=f.index,f.index=He):(f=ee,f.data=e,f.ctx=t),re(e)&&!i)for(o=0,a=e.length;o<a;o++)f.index=o,f.data=e[o],g+=d.fn(e[o],f,de);else f.data=e,g+=d.fn(e,f,de);f.data=h,f.index=p}c&&(we=void 0)}return g}function M(e,t,i,n,r,s,o,a){function l(e){b=d({},i),b[w]=e}var u,c,h,p,f,g,m,v,y,w,b,x,_="";if(a&&(y=a.tagName,x=a.tagCtx,i=i?X(i,a.ctx):a.ctx,e===r.content?m=e!==r.ctx._wrp?r.ctx._wrp:void 0:e!==x.content?e===a.template?(m=x.tmpl,i._wrp=x.content):m=x.content||r.content:m=r.content,x.props.link===!1&&(i=i||{},i.link=!1),(w=x.props.itemVar)&&("~"!==w.charAt(0)&&L("Use itemVar='~myItem'"),w=w.slice(1))),r&&(o=o||r._.onRender,i=X(i,r.ctx)),s===!0&&(g=!0,s=0),o&&(i&&i.link===!1||a&&a._.noVws)&&(o=void 0),v=o,o===!0&&(v=void 0,o=r._.onRender),i=e.helpers?X(e.helpers,i):i,b=i,re(t)&&!n)for(h=g?r:void 0!==s&&r||new $(i,"array",r,t,e,s,o,m),r&&r._.useKey&&(h._.bnd=!a||a._.bnd&&a),w&&(h.it=w),w=h.it,u=0,c=t.length;u<c;u++)w&&l(t[u]),p=new $(b,"item",h,t[u],e,(s||0)+u,o,h.content),f=e.fn(t[u],p,de),_+=h._.onRender?h._.onRender(f,p):f;else w&&l(t),h=g?r:new $(b,y||"data",r,t,e,s,o,m),a&&!a.flow&&(h.tag=a,a.view=h),_+=e.fn(t,h,de);return v?v(_,h):_}function N(e,t,i){var n=void 0!==i?ne(i)?i.call(t.data,e,t):i||"":"{Error: "+(e.message||e)+"}";return ue.onError&&void 0!==(i=ue.onError.call(t.data,e,i&&n,t))&&(n=i),t&&!t.linkCtx?oe.html(n):n}function F(e){throw new de.Err(e)}function L(e){F("Syntax error\n"+e)}function H(e,t,i,n,r){function s(t){t-=g,t&&v.push(e.substr(g,t).replace($e,"\\n"))}function o(t,i){t&&(t+="}}",L((i?"{{"+i+"}} block has {{/"+t+" without {{"+t:"Unmatched or missing {{/"+t)+", in template:\n"+e))}function a(a,l,d,h,f,w,b,x,_,$,k,C){(b&&l||_&&!d||x&&":"===x.slice(-1)||$)&&L(a),w&&(f=":",h=Me),_=_||i&&!r;var T,S=(l||i)&&[[]],D="",R="",z="",j="",E="",O="",I="",A="",M=!_&&!f;d=d||(x=x||"#data",f),s(C),g=C+a.length,b?p&&v.push(["*","\n"+x.replace(/^:/,"ret+= ").replace(ke,"$1")+";\n"]):d?("else"===d&&(Se.test(x)&&L('for "{{else if expr}}" use "{{else expr}}"'),S=y[8]&&[[]],y[9]=e.substring(y[9],C),y=m.pop(),v=y[2],M=!0),x&&V(x.replace($e," "),S,t).replace(Te,function(e,t,i,n,r,s,o,a){return n="'"+r+"':",o?(R+=s+",",j+="'"+a+"',"):i?(z+=n+"j._cp("+s+',"'+a+'",view),',O+=n+"'"+a+"',"):t?I+=s:("trigger"===r&&(A+=s),"lateRender"===r&&(T=1),D+=n+s+",",E+=n+"'"+a+"',",c=c||je.test(r)),""}).slice(0,-1),S&&S[0]&&S.pop(),u=[d,h||!!n||c||"",M&&[],B(j||(":"===d?"'#data',":""),E,O),B(R||(":"===d?"data,":""),D,z),I,A,T,S||0],v.push(u),M&&(m.push(y),y=u,y[9]=g)):k&&(o(k!==y[0]&&"else"!==y[0]&&k,y[0]),y[9]=e.substring(y[9],C),y=m.pop()),o(!y&&k),v=y[2]}var l,d,u,c,h,p=ue.allowCode||t&&t.allowCode||he.allowCode===!0,f=[],g=0,m=[],v=f,y=[,,f];if(p&&t._is&&(t.allowCode=p),i&&(void 0!==n&&(e=e.slice(0,-n.length-2)+ge),e=pe+e+me),o(m[0]&&m[0][2].pop()[0]),e.replace(Z,a),s(e.length),(g=f[f.length-1])&&o(""+g!==g&&+g[9]===g[9]&&g[0]),i){for(d=Y(f,e,i),h=[],l=f.length;l--;)h.unshift(f[l][8]);P(d,h)}else d=Y(f,t);return d}function P(e,t){var i,n,r=0,s=t.length;for(e.deps=[],e.paths=[];r<s;r++){e.paths.push(n=t[r]);for(i in n)"_jsvto"!==i&&n.hasOwnProperty(i)&&n[i].length&&!n[i].skp&&(e.deps=e.deps.concat(n[i]))}}function B(e,t,i){return[e.slice(0,-1),t.slice(0,-1),i.slice(0,-1)]}function q(e,t){return"\n\t"+(t?t+":{":"")+"args:["+e[0]+"]"+(e[1]||!t?",\n\tprops:{"+e[1]+"}":"")+(e[2]?",\n\tctx:{"+e[2]+"}":"")}function V(e,t,i){function n(n,v,y,w,b,x,_,$,k,C,T,S,D,R,z,j,E,O,I,A){function M(e,i,n,o,a,l,c,h){var p="."===n;if(n&&(b=b.slice(i.length),/^\.?constructor$/.test(h||b)&&L(e),p||(e=(o?'view.hlp("'+o+'")':a?"view":"data")+(h?(l?"."+l:o?"":a?"":"."+n)+(c||""):(h=o?"":a?l||"":n,"")),e+=h?"."+h:"",e=i+("view.data"===e.slice(0,9)?e.slice(5):e)),d)){if(P="linkTo"===r?s=t._jsvto=t._jsvto||[]:u.bd,B=p&&P[P.length-1]){if(B._jsv){for(;B.sb;)B=B.sb;B.bnd&&(b="^"+b.slice(1)),B.sb=b,B.bnd=B.bnd||"^"===b.charAt(0)}}else P.push(b);m[f]=I+(p?1:0)}return e}w&&!$&&(b=w+b),x=x||"",y=y||v||S,b=b||k,C=C||E||"";var N,F,P,B,q,V=")";if("["===C&&(C="[j._sq(",V=")]"),!_||l||a){if(d&&j&&!l&&!a&&(!r||o||s)&&(N=m[f-1],A.length-1>I-(N||0))){if(N=A.slice(N,I+n.length),F!==!0)if(P=s||c[f-1].bd,B=P[P.length-1],B&&B.prm){for(;B.sb&&B.sb.prm;)B=B.sb;q=B.sb={path:B.sb,bnd:B.bnd}}else P.push(q={path:P.pop()});j=fe+":"+N+" onerror=''"+ge,F=p[j],F||(p[j]=!0,p[j]=F=H(j,i,!0)),F!==!0&&q&&(q._jsv=F,q.prm=u.bd,q.bnd=q.bnd||q.path&&q.path.indexOf("^")>=0)}return l?(l=!D,l?n:S+'"'):a?(a=!R,a?n:S+'"'):(y?(m[f]=I++,u=c[++f]={bd:[]},y):"")+(O?f?"":(h=A.slice(h,I),(r?(r=o=s=!1,"\b"):"\b,")+h+(h=I+n.length,d&&t.push(u.bd=[]),"\b")):$?(f&&L(e),d&&t.pop(),r=b,o=w,h=I+n.length,d&&(d=u.bd=t[r]=[],d.skp=!w),b+":"):b?b.split("^").join(".").replace(xe,M)+(C?(u=c[++f]={bd:[]},g[f]=V,C):x):x?x:z?(z=g[f]||z,g[f]=!1,u=c[--f],z+(C?(u=c[++f],g[f]=V,C):"")):T?(g[f]||L(e),","):v?"":(l=D,a=R,'"'))}L(e)}var r,s,o,a,l,d=t&&t[0],u={bd:d},c={0:u},h=0,p=(i?i.links:d&&(d.links=d.links||{}))||ee.tmpl.links,f=0,g={},m={},v=(e+(i?" ":"")).replace(_e,n);return!f&&v||L(e)}function Y(e,t,i){var n,r,s,o,a,l,d,u,c,h,p,f,g,m,v,y,w,b,x,_,$,k,C,T,S,D,R,z,E,O,I,A=0,M=ce.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters,N="",F={},H=e.length;for(""+t===t?(b=i?'data-link="'+t.replace($e," ").slice(1,-1)+'"':t,t=0):(b=t.tmplName||"unnamed",t.allowCode&&(F.allowCode=!0),t.debug&&(F.debug=!0),p=t.bnds,w=t.tmpls),n=0;n<H;n++)if(r=e[n],""+r===r)N+='\n+"'+r+'"';else if(s=r[0],"*"===s)N+=";\n"+r[1]+"\nret=ret";else{if(o=r[1],$=!i&&r[2],a=q(r[3],"params")+"},"+q(g=r[4]),z=r[5],O=r[6],I=r[7],k=r[9]&&r[9].replace(ke,"$1"),(S="else"===s)?f&&f.push(r[8]):p&&(f=r[8])&&(f=[f],A=p.push(1)),M=M||g[1]||g[2]||f||/view.(?!index)/.test(g[0]),(D=":"===s)?o&&(s=o===Me?">":o+s):($&&(x=j(k,F),x.tmplName=b+"/"+s,x.useViews=x.useViews||M,Y($,x),M=x.useViews,w.push(x)),S||(_=s,M=M||s&&(!le[s]||!le[s].flow),T=N,N=""),C=e[n+1],C=C&&"else"===C[0]),E=z?";\ntry{\nret+=":"\n+",m="",v="",D&&(f||O||o&&o!==Me||I)){if(R=new Function("data,view,j,u","// "+b+" "+ ++A+" "+s+"\nreturn {"+a+"};"),R._er=z,R._tag=s,R._bd=!!f,R._lr=I,i)return R;P(R,f),y='c("'+o+'",view,',h=!0,m=y+A+",",v=")"}if(N+=D?(i?(z?"try{\n":"")+"return ":E)+(h?(h=void 0,M=c=!0,y+(R?(p[A-1]=R,A):"{"+a+"}")+")"):">"===s?(d=!0,"h("+g[0]+")"):(u=!0,"((v="+g[0]+")!=null?v:"+(i?"null)":'"")'))):(l=!0,"\n{view:view,tmpl:"+($?w.length:"0")+","+a+"},"),_&&!C){if(N="["+N.slice(0,-1)+"]",y='t("'+_+'",view,this,',i||f){if(N=new Function("data,view,j,u"," // "+b+" "+A+" "+_+"\nreturn "+N+";"),N._er=z,N._tag=_,f&&P(p[A-1]=N,f),N._lr=I,i)return N;m=y+A+",undefined,",v=")"}N=T+E+y+(N.deps&&A||N)+")",f=0,_=0}z&&(M=!0,N+=";\n}catch(e){ret"+(i?"urn ":"+=")+m+"j._err(e,view,"+z+")"+v+";}"+(i?"":"ret=ret"))}N="// "+b+"\nvar v"+(l?",t=j._tag":"")+(c?",c=j._cnvt":"")+(d?",h=j._html":"")+(i?";\n":',ret=""\n')+(F.debug?"debugger;":"")+N+(i?"\n":";\nreturn ret;"),ue.debugMode!==!1&&(N="try {\n"+N+"\n}catch(e){\nreturn j._err(e, view);\n}");try{N=new Function("data,view,j,u",N)}catch(e){L("Compiled template code:\n\n"+N+'\n: "'+(e.message||e)+'"')}return t&&(t.fn=N,t.useViews=!!M),N}function X(e,t){return e&&e!==t?t?d(d({},t),e):e:t&&d({},t)}function W(e){return Ae[e]||(Ae[e]="&#"+e.charCodeAt(0)+";")}function G(e){var t,i,n=[];if(typeof e===Ne)for(t in e)i=e[t],t!==ie&&e.hasOwnProperty(t)&&!ne(i)&&n.push({key:t,prop:i});return n}function K(e,i,n){var r=this.jquery&&(this[0]||F("Unknown template")),s=r.getAttribute(Fe);return A.call(s?t.data(r)[Le]:se(r),e,i,n)}function U(e){return void 0!=e?ze.test(e)&&(""+e).replace(Oe,W)||e:""}var J=t===!1;t=t&&t.fn?t:e.jQuery;var Q,Z,ee,te,ie,ne,re,se,oe,ae,le,de,ue,ce,he,pe,fe,ge,me,ve,ye,we,be="v0.9.84",xe=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,_e=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,$e=/[ \t]*(\r\n|\n|\r)/g,ke=/\\(['"])/g,Ce=/['"\\]/g,Te=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,Se=/^if\s/,De=/<(\w+)[>\s]/,Re=/[\x00`><"'&=]/g,ze=/[\x00`><\"'&=]/,je=/^on[A-Z]|^convert(Back)?$/,Ee=/^\#\d+_`[\s\S]*\/\d+_`$/,Oe=Re,Ie=0,Ae={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},Me="html",Ne="object",Fe="data-jsv-tmpl",Le="jsvTmpl",He="For #index in nested block use #getIndex().",Pe={},Be=e.jsrender,qe=Be&&t&&!t.render,Ve={template:{compile:S},tag:{compile:C},viewModel:{compile:z},helper:{},converter:{}};if(te={jsviews:be,sub:{View:$,Err:l,tmplFn:H,parse:V,extend:d,extendCtx:X,syntaxErr:L,onStore:{template:function(e,t){null===t?delete Pe[e]:Pe[e]=t}},addSetting:O,settings:{allowCode:!1},advSet:o,_ths:r,_gm:n,_tg:function(){},_cnvt:m,_tag:_,_er:F,_err:N,_html:U,_cp:s,_sq:function(e){return"constructor"===e&&L(""),e}},settings:{delimiters:u,advanced:function(e){return e?(d(ce,e),de.advSet(),he):ce}},getCtx:s,map:I},(l.prototype=new Error).constructor=l,h.depends=function(){return[this.get("item"),"index"]},p.depends="index",$.prototype={get:c,getIndex:p,getRsc:b,getTmpl:g,hlp:f,_is:"view"},de=te.sub,he=te.settings,!(Be||t&&t.render)){for(Q in Ve)E(Q,Ve[Q]);oe=te.converters,ae=te.helpers,le=te.tags,de._tg.prototype={baseApply:T,cvtArgs:v,bndArgs:w},ee=de.topView=new $,t?(t.fn.render=K,ie=t.expando,t.observable&&(d(de,t.views.sub),te.map=t.views.map)):(t={},J&&(e.jsrender=t),t.renderFile=t.__express=t.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},t.isFunction=function(e){return"function"==typeof e},t.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},de._jq=function(e){e!==t&&(d(e,t),t=e,t.fn.render=K,delete t.jsrender,ie=t.expando)},t.jsrender=be),ue=de.settings,ue.allowCode=!1,ne=t.isFunction,t.render=Pe,t.views=te,t.templates=se=te.templates;for(ye in ue)O(ye);(he.debugMode=function(e){return void 0===e?ue.debugMode:(ue.debugMode=e,ue.onError=e+""===e?new Function("","return '"+e+"';"):ne(e)?e:void 0,he)})(!1),ce=ue.advanced={useViews:!1,_jsv:!1},le({if:{render:function(e){var t=this,i=t.tagCtx,n=t.rendering.done||!e&&(arguments.length||!i.index)?"":(t.rendering.done=!0,t.selected=i.index,i.render(i.view,!0));return n},flow:!0},for:{render:function(e){var t,i=!arguments.length,n=this,r=n.tagCtx,s="",o=0;return n.rendering.done||(t=i?r.view.data:e,void 0!==t&&(s+=r.render(t,i),o+=re(t)?t.length:1),(n.rendering.done=o)&&(n.selected=r.index)),s},flow:!0},props:{baseTag:"for",dataMap:I(G),flow:!0},include:{flow:!0},"*":{render:s,flow:!0},":*":{render:s,flow:!0},dbg:ae.dbg=oe.dbg=a}),oe({html:U,attr:U,url:function(e){return void 0!=e?encodeURI(""+e):null===e?e:""}})}return ue=de.settings,re=(t||Be).isArray,he.delimiters("{{","}}","^"),qe&&Be.views.sub._jq(t),t||Be},window)},function(e,t,i){var n,r;n=[i(12),i(2),i(4)],r=function(e,t,i){"use strict";function n(e,i){var n=this;if(this._treeSettings={},this.options=i,t.isArray(e))this.tree=e,this.load();else{this.delegate=e;for(var r in this.delegate)this[r]||"function"!=typeof this.delegate[r]||(this[r]=this.delegate[r].bind(this.delegate));e.isReady()&&this.load(),t(e).on("dataloaded",this.load.bind(this)),t(e).on("datachanged editabilitychanged validationresultchanged",function(e,i){t(n).trigger(e.type,[i])})}}return n.prototype={treeSettings:function(e){if(!this._treeSettings[e.id]){var t=this.parent(e)?this._treeSettings[this.parent(e)].depth+1:0;this._treeSettings[e.id]={expanded:!1,depth:t}}return this._treeSettings[e.id]},isReady:function(){return void 0!==this.view},assertReady:function(){if(!this.isReady())throw"Datasource not ready yet"},load:function(){this.parentByIdMap={},this.childrenByIdMap={},this.delegate&&(this.delegate.buildTree?this.tree=this.delegate.buildTree():this.tree=this.buildTree(this.delegate.getData())),this.initView(this.options&&this.options.initialTreeDepth||0),t(this).trigger("dataloaded")},initView:function(e){function t(n,r){n.forEach(function(n){i._treeSettings[n.id]={depth:r,expanded:r<(e||0)};var s=i.children(n);s&&s.length&&t(s,r+1)})}var i=this;t(this.tree,0),this.rebuildView()},rebuildView:function(){var e=this.buildStatistics();e.filteredRecordCount=this.filter?0:void 0,this.sortTree(),this.view=this.flattenSubTree(this.tree,void 0,e),this._statistics=e,t(this).trigger("statisticschanged",e)},sortTree:function(){function e(i){i.sort(t.comparator);for(var n=0,r=i.length;n<r;n++){var s=t.children(i[n]);s&&e(s)}}var t=this;e(this.tree)},buildTree:function(e){for(var t=[],i=0,n=e.length;i<n;i++)var r=e[i];for(var i=0,n=e.length;i<n;i++){var r=e[i];if(void 0!==r.parent){var s=this.getRecordById(r.parent);s.children||(s.children=[]),s.children.push(r)}else t.push(r)}return t},getRecordById:function(e){return this.delegate.getRecordById(e)},getData:function(e,t){return this.assertReady(),void 0!==e||void 0!==t?this.view.slice(e,t):this.view},recordCount:function(){return this.assertReady(),this.view.length},toggle:function(e){var t=this.getRecordById(e);this.isExpanded(t)?this.collapse(t):this.expand(t)},expand:function(e){var i,n,r,s=e.id;if(!this.isExpanded(e)){for(n=0,i=this.view.length;n<i;n++)if(this.view[n].id==s){r=n;break}if(this.treeSettings(e).expanded=!0,void 0!==r){var o=this.flattenSubTree(e);this.view.splice.apply(this.view,[r+1,0].concat(o)),t(this).trigger("rowsadded",{start:r+1,end:r+1+o.length})}t(this).trigger("treetoggled",{id:s,index:r,state:this.isExpanded(e)})}},collapse:function(e){var i,n,r,s,o,a=e.id;if(this.isExpanded(e)){for(i=0,n=this.view.length;i<n;i++)if(void 0===r&&this.view[i].id==a)o=this.treeSettings(e).depth,r=i;else if(void 0!==r&&this.treeSettings(this.view[i]).depth<=o)break;s=i,this.treeSettings(e).expanded=!1,void 0!==r&&(this.view.splice(r+1,s-r-1),t(this).trigger("rowsremoved",{start:r+1,end:s})),t(this).trigger("treetoggled",{id:a,index:r,state:this.isExpanded(e)})}},isExpanded:function(e){return this.treeSettings(e).expanded},expandAll:function(e){var t=this;i.inAnimationFrame(function(){function i(e){var n=t.children(e);n&&n.forEach(i),t.expand(e)}void 0===e?t.tree.forEach(i):i(t.getRecordById(e))})},collapseAll:function(e){var t=this;i.inAnimationFrame(function(){function i(e){t.collapse(e);var n=t.children(e);n&&n.forEach(i)}void 0===e?t.tree.forEach(i):i(t.getRecordById(e))})},flattenSubTree:function(e,i,n){function r(e,t,i,n,l){for(var d=0,u=e.length;d<u;d++){var c=e[d],h=a.filter&&a.filter(c),p=0==h?n:h!=-1;if(l&&void 0!==l.filteredRecordCount&&1===h&&l.filteredRecordCount++,i){for(;o.length>t;)o.pop();o[t]=c}if(p){s=s.concat(o.filter(function(e){return e}));for(var f=0;f<o.length;f++)o[f]=void 0}if(h!=-1&&a.hasChildren(c)&&(a.treeSettings(c).expanded||a.filter&&!p||l&&void 0!==l.filteredRecordCount)){var g=a.children(c);r(g,t+1,a.treeSettings(c).expanded,p,l)}}}var s=[],o=[],a=this,i=!1;if(!t.isArray(e)){var l=this.children(e);i=this.rowOrAncestorMatches(e),e=l}return e&&r(e,0,!0,i,n),s},rowOrAncestorMatches:function(e){return!this.filter||this.filter(e)||void 0!==this.parent(e)&&this.rowOrAncestorMatches(this.getRecordById(this.parent(e)))},sort:function(e){this.comparator=e,this.rebuildView(),t(this).trigger("dataloaded")},applyFilter:function(e,i){this.filter=i;var n=this.view;this.rebuildView(),t(this).trigger("datachanged",{data:this.view,oldData:n})},hasChildren:function(e){return this.delegate&&this.delegate.hasChildren?this.delegate.hasChildren.apply(this.delegate,arguments):e.children&&e.children.length>0},children:function e(t){if(!this.childrenByIdMap[t.id]){var e=t.children||this.delegate&&"function"==typeof this.delegate.children&&this.delegate.children.apply(this.delegate,arguments);if(this.childrenByIdMap[t.id]=e,void 0!==e)for(var i=0,n=e.length;i<n;i++)this.parentByIdMap[e[i].id]=t.id}return this.childrenByIdMap[t.id]},parent:function(e){return this.delegate&&this.delegate.parent?this.delegate.parent.apply(this.delegate,arguments):e.parent||this.parentByIdMap[e.id]},buildStatistics:function(){var e=this.delegate&&this.delegate.statistics&&this.delegate.statistics();return e?e:{actualRecordCount:this.delegate&&this.delegate.recordCount()}},statistics:function(){return this._statistics}},{loadFirst:["templating","grouping"],init:function(i,r){e(i,function(e){var s;return s=r.autoTreeDataSource!==!1?new n(this.dataSource,r):this.dataSource,{init:function(){e.init(),this.container.on("click",".pg-treetoggle",function(e){var i=t(this).parents(".pg-row").first(),n=i.attr("data-row-id");s.toggle(n),e.stopPropagation(),e.preventDefault()}),t(s).on("treetoggled",function(e,t){i.target.find(".pg-row[data-row-id='"+t.id+"']").toggleClass("pg-tree-expanded",t.state)})},afterRenderRow:function(i,n,r){e.afterRenderRow(i,n,r),t(r).toggleClass("pg-tree-expanded",s.treeSettings(i).expanded)},renderCellContent:function(t,i){var n=e.renderCellContent.apply(this,arguments);if(i.treeColumn){var r=document.createElement("div");r.classList.add(this.dataSource.hasChildren(t)?"pg-treetoggle":"pg-treeleaf"),r.classList.add("pg-tree-level-"+s.treeSettings(t).depth);var o=document.createDocumentFragment();return o.appendChild(r),o.appendChild(n),o}return n},dataSource:s,treegrid:{expandAll:function(){s.expandAll()},collapseAll:function(){s.collapseAll()}}}})},TreeGridDataSource:n}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(4)],r=function(e){function t(e){var t=this;this.delegate=e;for(var i in this.delegate)this[i]||"function"!=typeof this.delegate[i]||(this[i]=this.delegate[i].bind(this.delegate));e.isReady()&&this.load(),$(e).on("datachanged",function(e,i){t.load(),$(t).trigger(e.type,[i])}),$(e).on("dataloaded",this.load.bind(this)),this.groups=[]}return t.prototype={load:function(){this.parentByIdMap={},this.updateView()},updateView:function(){function t(s,o,a,l){if(o&&o.length){for(var d={},u=[],c=o[0],h=c.groupProjection&&c.groupProjection(s)||function(e){return e},p=o.slice(1),f=0,g=s.length;f<g;f++){var m=h(e.getValue(s[f],c.key)),v=d[m];v||(u.push(d[m]=v={groupRow:!0,id:a+m+":",description:m,children:[],_groupColumn:c,_groupLevel:l,parent:a}),v[c.key]=m),v.children.push(s[f]),i.parentByIdMap[s[f].id]=v,n[v.id]=v}for(var f=0,g=u.length;f<g;f++)u[f].recordCount=u[f].children.length,u[f].children=t(u[f].children,p,u[f].id,l+1),i.processGroup(u[f]);return u}for(var f=0,g=s.length;f<g;f++)r[s[f].id]=a;return s}var i=this,n=this.groupRows={},r={};this.groups&&this.groups.length?this.view=t(this.delegate.getData(),this.groups,"group:",0):this.view=this.delegate.getData().concat([]),$(this).trigger("dataloaded")},group:function(e){this.groups=e,this.isReady()&&this.updateView()},getRecordById:function(e){return this.groupRows[e]||this.delegate.getRecordById(e)},getData:function(e,t){return this.assertReady(),void 0!==e||void 0!==t?this.view.slice(e,t):this.view},recordCount:function(){return this.assertReady(),this.view.length},isReady:function(){return void 0!==this.view},assertReady:function(){if(!this.isReady())throw"Datasource not ready yet"},parent:function(e){return e.parent||this.parentByIdMap[e.id].id},hasChildren:function(e){var t=this.groupRows[e.id];return!!t&&(t.children&&t.children.length>0)},buildTree:function(){return this.getData()},processGroup:function(e){}},t}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="pg-grouper pg-column-dragtarget"> <span class=pg-grouper-placeholder>Drag columns here to group.</span> </div>'},function(e,t){e.exports="<span class=pg-grouping-groupindicator><span class=pg-group-column>{{:~column.title}}</span> {{:description}} <span class=pg-group-recordcount>{{:recordCount}}</span></span>"},function(e,t){e.exports="<div class=pg-group-indicator data-group-key={{:key}}>{{if ~removable}}<span class=pg-group-delete data-group-key={{:key}}></span>{{/if}} {{:title}}</div> "},function(e,t,i){var n,r;n=[i(12),i(2)],r=function(e,t){"use strict";return function(i,n){e(i,function(e){return{init:function(){e.init.apply(this,arguments),this.container.on("mouseenter",".pg-row",function(e){var i=t(e.currentTarget).data("row-id");t(e.currentTarget).parents(".pg-rowgroup").first().find("> .pg-container > .pg-row[data-row-id='"+i+"']").addClass("pg-hover")}).on("mouseleave",".pg-row",function(e){var i=t(e.currentTarget).data("row-id");t(e.currentTarget).parents(".pg-rowgroup").first().find("> .pg-container > .pg-row[data-row-id='"+i+"']").removeClass("pg-hover")})}}})}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12),i(2)],r=function(e,t){"use strict";return function(i,n){e(i,function(e){return{init:function(){e.init.apply(this,arguments),this.container.on("click",".pg-rowgroup .pg-row",function(e){var n=t(e.currentTarget).data("row-id");i.selection.selectSingleRow(n)}),n.onrowselected&&i.on("rowselected",n.onrowselected)},selection:{selectSingleRow:function(e){this.selectedElements&&this.selectedElements.removeClass("pg-selected"),this.selectedElements=i.container.find("> .pg-rowgroup > .pg-container > .pg-row[data-row-id='"+e+"']"),this.selectedElements.addClass("pg-selected"),i.trigger("rowselected",e)},selectedId:function(){if(this.selectedElements)return this.selectedElements.data("row-id")}}}})}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12),i(2),i(4),i(42)],r=function(e,t,i,n){"use strict";return{loadFirst:["dragging","columnsizing"],init:function(r,s){e(r,function(e){function s(){var e=r.loadSetting("sorting");void 0!==e&&null!==e&&""!==e&&(o=e)}var o=[];return{init:function(){s(),"function"!=typeof this.dataSource.sort&&(this.dataSource=new n(this.dataSource)),e.init(),this.container.on("click",".pg-columnheader",function(e){var i,n=t(this).attr("data-column-key");r.getColumnForKey(n);o[0]&&o[0].key===n&&(i=o[0].direction),
i="ascending"==i?"descending":"ascending",r.target.find(".pg-sort-ascending, .pg-sort-descending").removeClass("pg-sort-ascending pg-sort-descending"),t(this).addClass("pg-sort-"+i),o=[{key:n,direction:i}].concat(o.filter(function(e){return e.key!==n})),r.sorting.sort(o),r.saveSetting("sorting",o)}),t(r.dataSource).one("dataloaded",function(e){r.sorting.sort(o)})},renderHeaderCell:function(t,i){var n=e.renderHeaderCell(t,i);return(void 0===t.sortable||t.sortable)&&(n.append("<div class='pg-sorter'>"),n.addClass("pg-sortable"),o[0]&&o[0].key===t.key&&n.addClass("pg-sort-"+o[0].direction)),n},sorting:{sort:function(e){"function"!=typeof r.dataSource.sort?console.warn&&console.warn("Trying to sort unsortable datasource"):r.dataSource.sort(this.compareRow.bind(this,e),e)},compareRow:function(e,t,n){for(var s=0,o=e.length;s<o;s++){var a,l=e[s],d=r.getColumnForKey(l.key);if(void 0!==d&&(a="function"==typeof d.compare?d.compare(i.getValue(t,d.key),i.getValue(n,d.key)):this.compareValue(i.getValue(t,d.key),i.getValue(n,d.key)),0!==a))return"descending"===l.direction&&(a*=-1),a}},compareValue:function(e,t){return null!==e&&void 0!==e||null!==t&&void 0!==t?null===e||void 0===e?-1:null===t||void 0===t?1:"string"==typeof e&&"string"==typeof t?this.compareString(e,t):e<t?-1:e>t?1:0:0},compareString:function(e,t){for(var i=/([0-9]+|.)/g,n=/^[0-9]+$/,r=e.toLocaleUpperCase().match(i),s=t.toLocaleUpperCase().match(i),o=0,a=Math.min(r.length,s.length);o<a;o++){var l=r[o],d=s[o];if(l.match(n)){if(!d.match(n))return-1;var u=parseInt(l),c=parseInt(d);if(u<c)return-1;if(u>c)return 1}else if(d.match(n))return 1;if(r[o]<s[o])return-1;if(r[o]>s[o])return 1}}}}})}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(43)],r=function(e){function t(e){var t=this;this.delegate=e,"function"==typeof e.applyFilter&&(this.applyFilter=e.applyFilter.bind(e)),$(e).on("dataloaded",function(e){t.reload(),$(t).trigger("dataloaded")}).on("datachanged",function(e,i){t.reload(),$(t).trigger("datachanged",[i])}),e.isReady()&&this.reload()}return t.prototype={view:null,isReady:function(){return null!=this.view},reload:function(){this.delegate.assertReady(),this.comparator?this.view=this.delegate.getData().sort(this.comparator):this.view=this.delegate.getData()},recordCount:function(){return this.assertReady(),this.view.length},getData:function(e,t){return this.assertReady(),e||t?(e||(e=0),t||(t=this.recordCount()),this.view.slice(e,t)):this.view},getValue:function(e,t){return this.delegate.getValue(e,t)},setValue:function(e,t,i){this.delegate.setValue(e,t,i)},assertReady:function(){if(!this.isReady())throw Error("Datasource not ready yet")},buildStatistics:function(){return this.delegate.buildStatistics()},getRecordById:function(e){return this.delegate.getRecordById(e)},sort:function(e){this.comparator=e,this.reload(),$(this).trigger("dataloaded")}},t}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){(function(e,n){function r(e,i){var n={seen:[],stylize:o};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(i)?n.showHidden=i:i&&t._extend(n,i),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),l(n,e,n.depth)}function s(e,t){var i=r.styles[t];return i?"["+r.colors[i][0]+"m"+e+"["+r.colors[i][1]+"m":e}function o(e,t){return e}function a(e){var t={};return e.forEach(function(e,i){t[e]=!0}),t}function l(e,i,n){if(e.customInspect&&i&&T(i.inspect)&&i.inspect!==t.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(n,e);return w(r)||(r=l(e,r,n)),r}var s=d(e,i);if(s)return s;var o=Object.keys(i),g=a(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(i)),C(i)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return u(i);if(0===o.length){if(T(i)){var m=i.name?": "+i.name:"";return e.stylize("[Function"+m+"]","special")}if(_(i))return e.stylize(RegExp.prototype.toString.call(i),"regexp");if(k(i))return e.stylize(Date.prototype.toString.call(i),"date");if(C(i))return u(i)}var v="",y=!1,b=["{","}"];if(f(i)&&(y=!0,b=["[","]"]),T(i)){var x=i.name?": "+i.name:"";v=" [Function"+x+"]"}if(_(i)&&(v=" "+RegExp.prototype.toString.call(i)),k(i)&&(v=" "+Date.prototype.toUTCString.call(i)),C(i)&&(v=" "+u(i)),0===o.length&&(!y||0==i.length))return b[0]+v+b[1];if(n<0)return _(i)?e.stylize(RegExp.prototype.toString.call(i),"regexp"):e.stylize("[Object]","special");e.seen.push(i);var $;return $=y?c(e,i,n,g,o):o.map(function(t){return h(e,i,n,g,t,y)}),e.seen.pop(),p($,v,b)}function d(e,t){if(x(t))return e.stylize("undefined","undefined");if(w(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function c(e,t,i,n,r){for(var s=[],o=0,a=t.length;o<a;++o)j(t,String(o))?s.push(h(e,t,i,n,String(o),!0)):s.push("");return r.forEach(function(r){r.match(/^\d+$/)||s.push(h(e,t,i,n,r,!0))}),s}function h(e,t,i,n,r,s){var o,a,d;if(d=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},d.get?a=d.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):d.set&&(a=e.stylize("[Setter]","special")),j(n,r)||(o="["+r+"]"),a||(e.seen.indexOf(d.value)<0?(a=m(i)?l(e,d.value,null):l(e,d.value,i-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),x(o)){if(s&&r.match(/^\d+$/))return a;o=JSON.stringify(""+r),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function p(e,t,i){var n=0,r=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]}function f(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function w(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function x(e){return void 0===e}function _(e){return $(e)&&"[object RegExp]"===D(e)}function $(e){return"object"==typeof e&&null!==e}function k(e){return $(e)&&"[object Date]"===D(e)}function C(e){return $(e)&&("[object Error]"===D(e)||e instanceof Error)}function T(e){return"function"==typeof e}function S(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function D(e){return Object.prototype.toString.call(e)}function R(e){return e<10?"0"+e.toString(10):e.toString(10)}function z(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var E=/%[sdj%]/g;t.format=function(e){if(!w(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(r(arguments[i]));return t.join(" ")}for(var i=1,n=arguments,s=n.length,o=String(e).replace(E,function(e){if("%%"===e)return"%";if(i>=s)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return e}}),a=n[i];i<s;a=n[++i])o+=m(a)||!$(a)?" "+a:" "+r(a);return o},t.deprecate=function(i,r){function s(){if(!o){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),o=!0}return i.apply(this,arguments)}if(x(e.process))return function(){return t.deprecate(i,r).apply(this,arguments)};if(n.noDeprecation===!0)return i;var o=!1;return s};var O,I={};t.debuglog=function(e){if(x(O)&&(O={NODE_ENV:"production"}.NODE_DEBUG||""),e=e.toUpperCase(),!I[e])if(new RegExp("\\b"+e+"\\b","i").test(O)){var i=n.pid;I[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,i,n)}}else I[e]=function(){};return I[e]},t.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=g,t.isNull=m,t.isNullOrUndefined=v,t.isNumber=y,t.isString=w,t.isSymbol=b,t.isUndefined=x,t.isRegExp=_,t.isObject=$,t.isDate=k,t.isError=C,t.isFunction=T,t.isPrimitive=S,t.isBuffer=i(44);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",z(),t.format.apply(t,arguments))},t.inherits=i(45),t._extend=function(e,t){if(!t||!$(t))return e;for(var i=Object.keys(t),n=i.length;n--;)e[i[n]]=t[i[n]];return e}}).call(t,function(){return this}(),i(8))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},function(e,t,i){var n,r;n=[i(12),i(2),i(33),i(4),i(47)],r=function(e,t,i,n,r){"use strict";return{init:function(i,n){var s=t.templates(n.template||r);e(i,function(e){return{init:function(){var i=this;return this.dataSource.statistics?(e.init(),this.statistics.container=t("<div class='pg-statistics'>"),this.target.append(this.statistics.container).wrapInner("<div class='pg-statistics-wrapper'>"),t(this.dataSource).on("statisticschanged",function(){i.statistics.updateContents()}),void this.statistics.updateContents()):void console.log("Statistics enabled but datasource does not support it.")},statistics:{updateContents:function(){this.container.html(this.renderContents())},renderContents:function(){return s.render(i.dataSource.statistics())}}}})}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t){e.exports="{{if filteredRecordCount !== undefined}}Filter matches {{:filteredRecordCount}} of {{/if}}{{:actualRecordCount}} records."},function(e,t,i){var n,r;n=[i(12)],r=function(e){var t=/\s+/;return function(i,n){e(i,function(e){return{renderCell:function(i,r,s,o){var a,l,d=e.renderCell.apply(this,arguments);n.applyClasses(i,r,function(e){if(e!=l){var i=d.className;a&&(i=i.split(t).filter(function(e){return a.indexOf(e)==-1}).join(" ")),e?(d.className=i+" "+e,a=e.split(t)):(d.className=i,a=null),l=e}});return d}}})}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12),i(3),i(4),i(6)],r=function(e,t,i,n){"use strict";return{requires:{subview:{hasSubView:function(e,t){return e.subgrids.hasSubGrid(t)},renderSubView:function(e,t,i){return e.subgrids.renderSubGrid(t,i)}}},init:function(t,i){e(t,function(e){return{subgrids:{hasSubGrid:function(e){return i.hasSubGrid(t,e)},renderSubGrid:function(e,t){return n.resolve(i.subGridSettings(e)).then(function(e){var i=t.PowerGrid(e);return i.on("datarendered",function(){t.trigger("resize")}),i.promise})},subgrid:function(e){var i=t.subviews.subview(e);if(i.length)return i.PowerGrid()}}}})}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12),i(3),i(4),i(2)],r=function(e,t,i,n){"use strict";return function(t,i){e(t,function(e){var r=[],s={};return{init:function(){e.init(),this.container.on("click",".pg-subview-toggle",function(e){var i=n(this).parents(".pg-row").first(),r=i.attr("data-row-id"),o=parseInt(i.attr("data-row-idx"));s[r]?t.subviews.collapseView(t.dataSource.getRecordById(r),o):t.subviews.expandView(t.dataSource.getRecordById(r),o),e.stopPropagation(),e.preventDefault()})},findRow:function(t){var i=e.findRow(t),n=i.find(".pg-inner-row");return 0==n.length?i:n},subviews:{autoExpand:function(e){for(var i=t.dataSource.getData(),n=0,r=i.length;n<r;n++){var s=i[n];e.apply(this,[s.id,t.dataSource])&&this.expandView(s,n)}},expandView:function(e,i){var n=t.getRowGroupFor(i);s[e.id]||(s[e.id]=!0,t.afterRenderRow(e,i,n.all.children("[data-row-id='"+e.id+"']").toArray()),n.all.find(".pg-subview-toggle").addClass("pg-subview-expanded"))},collapseView:function(e,i){var n=t.getRowGroupFor(i);s[e.id]&&(s[e.id]=!1,n.all.children("[data-row-id='"+e.id+"']").css("height",t.rowHeight(i)+"px"),n.all.find(".pg-subview-toggle").removeClass("pg-subview-expanded"))},subview:function(e){return t.container.find("> .pg-rowgroup > .pg-container > .pg-row.pg-row-has-subview[data-row-id='"+e+"'] > .pg-subview")}},afterRenderRow:function(o,a,l){function d(){requestAnimationFrame(function(){r[o.id]=u[0].scrollHeight,l.forEach(function(e){e.style.height=t.rowHeight(a)+"px"}),t.adjustHeights()})}var u,c=n(l[0]);if(o&&i.hasSubView(t,o)&&s[o.id])if(c.is(".pg-row-has-subview"))l.forEach(function(e){e.style.height=t.rowHeight(a)+"px"});else{c.addClass("pg-row-has-subview"),c.wrapInner('<div class="pg-inner-row"></div>'),c.children(".pg-inner-row").css("height",e.rowHeight(a)+"px"),u=n('<div class="pg-subview">'),u.attr("id",(t.target.attr("id")||"subview")+"-"+o.id);var h=i.renderSubView(t,o,u);u.on("resize",d),c.append(u),h.then?h.then(d):d()}e.afterRenderRow(o,a,l)},renderCellContent:function(n,r,o){var a=e.renderCellContent.apply(this,arguments);if(r.subViewToggle&&n&&i.hasSubView(t,n)){var l=document.createDocumentFragment(),d=document.createElement("div");return d.classList.add("pg-subview-toggle"),d.classList.add(r.subViewToggleClass||"pg-subview-toggle-default"),1==s[n.id]&&d.classList.add("pg-subview-expanded"),l.appendChild(d),l.appendChild(a),l}return a},rowHeight:function(i,n){if(void 0===n){var o=t.dataSource.getData(i,i+1)[0].id;return e.rowHeight(i)+(s[o]&&r[o]||0)}for(var a=t.dataSource.getData(i,n).map(function(e){return e.id}),l=0,d=i;d<n;d++)s[a[d]]&&(l+=r[a[d]]);return e.rowHeight(i,n)+l}}})}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(12),i(2),i(33)],r=function(e,t,i){"use strict";return function(i,n){e(i,function(e){return{init:function(){e.init.apply(this,arguments),this.options.columns.forEach(function(e){void 0!==e.template&&null!==e.template&&(e.compiledTemplate=t.templates(e.template))})},renderCellValue:function(i,n,r){if(void 0!==n.template&&null!==n.template){var s=t.extend({},i);s[n.key]=r;var o=document.createElement("span");return o.innerHTML=n.compiledTemplate.render(s,{record:i,column:n}),o}return e.renderCellValue.apply(this,arguments)}}})}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(2),i(12)],r=function(e,t){return{init:function(i,n){t(i,function(t){return{init:function(){var n=this;t.init(),e(i.dataSource).on("validationresultchanged",function(e,t){t.values.forEach(function(e){var t=i.getColumnForKey(e.key);t&&n.updateValidationStatus(e,t,i.getCellFor(e.id,e.key))})})},updateValidationStatus:function(t,n,r){var s=i.validation.validate(t,n,r),o=r.validationclasses;if(o&&e(r).removeClass(o),s){for(var a={},l=0,d=s.length;l<d;l++)a[s[l].severity]=!0;var u="pg-cell-invalid "+Object.keys(a).map(function(e){return"pg-cell-validation-"+e}).join(" ");e(r).addClass(u).attr("title",i18n(s[0].message)),r.validationclasses=u}},afterCellRendered:function(e,i,n){this.updateValidationStatus(e,i,n),t.afterCellRendered(e,i,n)},validation:{validate:function(e,t,n){return i.dataSource.validate&&i.dataSource.validate(e,t,n)}}}})}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(2),i(4)],r=function(e,t){"use strict";function i(e,t){this.data=e,t?setTimeout(this.load.bind(this),t):this.load()}return i.prototype={load:function(t){void 0!==t&&(this.data=t);for(var i=0,n=this.data.length;i<n;i++)void 0===this.data[i].id&&(this.data[i].id=i);e(this).trigger("dataloaded"),this.ready=!0},recordCount:function(){return this.assertReady(),this.data.length},getRowByIndex:function(e){return this.assertReady(),this.data[e]},getRecordById:function(e){this.assertReady();for(var t=0,i=this.data.length;t<i;t++)if(this.data[t].id==e)return this.data[t]},getData:function(e,t){return this.assertReady(),e||t?(e||(e=0),t||(t=this.recordCount()),this.data.slice(e,t)):this.data},setValue:function(i,n,r){this.assertReady(),t.setValue(this.getRecordById(i),n,r),e(this).trigger("datachanged",{values:[{id:i,key:n}]})},assertReady:function(){if(!this.isReady())throw Error("Datasource not ready yet")},isReady:function(){return this.ready},sort:function(t){this.assertReady(),this.data.sort(t),e(this).trigger("dataloaded")}},i}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(2)],r=function(e){"use strict";function t(e){this.settings=e,this.load(),this.data=void 0}return t.prototype={assertReady:function(){if(!this.isReady())throw"Datasource not yet ready"},isReady:function(){return void 0!==this.data},load:function(){var t=this;e.getJSON(this.settings.url).done(function(i){t.data=i.data,e(t).trigger("dataloaded")})},recordCount:function(){return this.assertReady(),this.data.length},getData:function(e,t){return this.assertReady(),e||t?this.data.slice(e,t):this.data},getRecordById:function(e){return this.assertReady(),this.data.filter(function(t){return t.id==e})[0]},setValue:function(e,t,i){this.assertReady(),this.getRecordById(e)[t]=i}},t}.apply(t,n),!(void 0!==r&&(e.exports=r))}])});
//# sourceMappingURL=main.js.map